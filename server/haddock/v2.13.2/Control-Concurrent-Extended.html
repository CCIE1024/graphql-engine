<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Concurrent.Extended</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">graphql-engine-1.0.0: GraphQL API over Postgres</span><ul class="links" id="page-menu"><li><a href="src/Control.Concurrent.Extended.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Concurrent.Extended</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:sleep">sleep</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:forkImmortal">forkImmortal</a> :: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a> -&gt; m Thread</li><li class="src short"><span class="keyword">data</span> <a href="#t:ThreadState">ThreadState</a><ul class="subs"><li>= <a href="#v:ThreadForked">ThreadForked</a></li><li>| <a href="#v:ThreadBlocking">ThreadBlocking</a></li><li>| <a href="#v:ThreadShutdownInitiated">ThreadShutdownInitiated</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ThreadShutdown">ThreadShutdown</a> m = <a href="#v:ThreadShutdown">ThreadShutdown</a> {<ul class="subs"><li><a href="#v:tsThreadShutdown">tsThreadShutdown</a> :: m ()</li></ul>}</li><li class="src short"><a href="#v:forkManagedT">forkManagedT</a> :: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a> -&gt; <a href="Control-Monad-Trans-Managed.html#t:ManagedT" title="Control.Monad.Trans.Managed">ManagedT</a> m Thread</li><li class="src short"><span class="keyword">data</span> <a href="#t:Forever">Forever</a> m = <span class="keyword">forall</span> a. <a href="#v:Forever">Forever</a> a (a -&gt; m a)</li><li class="src short"><a href="#v:forkManagedTWithGracefulShutdown">forkManagedTWithGracefulShutdown</a> :: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a> -&gt; <a href="Control-Concurrent-Extended.html#t:ThreadShutdown" title="Control.Concurrent.Extended">ThreadShutdown</a> m -&gt; m (<a href="Control-Concurrent-Extended.html#t:Forever" title="Control.Concurrent.Extended">Forever</a> m) -&gt; <a href="Control-Monad-Trans-Managed.html#t:ManagedT" title="Control.Monad.Trans.Managed">ManagedT</a> m Thread</li><li class="src short"><span class="keyword">data</span> <a href="#t:ImmortalThreadLog">ImmortalThreadLog</a><ul class="subs"><li>= <a href="#v:ImmortalThreadUnexpectedException">ImmortalThreadUnexpectedException</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></li><li>| <a href="#v:ImmortalThreadStopping">ImmortalThreadStopping</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></li><li>| <a href="#v:ImmortalThreadRestarted">ImmortalThreadRestarted</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:ForkableMonadIO">ForkableMonadIO</a> m = (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadBaseControl <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> m, Forall (Pure m))</li><li class="src short"><a href="#v:forConcurrentlyEIO">forConcurrentlyEIO</a> :: (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> e m) =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [a] -&gt; (a -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; m [b]</li><li class="src short"><a href="#v:concurrentlyEIO">concurrentlyEIO</a> :: (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> e m) =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> b -&gt; m (a, b)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:sleep" class="def">sleep</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Control.Concurrent.Extended.html#sleep" class="link">Source</a> <a href="#v:sleep" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Concurrent.html#v:threadDelay" title="Control.Concurrent">threadDelay</a></code>, but takes a <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/time-1.9.3/Data-Time-Clock.html#t:DiffTime" title="Data.Time.Clock">DiffTime</a></code> instead of an <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> microseconds.</p><p>NOTE: you cannot simply replace e.g. <code>threadDelay 1000</code> with <code>sleep 1000</code> since those literals
 have different meanings!</p></div></div><div class="top"><p class="src"><a id="v:forkImmortal" class="def">forkImmortal</a> <a href="src/Control.Concurrent.Extended.html#forkImmortal" class="link">Source</a> <a href="#v:forkImmortal" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>A label describing this thread's function (see <code>labelThread</code>).</p></td></tr><tr><td class="src">-&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc"><p>An IO action we expect never to return normally. This will have the type
 signature ':: m a' (see e.g. the type of <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad.html#v:forever" title="Control.Monad">forever</a></code>).</p></td></tr><tr><td class="src">-&gt; m Thread</td><td class="doc"><p>A handle for the forked thread. See <a href="Control-Immortal.html">Control.Immortal</a>.</p></td></tr></table></div><div class="doc"><p>Note: Please consider using <code><a href="Control-Concurrent-Extended.html#v:forkManagedT" title="Control.Concurrent.Extended">forkManagedT</a></code> instead to ensure reliable
 resource cleanup.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ThreadState" class="def">ThreadState</a> <a href="src/Control.Concurrent.Extended.html#ThreadState" class="link">Source</a> <a href="#t:ThreadState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ThreadForked" class="def">ThreadForked</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ThreadBlocking" class="def">ThreadBlocking</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ThreadShutdownInitiated" class="def">ThreadShutdownInitiated</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ThreadState">Instances</h4><details id="i:ThreadState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ThreadState:Eq:1"></span> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a></span> <a href="src/Control.Concurrent.Extended.html#line-84" class="link">Source</a> <a href="#t:ThreadState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ThreadState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Concurrent-Extended.html">Control.Concurrent.Extended</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ThreadState:Show:2"></span> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a></span> <a href="src/Control.Concurrent.Extended.html#line-84" class="link">Source</a> <a href="#t:ThreadState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ThreadState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Concurrent-Extended.html">Control.Concurrent.Extended</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Control-Concurrent-Extended.html#t:ThreadState" title="Control.Concurrent.Extended">ThreadState</a>] -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ThreadShutdown" class="def">ThreadShutdown</a> m <a href="src/Control.Concurrent.Extended.html#ThreadShutdown" class="link">Source</a> <a href="#t:ThreadShutdown" class="selflink">#</a></p><div class="doc"><p><code>ThreadShutdown</code> is a newtype wrapper over an action which is intended
   to execute when a thread's shutdown is initiated before killing the thread</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ThreadShutdown" class="def">ThreadShutdown</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tsThreadShutdown" class="def">tsThreadShutdown</a> :: m ()</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:forkManagedT" class="def">forkManagedT</a> :: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a> -&gt; <a href="Control-Monad-Trans-Managed.html#t:ManagedT" title="Control.Monad.Trans.Managed">ManagedT</a> m Thread <a href="src/Control.Concurrent.Extended.html#forkManagedT" class="link">Source</a> <a href="#v:forkManagedT" class="selflink">#</a></p><div class="doc"><p>This function pairs a call to <code><a href="Control-Concurrent-Extended.html#v:forkImmortal" title="Control.Concurrent.Extended">forkImmortal</a></code> with a finalizer which stops
 the immortal thread.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Forever" class="def">Forever</a> m <a href="src/Control.Concurrent.Extended.html#Forever" class="link">Source</a> <a href="#t:Forever" class="selflink">#</a></p><div class="doc"><p>The <code>Forever</code> type defines an infinite looping monadic action (like <code>m void</code>), but allows the
 caller to control the recursion or insert code before each iteration. The <code>a</code> is the initial argument,
 and subsequent iterations will be fed the argument returned by the previous one.  See
 <code>forkManagedTWithGracefulShutdown</code> to see how it's used</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> a. <a id="v:Forever" class="def">Forever</a> a (a -&gt; m a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:forkManagedTWithGracefulShutdown" class="def">forkManagedTWithGracefulShutdown</a> :: <a href="Control-Concurrent-Extended.html#t:ForkableMonadIO" title="Control.Concurrent.Extended">ForkableMonadIO</a> m =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Hasura-Logging.html#t:Logger" title="Hasura.Logging">Logger</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a> -&gt; <a href="Control-Concurrent-Extended.html#t:ThreadShutdown" title="Control.Concurrent.Extended">ThreadShutdown</a> m -&gt; m (<a href="Control-Concurrent-Extended.html#t:Forever" title="Control.Concurrent.Extended">Forever</a> m) -&gt; <a href="Control-Monad-Trans-Managed.html#t:ManagedT" title="Control.Monad.Trans.Managed">ManagedT</a> m Thread <a href="src/Control.Concurrent.Extended.html#forkManagedTWithGracefulShutdown" class="link">Source</a> <a href="#v:forkManagedTWithGracefulShutdown" class="selflink">#</a></p><div class="doc"><p><code>forkManagedTWithGracefulShutdown</code> is an extension of the <code>forkManagedT</code>
   function this function also attempts to gracefully shutdown the thread. This function
   accepts a `m (Forever m)` argument. The <code>Forever</code> type contains a function and an argument
   to the function. The function supplied will be run repeatedly until shutdown is initiated. The
   response of the function will be the argument to the next iteration.</p><p>For reference, this function is used to run the async actions processor. Check
   <code>asyncActionsProcessor</code></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ImmortalThreadLog" class="def">ImmortalThreadLog</a> <a href="src/Control.Concurrent.Extended.html#ImmortalThreadLog" class="link">Source</a> <a href="#t:ImmortalThreadLog" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ImmortalThreadUnexpectedException" class="def">ImmortalThreadUnexpectedException</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a></td><td class="doc"><p>Synchronous Exception</p></td></tr><tr><td class="src"><a id="v:ImmortalThreadStopping" class="def">ImmortalThreadStopping</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>Asynchronous Exception about to be sent</p></td></tr><tr><td class="src"><a id="v:ImmortalThreadRestarted" class="def">ImmortalThreadRestarted</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ImmortalThreadLog">Instances</h4><details id="i:ImmortalThreadLog" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImmortalThreadLog:ToEngineLog:1"></span> <a href="Hasura-Logging.html#t:ToEngineLog" title="Hasura.Logging">ToEngineLog</a> <a href="Control-Concurrent-Extended.html#t:ImmortalThreadLog" title="Control.Concurrent.Extended">ImmortalThreadLog</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a></span> <a href="src/Control.Concurrent.Extended.html#line-224" class="link">Source</a> <a href="#t:ImmortalThreadLog" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImmortalThreadLog:ToEngineLog:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Concurrent-Extended.html">Control.Concurrent.Extended</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toEngineLog">toEngineLog</a> :: <a href="Control-Concurrent-Extended.html#t:ImmortalThreadLog" title="Control.Concurrent.Extended">ImmortalThreadLog</a> -&gt; (<a href="Hasura-Logging.html#t:LogLevel" title="Hasura.Logging">LogLevel</a>, <a href="Hasura-Logging.html#t:EngineLogType" title="Hasura.Logging">EngineLogType</a> <a href="Hasura-Logging.html#t:Hasura" title="Hasura.Logging">Hasura</a>, Value) <a href="src/Hasura.Logging.html#toEngineLog" class="link">Source</a> <a href="#v:toEngineLog" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ForkableMonadIO" class="def">ForkableMonadIO</a> m = (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadBaseControl <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> m, Forall (Pure m)) <a href="src/Control.Concurrent.Extended.html#ForkableMonadIO" class="link">Source</a> <a href="#t:ForkableMonadIO" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> but constrained to stacks in which forking a new thread is reasonable/safe.
 In particular <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a></code> causes problems.</p><p>This is the constraint you can use for functions that call <code>async</code>, or <code>immortal</code>.</p></div></div><div class="top"><p class="src"><a id="v:forConcurrentlyEIO" class="def">forConcurrentlyEIO</a> :: (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> e m) =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [a] -&gt; (a -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; m [b] <a href="src/Control.Concurrent.Extended.html#forConcurrentlyEIO" class="link">Source</a> <a href="#v:forConcurrentlyEIO" class="selflink">#</a></p><div class="doc"><p>A somewhat wonky function for parallelizing <code>for xs f</code> where <code>f</code> is
 <code>(MonadIO m, MonadError e m)</code>. This is equivalent to <code>for xs f</code> modulo the
 IO effects (i.e. when the IO has no real side effects we care about).</p><p>This also takes a <code>chunkSize</code> argument so you can manipulate the amount of
 work given to each thread.</p></div></div><div class="top"><p class="src"><a id="v:concurrentlyEIO" class="def">concurrentlyEIO</a> :: (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> e m) =&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> b -&gt; m (a, b) <a href="src/Control.Concurrent.Extended.html#concurrentlyEIO" class="link">Source</a> <a href="#v:concurrentlyEIO" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>