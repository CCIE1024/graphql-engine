<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.Backends.Postgres.Execute.ConnectionTemplate</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier">PrimaryTag</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier">DefaultTag</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier">ReadReplicasTag</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier">ConnectionSetMemberTemplateContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier">RequestContextHeaders</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier">ConnectionSetTemplateContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryContext"><span class="hs-identifier">QueryContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier">RequestContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier">PostgresConnectionTemplateContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier">PostgresResolvedConnectionTemplate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier">QueryOperationType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#mkConnectionSetMemberTemplateContext"><span class="hs-identifier">mkConnectionSetMemberTemplateContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeConnectionTemplateContext"><span class="hs-identifier">makeConnectionTemplateContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeRequestContext"><span class="hs-identifier">makeRequestContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#runKritiEval"><span class="hs-identifier">runKritiEval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">where</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Key</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">K</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.KeyMap</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">KM</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.TH</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.CaseInsensitive</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CI</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html"><span class="hs-identifier">Hasura.Backends.Postgres.Connection.Settings</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Session.html"><span class="hs-identifier">Hasura.Session</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier">SessionVariables</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti.Eval</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Kriti</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HTTP</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-comment">-- | This connection tag represents primary database connection</span><span>
</span><span id="line-37"></span><span id="local-6989586621690548498"><span id="local-6989586621690548499"></span></span><span class="hs-keyword">data</span><span> </span><span id="PrimaryTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-var">PrimaryTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrimaryTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-var">PrimaryTag</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548493"><span id="local-6989586621690548495"><span class="annot"><span class="annottext">PrimaryTag -&gt; PrimaryTag -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PrimaryTag -&gt; PrimaryTag -&gt; Bool
$c/= :: PrimaryTag -&gt; PrimaryTag -&gt; Bool
== :: PrimaryTag -&gt; PrimaryTag -&gt; Bool
$c== :: PrimaryTag -&gt; PrimaryTag -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548486"><span id="local-6989586621690548488"><span id="local-6989586621690548490"><span class="annot"><span class="annottext">Int -&gt; PrimaryTag -&gt; ShowS
[PrimaryTag] -&gt; ShowS
PrimaryTag -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrimaryTag] -&gt; ShowS
$cshowList :: [PrimaryTag] -&gt; ShowS
show :: PrimaryTag -&gt; String
$cshow :: PrimaryTag -&gt; String
showsPrec :: Int -&gt; PrimaryTag -&gt; ShowS
$cshowsPrec :: Int -&gt; PrimaryTag -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep PrimaryTag x -&gt; PrimaryTag
forall x. PrimaryTag -&gt; Rep PrimaryTag x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep PrimaryTag x -&gt; PrimaryTag
$cfrom :: forall x. PrimaryTag -&gt; Rep PrimaryTag x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548476"><span id="local-6989586621690548478"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span></span></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548473"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#primaryTagValue"><span class="hs-identifier hs-type">primaryTagValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-44"></span><span id="primaryTagValue"><span class="annot"><span class="annottext">primaryTagValue :: Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#primaryTagValue"><span class="hs-identifier hs-var hs-var">primaryTagValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PRIMARY&quot;</span></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548463"><span id="local-6989586621690548465"><span id="local-6989586621690548467"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>  </span><span id="local-6989586621690548461"><span class="annot"><span class="annottext">toJSON :: PrimaryTag -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="annot"><span class="annottext">PrimaryTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-var">PrimaryTag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#primaryTagValue"><span class="hs-identifier hs-var">primaryTagValue</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548457"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>  </span><span id="local-6989586621690548442"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser PrimaryTag
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span id="local-6989586621690548440"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548440"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548440"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#primaryTagValue"><span class="hs-identifier hs-var">primaryTagValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-var">PrimaryTag</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected value &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#primaryTagValue"><span class="hs-identifier hs-var">primaryTagValue</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | This connection tag represents default behaviour of database connections.</span><span>
</span><span id="line-55"></span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span class="hs-comment">--   For example, if read replica is set, then it will redirect GQL queries to</span><span>
</span><span id="line-57"></span><span class="hs-comment">--   read replicas and mutations to the primary connection</span><span>
</span><span id="line-58"></span><span id="local-6989586621690548437"><span id="local-6989586621690548438"></span></span><span class="hs-keyword">data</span><span> </span><span id="DefaultTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-var">DefaultTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DefaultTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-var">DefaultTag</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548432"><span id="local-6989586621690548434"><span class="annot"><span class="annottext">DefaultTag -&gt; DefaultTag -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DefaultTag -&gt; DefaultTag -&gt; Bool
$c/= :: DefaultTag -&gt; DefaultTag -&gt; Bool
== :: DefaultTag -&gt; DefaultTag -&gt; Bool
$c== :: DefaultTag -&gt; DefaultTag -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548426"><span id="local-6989586621690548428"><span id="local-6989586621690548430"><span class="annot"><span class="annottext">Int -&gt; DefaultTag -&gt; ShowS
[DefaultTag] -&gt; ShowS
DefaultTag -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DefaultTag] -&gt; ShowS
$cshowList :: [DefaultTag] -&gt; ShowS
show :: DefaultTag -&gt; String
$cshow :: DefaultTag -&gt; String
showsPrec :: Int -&gt; DefaultTag -&gt; ShowS
$cshowsPrec :: Int -&gt; DefaultTag -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DefaultTag x -&gt; DefaultTag
forall x. DefaultTag -&gt; Rep DefaultTag x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DefaultTag x -&gt; DefaultTag
$cfrom :: forall x. DefaultTag -&gt; Rep DefaultTag x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548418"><span id="local-6989586621690548420"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span></span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548416"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#defaultTagValue"><span class="hs-identifier hs-type">defaultTagValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-65"></span><span id="defaultTagValue"><span class="annot"><span class="annottext">defaultTagValue :: Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#defaultTagValue"><span class="hs-identifier hs-var hs-var">defaultTagValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DEFAULT&quot;</span></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548408"><span id="local-6989586621690548410"><span id="local-6989586621690548412"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621690548407"><span class="annot"><span class="annottext">toJSON :: DefaultTag -&gt; Value
</span><a href="#local-6989586621690548407"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><span class="annottext">DefaultTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-var">DefaultTag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#defaultTagValue"><span class="hs-identifier hs-var">defaultTagValue</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548404"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621690548396"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DefaultTag
</span><a href="#local-6989586621690548396"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621690548395"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548395"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548395"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#defaultTagValue"><span class="hs-identifier hs-var">defaultTagValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-var">DefaultTag</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected value &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#defaultTagValue"><span class="hs-identifier hs-var">defaultTagValue</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | This connection tag represents read replica database connection</span><span>
</span><span id="line-76"></span><span id="local-6989586621690548393"><span id="local-6989586621690548394"></span></span><span class="hs-keyword">data</span><span> </span><span id="ReadReplicasTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-var">ReadReplicasTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReadReplicasTag"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-var">ReadReplicasTag</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548388"><span id="local-6989586621690548390"><span class="annot"><span class="annottext">ReadReplicasTag -&gt; ReadReplicasTag -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ReadReplicasTag -&gt; ReadReplicasTag -&gt; Bool
$c/= :: ReadReplicasTag -&gt; ReadReplicasTag -&gt; Bool
== :: ReadReplicasTag -&gt; ReadReplicasTag -&gt; Bool
$c== :: ReadReplicasTag -&gt; ReadReplicasTag -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548382"><span id="local-6989586621690548384"><span id="local-6989586621690548386"><span class="annot"><span class="annottext">Int -&gt; ReadReplicasTag -&gt; ShowS
[ReadReplicasTag] -&gt; ShowS
ReadReplicasTag -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ReadReplicasTag] -&gt; ShowS
$cshowList :: [ReadReplicasTag] -&gt; ShowS
show :: ReadReplicasTag -&gt; String
$cshow :: ReadReplicasTag -&gt; String
showsPrec :: Int -&gt; ReadReplicasTag -&gt; ShowS
$cshowsPrec :: Int -&gt; ReadReplicasTag -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep ReadReplicasTag x -&gt; ReadReplicasTag
forall x. ReadReplicasTag -&gt; Rep ReadReplicasTag x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ReadReplicasTag x -&gt; ReadReplicasTag
$cfrom :: forall x. ReadReplicasTag -&gt; Rep ReadReplicasTag x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548374"><span id="local-6989586621690548376"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span></span></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548372"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#readReplicasTagValue"><span class="hs-identifier hs-type">readReplicasTagValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-83"></span><span id="readReplicasTagValue"><span class="annot"><span class="annottext">readReplicasTagValue :: Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#readReplicasTagValue"><span class="hs-identifier hs-var hs-var">readReplicasTagValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;READ_REPLICAS&quot;</span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548364"><span id="local-6989586621690548366"><span id="local-6989586621690548368"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621690548363"><span class="annot"><span class="annottext">toJSON :: ReadReplicasTag -&gt; Value
</span><a href="#local-6989586621690548363"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><span class="annottext">ReadReplicasTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-var">ReadReplicasTag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#readReplicasTagValue"><span class="hs-identifier hs-var">readReplicasTagValue</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548360"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621690548352"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ReadReplicasTag
</span><a href="#local-6989586621690548352"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621690548351"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548351"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548351"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#readReplicasTagValue"><span class="hs-identifier hs-var">readReplicasTagValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ReadReplicasTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-var">ReadReplicasTag</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected value &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#readReplicasTagValue"><span class="hs-identifier hs-var">readReplicasTagValue</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | The connection_set template context type. Always encodes to &quot;connection_set&quot;</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- string value in template context.</span><span>
</span><span id="line-95"></span><span id="local-6989586621690548349"><span id="local-6989586621690548350"></span></span><span class="hs-keyword">data</span><span> </span><span id="ConnectionSetTemplateContextType"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-var">ConnectionSetTemplateContextType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConnectionSetTemplateContextType"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-var">ConnectionSetTemplateContextType</span></a></span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548344"><span id="local-6989586621690548346"><span class="annot"><span class="annottext">ConnectionSetTemplateContextType
-&gt; ConnectionSetTemplateContextType -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ConnectionSetTemplateContextType
-&gt; ConnectionSetTemplateContextType -&gt; Bool
$c/= :: ConnectionSetTemplateContextType
-&gt; ConnectionSetTemplateContextType -&gt; Bool
== :: ConnectionSetTemplateContextType
-&gt; ConnectionSetTemplateContextType -&gt; Bool
$c== :: ConnectionSetTemplateContextType
-&gt; ConnectionSetTemplateContextType -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548338"><span id="local-6989586621690548340"><span id="local-6989586621690548342"><span class="annot"><span class="annottext">Int -&gt; ConnectionSetTemplateContextType -&gt; ShowS
[ConnectionSetTemplateContextType] -&gt; ShowS
ConnectionSetTemplateContextType -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ConnectionSetTemplateContextType] -&gt; ShowS
$cshowList :: [ConnectionSetTemplateContextType] -&gt; ShowS
show :: ConnectionSetTemplateContextType -&gt; String
$cshow :: ConnectionSetTemplateContextType -&gt; String
showsPrec :: Int -&gt; ConnectionSetTemplateContextType -&gt; ShowS
$cshowsPrec :: Int -&gt; ConnectionSetTemplateContextType -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x.
Rep ConnectionSetTemplateContextType x
-&gt; ConnectionSetTemplateContextType
forall x.
ConnectionSetTemplateContextType
-&gt; Rep ConnectionSetTemplateContextType x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep ConnectionSetTemplateContextType x
-&gt; ConnectionSetTemplateContextType
$cfrom :: forall x.
ConnectionSetTemplateContextType
-&gt; Rep ConnectionSetTemplateContextType x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548330"><span id="local-6989586621690548332"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-type">ConnectionSetTemplateContextType</span></a></span></span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548328"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-type">ConnectionSetTemplateContextType</span></a></span></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548321"><span id="local-6989586621690548323"><span id="local-6989586621690548325"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-type">ConnectionSetTemplateContextType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621690548319"><span class="annot"><span class="annottext">toJSON :: ConnectionSetTemplateContextType -&gt; Value
</span><a href="#local-6989586621690548319"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConnectionSetTemplateContextType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-var">ConnectionSetTemplateContextType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;connection_set&quot;</span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548316"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-type">ConnectionSetTemplateContextType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621690548306"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ConnectionSetTemplateContextType
</span><a href="#local-6989586621690548306"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ConnectionSetTemplateContextType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;connection_set&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSetTemplateContextType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-var">ConnectionSetTemplateContextType</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span id="local-6989586621690548304"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690548304"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected type for connection set member &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690548304"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | Data type for single member in connection_set for connection template context</span><span>
</span><span id="line-111"></span><span id="local-6989586621690548302"><span id="local-6989586621690548303"></span></span><span class="hs-keyword">data</span><span> </span><span id="ConnectionSetMemberTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-var">ConnectionSetMemberTemplateContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConnectionSetMemberTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-var">ConnectionSetMemberTemplateContext</span></a></span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_cseType"><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
-&gt; ConnectionSetTemplateContextType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_cseType"><span class="hs-identifier hs-var hs-var">_cseType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-type">ConnectionSetTemplateContextType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span id="_cseName"><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
-&gt; PostgresConnectionSetMemberName
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_cseName"><span class="hs-identifier hs-var hs-var">_cseName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-type">PostgresConnectionSetMemberName</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548293"><span id="local-6989586621690548297"><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
-&gt; ConnectionSetMemberTemplateContext -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ConnectionSetMemberTemplateContext
-&gt; ConnectionSetMemberTemplateContext -&gt; Bool
$c/= :: ConnectionSetMemberTemplateContext
-&gt; ConnectionSetMemberTemplateContext -&gt; Bool
== :: ConnectionSetMemberTemplateContext
-&gt; ConnectionSetMemberTemplateContext -&gt; Bool
$c== :: ConnectionSetMemberTemplateContext
-&gt; ConnectionSetMemberTemplateContext -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548282"><span id="local-6989586621690548284"><span id="local-6989586621690548291"><span class="annot"><span class="annottext">Int -&gt; ConnectionSetMemberTemplateContext -&gt; ShowS
[ConnectionSetMemberTemplateContext] -&gt; ShowS
ConnectionSetMemberTemplateContext -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ConnectionSetMemberTemplateContext] -&gt; ShowS
$cshowList :: [ConnectionSetMemberTemplateContext] -&gt; ShowS
show :: ConnectionSetMemberTemplateContext -&gt; String
$cshow :: ConnectionSetMemberTemplateContext -&gt; String
showsPrec :: Int -&gt; ConnectionSetMemberTemplateContext -&gt; ShowS
$cshowsPrec :: Int -&gt; ConnectionSetMemberTemplateContext -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x.
Rep ConnectionSetMemberTemplateContext x
-&gt; ConnectionSetMemberTemplateContext
forall x.
ConnectionSetMemberTemplateContext
-&gt; Rep ConnectionSetMemberTemplateContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep ConnectionSetMemberTemplateContext x
-&gt; ConnectionSetMemberTemplateContext
$cfrom :: forall x.
ConnectionSetMemberTemplateContext
-&gt; Rep ConnectionSetMemberTemplateContext x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-special">$</span><span id="local-6989586621690548241"><span id="local-6989586621690548243"><span id="local-6989586621690548252"><span id="local-6989586621690548265"><span id="local-6989586621690548267"><span id="local-6989586621690548278"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ConnectionSetMemberTemplateContext</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548213"><span id="local-6989586621690548215"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">ConnectionSetMemberTemplateContext</span></a></span></span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548211"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">ConnectionSetMemberTemplateContext</span></a></span></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#mkConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">mkConnectionSetMemberTemplateContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-type">PostgresConnectionSetMemberName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">ConnectionSetMemberTemplateContext</span></a></span><span>
</span><span id="line-124"></span><span id="mkConnectionSetMemberTemplateContext"><span class="annot"><span class="annottext">mkConnectionSetMemberTemplateContext :: PostgresConnectionSetMemberName
-&gt; ConnectionSetMemberTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#mkConnectionSetMemberTemplateContext"><span class="hs-identifier hs-var hs-var">mkConnectionSetMemberTemplateContext</span></a></span></span><span> </span><span id="local-6989586621690548210"><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690548210"><span class="hs-identifier hs-var">memberName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">ConnectionSetMemberTemplateContext</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_cseType :: ConnectionSetTemplateContextType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_cseType"><span class="hs-identifier hs-var">_cseType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConnectionSetTemplateContextType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContextType"><span class="hs-identifier hs-var">ConnectionSetTemplateContextType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><span class="annottext">_cseName :: PostgresConnectionSetMemberName
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_cseName"><span class="hs-identifier hs-var">_cseName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690548210"><span class="hs-identifier hs-var">memberName</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Outcome of the connection template resolution</span><span>
</span><span id="line-131"></span><span id="local-6989586621690548208"><span id="local-6989586621690548209"></span></span><span class="hs-keyword">data</span><span> </span><span id="PostgresResolvedConnectionTemplate"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier hs-var">PostgresResolvedConnectionTemplate</span></a></span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PCTODefault"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTODefault"><span class="hs-identifier hs-var">PCTODefault</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PCTOPrimary"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOPrimary"><span class="hs-identifier hs-var">PCTOPrimary</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PCTOReadReplicas"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOReadReplicas"><span class="hs-identifier hs-var">PCTOReadReplicas</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PCTOConnectionSet"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOConnectionSet"><span class="hs-identifier hs-var">PCTOConnectionSet</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-type">PostgresConnectionSetMemberName</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548196"><span id="local-6989586621690548202"><span class="annot"><span class="annottext">PostgresResolvedConnectionTemplate
-&gt; PostgresResolvedConnectionTemplate -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PostgresResolvedConnectionTemplate
-&gt; PostgresResolvedConnectionTemplate -&gt; Bool
$c/= :: PostgresResolvedConnectionTemplate
-&gt; PostgresResolvedConnectionTemplate -&gt; Bool
== :: PostgresResolvedConnectionTemplate
-&gt; PostgresResolvedConnectionTemplate -&gt; Bool
$c== :: PostgresResolvedConnectionTemplate
-&gt; PostgresResolvedConnectionTemplate -&gt; Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548182"><span id="local-6989586621690548184"><span id="local-6989586621690548194"><span class="annot"><span class="annottext">Int -&gt; PostgresResolvedConnectionTemplate -&gt; ShowS
[PostgresResolvedConnectionTemplate] -&gt; ShowS
PostgresResolvedConnectionTemplate -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PostgresResolvedConnectionTemplate] -&gt; ShowS
$cshowList :: [PostgresResolvedConnectionTemplate] -&gt; ShowS
show :: PostgresResolvedConnectionTemplate -&gt; String
$cshow :: PostgresResolvedConnectionTemplate -&gt; String
showsPrec :: Int -&gt; PostgresResolvedConnectionTemplate -&gt; ShowS
$cshowsPrec :: Int -&gt; PostgresResolvedConnectionTemplate -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x.
Rep PostgresResolvedConnectionTemplate x
-&gt; PostgresResolvedConnectionTemplate
forall x.
PostgresResolvedConnectionTemplate
-&gt; Rep PostgresResolvedConnectionTemplate x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep PostgresResolvedConnectionTemplate x
-&gt; PostgresResolvedConnectionTemplate
$cfrom :: forall x.
PostgresResolvedConnectionTemplate
-&gt; Rep PostgresResolvedConnectionTemplate x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548174"><span id="local-6989586621690548176"><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier hs-type">PostgresResolvedConnectionTemplate</span></a></span></span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548172"><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier hs-type">PostgresResolvedConnectionTemplate</span></a></span></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548169"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier hs-type">PostgresResolvedConnectionTemplate</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>  </span><span id="local-6989586621690548156"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser PostgresResolvedConnectionTemplate
</span><a href="#local-6989586621690548156"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621690548155"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548155"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimaryTag -&gt; PostgresResolvedConnectionTemplate
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOPrimary"><span class="hs-identifier hs-var">PCTOPrimary</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548155"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DefaultTag -&gt; PostgresResolvedConnectionTemplate
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTODefault"><span class="hs-identifier hs-var">PCTODefault</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548155"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReadReplicasTag -&gt; PostgresResolvedConnectionTemplate
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOReadReplicas"><span class="hs-identifier hs-var">PCTOReadReplicas</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548155"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
-&gt; PostgresResolvedConnectionTemplate
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOConnectionSet"><span class="hs-identifier hs-var">PCTOConnectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
-&gt; PostgresConnectionSetMemberName
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_cseName"><span class="hs-identifier hs-var">_cseName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548155"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548146"><span id="local-6989586621690548148"><span id="local-6989586621690548150"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresResolvedConnectionTemplate"><span class="hs-identifier hs-type">PostgresResolvedConnectionTemplate</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621690548128"><span class="annot"><span class="annottext">toJSON :: PostgresResolvedConnectionTemplate -&gt; Value
</span><a href="#local-6989586621690548128"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621690548127"><span class="annot"><span class="annottext">PostgresResolvedConnectionTemplate
</span><a href="#local-6989586621690548127"><span class="hs-identifier hs-var">resolvedConnTemplate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548126"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690548126"><span class="hs-identifier hs-var">routingTo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548125"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548125"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PostgresResolvedConnectionTemplate
</span><a href="#local-6989586621690548127"><span class="hs-identifier hs-var">resolvedConnTemplate</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-152"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOPrimary"><span class="hs-identifier hs-type">PCTOPrimary</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryTag
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;primary&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTODefault"><span class="hs-identifier hs-type">PCTODefault</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultTag
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;default&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOReadReplicas"><span class="hs-identifier hs-type">PCTOReadReplicas</span></a></span><span> </span><span class="annot"><span class="annottext">ReadReplicasTag
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;read_replicas&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PCTOConnectionSet"><span class="hs-identifier hs-type">PCTOConnectionSet</span></a></span><span> </span><span id="local-6989586621690548123"><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690548123"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;connection_set&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690548123"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;routing_to&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690548126"><span class="hs-identifier hs-var">routingTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690548125"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- | Headers information for the connection template context</span><span>
</span><span id="line-159"></span><span class="hs-keyword">data</span><span> </span><span id="RequestContextHeaders"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier hs-var">RequestContextHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestContextHeaders"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier hs-var">RequestContextHeaders</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548109"><span id="local-6989586621690548111"><span id="local-6989586621690548118"><span class="annot"><span class="annottext">Int -&gt; RequestContextHeaders -&gt; ShowS
[RequestContextHeaders] -&gt; ShowS
RequestContextHeaders -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RequestContextHeaders] -&gt; ShowS
$cshowList :: [RequestContextHeaders] -&gt; ShowS
show :: RequestContextHeaders -&gt; String
$cshow :: RequestContextHeaders -&gt; String
showsPrec :: Int -&gt; RequestContextHeaders -&gt; ShowS
$cshowsPrec :: Int -&gt; RequestContextHeaders -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-special">$</span><span id="local-6989586621690548083"><span id="local-6989586621690548085"><span id="local-6989586621690548090"><span id="local-6989586621690548096"><span id="local-6989586621690548098"><span id="local-6989586621690548107"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">RequestContextHeaders</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- | Data type for connection_set for connection template context</span><span>
</span><span id="line-165"></span><span class="hs-keyword">newtype</span><span> </span><span id="ConnectionSetTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-var">ConnectionSetTemplateContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConnectionSetTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-var">ConnectionSetTemplateContext</span></a></span></span><span> </span><span class="hs-special">{</span><span id="_getConnectionSet"><span class="annot"><span class="annottext">ConnectionSetTemplateContext
-&gt; HashMap
     PostgresConnectionSetMemberName ConnectionSetMemberTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_getConnectionSet"><span class="hs-identifier hs-var hs-var">_getConnectionSet</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-type">PostgresConnectionSetMemberName</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetMemberTemplateContext"><span class="hs-identifier hs-type">ConnectionSetMemberTemplateContext</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690548062"><span id="local-6989586621690548064"><span id="local-6989586621690548070"><span class="annot"><span class="annottext">Int -&gt; ConnectionSetTemplateContext -&gt; ShowS
[ConnectionSetTemplateContext] -&gt; ShowS
ConnectionSetTemplateContext -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ConnectionSetTemplateContext] -&gt; ShowS
$cshowList :: [ConnectionSetTemplateContext] -&gt; ShowS
show :: ConnectionSetTemplateContext -&gt; String
$cshow :: ConnectionSetTemplateContext -&gt; String
showsPrec :: Int -&gt; ConnectionSetTemplateContext -&gt; ShowS
$cshowsPrec :: Int -&gt; ConnectionSetTemplateContext -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548045"><span id="local-6989586621690548053"><span id="local-6989586621690548060"><span class="annot"><span class="annottext">NonEmpty ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext
ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
forall b.
Integral b =&gt;
b -&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: forall b.
Integral b =&gt;
b -&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
$cstimes :: forall b.
Integral b =&gt;
b -&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
sconcat :: NonEmpty ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext
$csconcat :: NonEmpty ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext
&lt;&gt; :: ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
$c&lt;&gt; :: ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690548020"><span id="local-6989586621690548026"><span id="local-6989586621690548033"><span class="annot"><span class="annottext">Semigroup ConnectionSetTemplateContext
ConnectionSetTemplateContext
[ConnectionSetTemplateContext] -&gt; ConnectionSetTemplateContext
ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [ConnectionSetTemplateContext] -&gt; ConnectionSetTemplateContext
$cmconcat :: [ConnectionSetTemplateContext] -&gt; ConnectionSetTemplateContext
mappend :: ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
$cmappend :: ConnectionSetTemplateContext
-&gt; ConnectionSetTemplateContext -&gt; ConnectionSetTemplateContext
mempty :: ConnectionSetTemplateContext
$cmempty :: ConnectionSetTemplateContext
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690548011"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-type">ConnectionSetTemplateContext</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621690547993"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ConnectionSetTemplateContext
</span><a href="#local-6989586621690547993"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ConnectionSetTemplateContext&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621690547991"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547991"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621690547990"><span class="annot"><span class="annottext">[(PostgresConnectionSetMemberName,
  ConnectionSetMemberTemplateContext)]
</span><a href="#local-6989586621690547990"><span class="hs-identifier hs-var">connections</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-171"></span><span>      </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span>
</span><span id="line-172"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621690547988"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621690547988"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690547987"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690547987"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>            </span><span id="local-6989586621690547986"><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
</span><a href="#local-6989586621690547986"><span class="hs-identifier hs-var">connSetMember</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621690547987"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-174"></span><span>            </span><span id="local-6989586621690547985"><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690547985"><span class="hs-identifier hs-var">connSetMemberName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmptyText -&gt; PostgresConnectionSetMemberName
</span><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-var">PostgresConnectionSetMemberName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621690547988"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
</span><a href="#local-6989586621690547985"><span class="hs-identifier hs-var">connSetMemberName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConnectionSetMemberTemplateContext
</span><a href="#local-6989586621690547986"><span class="hs-identifier hs-var">connSetMember</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall v. KeyMap v -&gt; [(Key, v)]
</span><span class="hs-identifier hs-var">KM.toList</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547991"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  PostgresConnectionSetMemberName ConnectionSetMemberTemplateContext
-&gt; ConnectionSetTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-var">ConnectionSetTemplateContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(PostgresConnectionSetMemberName,
  ConnectionSetMemberTemplateContext)]
</span><a href="#local-6989586621690547990"><span class="hs-identifier hs-var">connections</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690547975"><span id="local-6989586621690547977"><span id="local-6989586621690547979"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-type">ConnectionSetTemplateContext</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621690547967"><span class="annot"><span class="annottext">toJSON :: ConnectionSetTemplateContext -&gt; Value
</span><a href="#local-6989586621690547967"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-type">ConnectionSetTemplateContext</span></a></span><span> </span><span id="local-6989586621690547966"><span class="annot"><span class="annottext">HashMap
  PostgresConnectionSetMemberName ConnectionSetMemberTemplateContext
</span><a href="#local-6989586621690547966"><span class="hs-identifier hs-var">connections</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">J.Object</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall v. HashMap Key v -&gt; KeyMap v
</span><span class="hs-identifier hs-var">KM.fromHashMap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall v1 v2 k. (v1 -&gt; v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k2 k1 v.
(Eq k2, Hashable k2) =&gt;
(k1 -&gt; k2) -&gt; HashMap k1 v -&gt; HashMap k2 v
</span><span class="hs-identifier hs-var">Map.mapKeys</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Key
</span><span class="hs-identifier hs-var">K.fromText</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap
  PostgresConnectionSetMemberName ConnectionSetMemberTemplateContext
</span><a href="#local-6989586621690547966"><span class="hs-identifier hs-var">connections</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-keyword">newtype</span><span> </span><span id="QueryOperationType"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-var">QueryOperationType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="QueryOperationType"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-var">QueryOperationType</span></a></span></span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-type">G.OperationType</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690547951"><span id="local-6989586621690547953"><span id="local-6989586621690547958"><span class="annot"><span class="annottext">Int -&gt; QueryOperationType -&gt; ShowS
[QueryOperationType] -&gt; ShowS
QueryOperationType -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [QueryOperationType] -&gt; ShowS
$cshowList :: [QueryOperationType] -&gt; ShowS
show :: QueryOperationType -&gt; String
$cshow :: QueryOperationType -&gt; String
showsPrec :: Int -&gt; QueryOperationType -&gt; ShowS
$cshowsPrec :: Int -&gt; QueryOperationType -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690547948"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-type">QueryOperationType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621690547937"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser QueryOperationType
</span><a href="#local-6989586621690547937"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OperationType -&gt; QueryOperationType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-var">QueryOperationType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeQuery</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mutation&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OperationType -&gt; QueryOperationType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-var">QueryOperationType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeMutation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;subscription&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OperationType -&gt; QueryOperationType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-var">QueryOperationType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeSubscription</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;operation type can only be one of the following: query, mutation or subscription&quot;</span></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690547927"><span id="local-6989586621690547929"><span id="local-6989586621690547931"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-type">QueryOperationType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621690547923"><span class="annot"><span class="annottext">toJSON :: QueryOperationType -&gt; Value
</span><a href="#local-6989586621690547923"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-type">QueryOperationType</span></a></span><span> </span><span id="local-6989586621690547922"><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621690547922"><span class="hs-identifier hs-var">operationType</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621690547922"><span class="hs-identifier hs-var">operationType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query&quot;</span></span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeSubscription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;subscription&quot;</span></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">OperationType
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-var">G.OperationTypeMutation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mutation&quot;</span></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Query information (operation name and operation type) for connection</span><span>
</span><span id="line-201"></span><span class="hs-comment">--   template context</span><span>
</span><span id="line-202"></span><span class="hs-keyword">data</span><span> </span><span id="QueryContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryContext"><span class="hs-identifier hs-var">QueryContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="QueryContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryContext"><span class="hs-identifier hs-var">QueryContext</span></a></span></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_qcOperationName"><span class="annot"><span class="annottext">QueryContext -&gt; Maybe Name
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_qcOperationName"><span class="hs-identifier hs-var hs-var">_qcOperationName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src"><span class="hs-identifier hs-type">G.Name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>    </span><span id="_qcOperationType"><span class="annot"><span class="annottext">QueryContext -&gt; QueryOperationType
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_qcOperationType"><span class="hs-identifier hs-var hs-var">_qcOperationType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryOperationType"><span class="hs-identifier hs-type">QueryOperationType</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690547908"><span id="local-6989586621690547910"><span id="local-6989586621690547917"><span class="annot"><span class="annottext">Int -&gt; QueryContext -&gt; ShowS
[QueryContext] -&gt; ShowS
QueryContext -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [QueryContext] -&gt; ShowS
$cshowList :: [QueryContext] -&gt; ShowS
show :: QueryContext -&gt; String
$cshow :: QueryContext -&gt; String
showsPrec :: Int -&gt; QueryContext -&gt; ShowS
$cshowsPrec :: Int -&gt; QueryContext -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-special">$</span><span id="local-6989586621690547869"><span id="local-6989586621690547871"><span id="local-6989586621690547880"><span id="local-6989586621690547892"><span id="local-6989586621690547894"><span id="local-6989586621690547905"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">{</span><span class="hs-identifier">J.omitNothingFields</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">True</span><span class="hs-special">}</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">QueryContext</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | Request information for connection template context</span><span>
</span><span id="line-211"></span><span id="local-6989586621690547852"><span id="local-6989586621690547853"></span></span><span class="hs-keyword">data</span><span> </span><span id="RequestContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-var">RequestContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-var">RequestContext</span></a></span></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_rcHeaders"><span class="annot"><span class="annottext">RequestContext -&gt; RequestContextHeaders
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_rcHeaders"><span class="hs-identifier hs-var hs-var">_rcHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier hs-type">RequestContextHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>    </span><span id="_rcSession"><span class="annot"><span class="annottext">RequestContext -&gt; SessionVariables
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_rcSession"><span class="hs-identifier hs-var hs-var">_rcSession</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier hs-type">SessionVariables</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-214"></span><span>    </span><span id="_rcQuery"><span class="annot"><span class="annottext">RequestContext -&gt; Maybe QueryContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_rcQuery"><span class="hs-identifier hs-var hs-var">_rcQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryContext"><span class="hs-identifier hs-type">QueryContext</span></a></span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690547836"><span id="local-6989586621690547838"><span id="local-6989586621690547846"><span class="annot"><span class="annottext">Int -&gt; RequestContext -&gt; ShowS
[RequestContext] -&gt; ShowS
RequestContext -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RequestContext] -&gt; ShowS
$cshowList :: [RequestContext] -&gt; ShowS
show :: RequestContext -&gt; String
$cshow :: RequestContext -&gt; String
showsPrec :: Int -&gt; RequestContext -&gt; ShowS
$cshowsPrec :: Int -&gt; RequestContext -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep RequestContext x -&gt; RequestContext
forall x. RequestContext -&gt; Rep RequestContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RequestContext x -&gt; RequestContext
$cfrom :: forall x. RequestContext -&gt; Rep RequestContext x
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690547830"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-type">RequestContext</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>  </span><span id="local-6989586621690547813"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser RequestContext
</span><a href="#local-6989586621690547813"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RequestContext&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621690547812"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547812"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-220"></span><span>    </span><span id="local-6989586621690547811"><span class="annot"><span class="annottext">RequestContextHeaders
</span><a href="#local-6989586621690547811"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547812"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Parser (Maybe a) -&gt; a -&gt; Parser a
</span><span class="hs-operator hs-var">J..!=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Text Text -&gt; RequestContextHeaders
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier hs-var">RequestContextHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621690547808"><span class="annot"><span class="annottext">SessionVariables
</span><a href="#local-6989586621690547808"><span class="hs-identifier hs-var">sessionVars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547812"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;session&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Parser (Maybe a) -&gt; a -&gt; Parser a
</span><span class="hs-operator hs-var">J..!=</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621690547807"><span class="annot"><span class="annottext">Maybe QueryContext
</span><a href="#local-6989586621690547807"><span class="hs-identifier hs-var">queryContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621690547812"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;query&quot;</span></span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestContextHeaders
-&gt; SessionVariables -&gt; Maybe QueryContext -&gt; RequestContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-var">RequestContext</span></a></span><span> </span><span class="annot"><span class="annottext">RequestContextHeaders
</span><a href="#local-6989586621690547811"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">SessionVariables
</span><a href="#local-6989586621690547808"><span class="hs-identifier hs-var">sessionVars</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QueryContext
</span><a href="#local-6989586621690547807"><span class="hs-identifier hs-var">queryContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621690547800"><span id="local-6989586621690547802"><span id="local-6989586621690547804"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-type">RequestContext</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621690547685"><span class="annot"><span class="annottext">toJSON :: RequestContext -&gt; Value
</span><a href="#local-6989586621690547685"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.genericToJSON</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">omitNothingFields :: Bool
</span><a href="#local-6989586621690547682"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | The complete connection template context used for resolving connection</span><span>
</span><span id="line-229"></span><span class="hs-comment">--   template</span><span>
</span><span id="line-230"></span><span class="hs-keyword">data</span><span> </span><span id="PostgresConnectionTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier hs-var">PostgresConnectionTemplateContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PostgresConnectionTemplateContext"><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier hs-var">PostgresConnectionTemplateContext</span></a></span></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_pctcRequest"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext -&gt; RequestContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_pctcRequest"><span class="hs-identifier hs-var hs-var">_pctcRequest</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-type">RequestContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-232"></span><span>    </span><span id="_pctcPrimary"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext -&gt; PrimaryTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_pctcPrimary"><span class="hs-identifier hs-var hs-var">_pctcPrimary</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-type">PrimaryTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-233"></span><span>    </span><span id="_pctcReadReplicas"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext -&gt; ReadReplicasTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_pctcReadReplicas"><span class="hs-identifier hs-var hs-var">_pctcReadReplicas</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-type">ReadReplicasTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-234"></span><span>    </span><span id="_pctcDefault"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext -&gt; DefaultTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_pctcDefault"><span class="hs-identifier hs-var hs-var">_pctcDefault</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-type">DefaultTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-235"></span><span>    </span><span id="_pctcConnectionSet"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext -&gt; ConnectionSetTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#_pctcConnectionSet"><span class="hs-identifier hs-var hs-var">_pctcConnectionSet</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-type">ConnectionSetTemplateContext</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621690547664"><span id="local-6989586621690547666"><span id="local-6989586621690547674"><span class="annot"><span class="annottext">Int -&gt; PostgresConnectionTemplateContext -&gt; ShowS
[PostgresConnectionTemplateContext] -&gt; ShowS
PostgresConnectionTemplateContext -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PostgresConnectionTemplateContext] -&gt; ShowS
$cshowList :: [PostgresConnectionTemplateContext] -&gt; ShowS
show :: PostgresConnectionTemplateContext -&gt; String
$cshow :: PostgresConnectionTemplateContext -&gt; String
showsPrec :: Int -&gt; PostgresConnectionTemplateContext -&gt; ShowS
$cshowsPrec :: Int -&gt; PostgresConnectionTemplateContext -&gt; ShowS
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-special">$</span><span id="local-6989586621690547610"><span id="local-6989586621690547612"><span id="local-6989586621690547625"><span id="local-6989586621690547643"><span id="local-6989586621690547645"><span id="local-6989586621690547662"><span class="hs-special">(</span><span class="hs-identifier">J.deriveJSON</span><span> </span><span class="hs-identifier">hasuraJSON</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PostgresConnectionTemplateContext</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">-- | Construct template context</span><span>
</span><span id="line-242"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeConnectionTemplateContext"><span class="hs-identifier hs-type">makeConnectionTemplateContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-type">RequestContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#PostgresConnectionSetMemberName"><span class="hs-identifier hs-type">PostgresConnectionSetMemberName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier hs-type">PostgresConnectionTemplateContext</span></a></span><span>
</span><span id="line-243"></span><span id="makeConnectionTemplateContext"><span class="annot"><span class="annottext">makeConnectionTemplateContext :: RequestContext
-&gt; [PostgresConnectionSetMemberName]
-&gt; PostgresConnectionTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeConnectionTemplateContext"><span class="hs-identifier hs-var hs-var">makeConnectionTemplateContext</span></a></span></span><span> </span><span id="local-6989586621690547589"><span class="annot"><span class="annottext">RequestContext
</span><a href="#local-6989586621690547589"><span class="hs-identifier hs-var">reqCtx</span></a></span></span><span> </span><span id="local-6989586621690547588"><span class="annot"><span class="annottext">[PostgresConnectionSetMemberName]
</span><a href="#local-6989586621690547588"><span class="hs-identifier hs-var">connectionSetMembers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><span class="annottext">RequestContext
-&gt; PrimaryTag
-&gt; ReadReplicasTag
-&gt; DefaultTag
-&gt; ConnectionSetTemplateContext
-&gt; PostgresConnectionTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier hs-var">PostgresConnectionTemplateContext</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><span class="annottext">RequestContext
</span><a href="#local-6989586621690547589"><span class="hs-identifier hs-var">reqCtx</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">PrimaryTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PrimaryTag"><span class="hs-identifier hs-var">PrimaryTag</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">ReadReplicasTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ReadReplicasTag"><span class="hs-identifier hs-var">ReadReplicasTag</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">DefaultTag
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#DefaultTag"><span class="hs-identifier hs-var">DefaultTag</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">ConnectionSetTemplateContext
</span><a href="#local-6989586621690547587"><span class="hs-identifier hs-var">connectionSet</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621690547587"><span class="annot"><span class="annottext">connectionSet :: ConnectionSetTemplateContext
</span><a href="#local-6989586621690547587"><span class="hs-identifier hs-var hs-var">connectionSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>      </span><span class="annot"><span class="annottext">HashMap
  PostgresConnectionSetMemberName ConnectionSetMemberTemplateContext
-&gt; ConnectionSetTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#ConnectionSetTemplateContext"><span class="hs-identifier hs-var">ConnectionSetTemplateContext</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">PostgresConnectionSetMemberName
-&gt; ConnectionSetMemberTemplateContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#mkConnectionSetMemberTemplateContext"><span class="hs-identifier hs-var">mkConnectionSetMemberTemplateContext</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PostgresConnectionSetMemberName]
</span><a href="#local-6989586621690547588"><span class="hs-identifier hs-var">connectionSetMembers</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | We should move this to Data.Aeson.Kriti.Functions</span><span>
</span><span id="line-255"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#runKritiEval"><span class="hs-identifier hs-type">runKritiEval</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#PostgresConnectionTemplateContext"><span class="hs-identifier hs-type">PostgresConnectionTemplateContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#KritiTemplate"><span class="hs-identifier hs-type">KritiTemplate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kriti.EvalError</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-256"></span><span id="runKritiEval"><span class="annot"><span class="annottext">runKritiEval :: PostgresConnectionTemplateContext
-&gt; KritiTemplate -&gt; Either EvalError Value
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#runKritiEval"><span class="hs-identifier hs-var hs-var">runKritiEval</span></a></span></span><span> </span><span id="local-6989586621690547584"><span class="annot"><span class="annottext">PostgresConnectionTemplateContext
</span><a href="#local-6989586621690547584"><span class="hs-identifier hs-var">ktcContext</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.Settings.html#KritiTemplate"><span class="hs-identifier hs-type">KritiTemplate</span></a></span><span> </span><span id="local-6989586621690547582"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690547582"><span class="hs-identifier hs-var">rawTemplate</span></a></span></span><span> </span><span id="local-6989586621690547581"><span class="annot"><span class="annottext">ValueExt
</span><a href="#local-6989586621690547581"><span class="hs-identifier hs-var">templateAST</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ValueExt -&gt; [(Text, Value)] -&gt; Either EvalError Value
</span><span class="hs-identifier hs-var">Kriti.runEval</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690547579"><span class="hs-identifier hs-var">templateBS</span></a></span><span> </span><span class="annot"><span class="annottext">ValueExt
</span><a href="#local-6989586621690547581"><span class="hs-identifier hs-var">templateAST</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, Value)]
</span><a href="#local-6989586621690547578"><span class="hs-identifier hs-var">templateCtx</span></a></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621690547579"><span class="annot"><span class="annottext">templateBS :: ByteString
</span><a href="#local-6989586621690547579"><span class="hs-identifier hs-var hs-var">templateBS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">txtToBs</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621690547582"><span class="hs-identifier hs-var">rawTemplate</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621690547578"><span class="annot"><span class="annottext">templateCtx :: [(Text, Value)]
</span><a href="#local-6989586621690547578"><span class="hs-identifier hs-var hs-var">templateCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">PostgresConnectionTemplateContext
</span><a href="#local-6989586621690547584"><span class="hs-identifier hs-var">ktcContext</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeRequestContext"><span class="hs-identifier hs-type">makeRequestContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#QueryContext"><span class="hs-identifier hs-type">QueryContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier hs-type">SessionVariables</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-type">RequestContext</span></a></span><span>
</span><span id="line-262"></span><span id="makeRequestContext"><span class="annot"><span class="annottext">makeRequestContext :: Maybe QueryContext
-&gt; [Header] -&gt; SessionVariables -&gt; RequestContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#makeRequestContext"><span class="hs-identifier hs-var hs-var">makeRequestContext</span></a></span></span><span> </span><span id="local-6989586621690547576"><span class="annot"><span class="annottext">Maybe QueryContext
</span><a href="#local-6989586621690547576"><span class="hs-identifier hs-var">queryContext</span></a></span></span><span> </span><span id="local-6989586621690547575"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690547575"><span class="hs-identifier hs-var">reqHeaders</span></a></span></span><span> </span><span id="local-6989586621690547574"><span class="annot"><span class="annottext">SessionVariables
</span><a href="#local-6989586621690547574"><span class="hs-identifier hs-var">sessionVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621690547573"><span class="annot"><span class="annottext">reqHeaderHashMap :: HashMap Text Text
</span><a href="#local-6989586621690547573"><span class="hs-identifier hs-var hs-var">reqHeaderHashMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///root/.ghcup/ghc/9.2.5/share/doc/ghc-9.2.5/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621690547572"><span class="annot"><span class="annottext">CI ByteString
</span><a href="#local-6989586621690547572"><span class="hs-identifier hs-var">hdrName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621690547571"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690547571"><span class="hs-identifier hs-var">hdrVal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">CI ByteString
</span><a href="#local-6989586621690547572"><span class="hs-identifier hs-var">hdrName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.2.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621690547571"><span class="hs-identifier hs-var">hdrVal</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621690547575"><span class="hs-identifier hs-var">reqHeaders</span></a></span><span>
</span><span id="line-264"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">RequestContextHeaders
-&gt; SessionVariables -&gt; Maybe QueryContext -&gt; RequestContext
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContext"><span class="hs-identifier hs-var">RequestContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Text Text -&gt; RequestContextHeaders
</span><a href="Hasura.Backends.Postgres.Execute.ConnectionTemplate.html#RequestContextHeaders"><span class="hs-identifier hs-var">RequestContextHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text Text
</span><a href="#local-6989586621690547573"><span class="hs-identifier hs-var">reqHeaderHashMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SessionVariables
</span><a href="#local-6989586621690547574"><span class="hs-identifier hs-var">sessionVars</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QueryContext
</span><a href="#local-6989586621690547576"><span class="hs-identifier hs-var">queryContext</span></a></span><span>
</span><span id="line-265"></span></pre></body></html>