<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">graphql-engine-1.0.0: GraphQL API over Postgres</span><ul class="links" id="page-menu"><li><a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>How to construct and execute a call to a remote schema for a remote join.</p><p>There are three steps required to do this:
   1. construct the call: given the requested fields, the phantom fields, the
      values extracted by the LHS, construct a GraphQL query
   2. execute that GraphQL query over the network
   3. build a index of the variables out of the response</p><p>This can be done as one function, but we also export the individual steps for
 debugging / test purposes. We congregate all intermediary state in the opaque
 <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a></code> type.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:makeRemoteSchemaJoinCall">makeRemoteSchemaJoinCall</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; (<a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) -&gt; <a href="Hasura-Session.html#t:UserInfo" title="Hasura.Session">UserInfo</a> -&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:RemoteSchemaJoin" title="Hasura.GraphQL.Execute.RemoteJoin.Types">RemoteSchemaJoin</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgument" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgument</a> -&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a>))</li><li class="src short"><span class="keyword">data</span> <a href="#t:RemoteSchemaCall">RemoteSchemaCall</a> = <a href="#v:RemoteSchemaCall">RemoteSchemaCall</a> {<ul class="subs"><li><a href="#v:rscCustomizer">rscCustomizer</a> :: <a href="Hasura-RQL-Types-ResultCustomization.html#t:ResultCustomizer" title="Hasura.RQL.Types.ResultCustomization">ResultCustomizer</a></li><li><a href="#v:rscGQLRequest">rscGQLRequest</a> :: <a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a></li><li><a href="#v:rscResponsePaths">rscResponsePaths</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:ResponsePath" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">ResponsePath</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ResponsePath">ResponsePath</a> = <a href="#v:ResponsePath">ResponsePath</a> (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> Name)</li><li class="src short"><a href="#v:buildRemoteSchemaCall">buildRemoteSchemaCall</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:RemoteSchemaJoin" title="Hasura.GraphQL.Execute.RemoteJoin.Types">RemoteSchemaJoin</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgument" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgument</a> -&gt; <a href="Hasura-Session.html#t:UserInfo" title="Hasura.Session">UserInfo</a> -&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a>)</li><li class="src short"><a href="#v:fieldCallsToField">fieldCallsToField</a> :: <span class="keyword">forall</span> m. <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; HashMap Name (<a href="Hasura-GraphQL-Parser-Variable.html#t:InputValue" title="Hasura.GraphQL.Parser.Variable">InputValue</a> <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>) -&gt; HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>) -&gt; SelectionSet NoFragments <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a> -&gt; Name -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Hasura-RQL-Types-Relationships-ToSchema.html#t:FieldCall" title="Hasura.RQL.Types.Relationships.ToSchema">FieldCall</a> -&gt; m (Field NoFragments <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>)</li><li class="src short"><a href="#v:createArguments">createArguments</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>) -&gt; <a href="Hasura-RQL-Types-Relationships-ToSchema.html#t:RemoteArguments" title="Hasura.RQL.Types.Relationships.ToSchema">RemoteArguments</a> -&gt; m (HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>))</li><li class="src short"><a href="#v:combineValues">combineValues</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; Name -&gt; Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a> -&gt; Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a> -&gt; m (Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>)</li><li class="src short"><a href="#v:fieldsToRequest">fieldsToRequest</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (Field NoFragments <a href="Hasura-GraphQL-Parser-Variable.html#t:Variable" title="Hasura.GraphQL.Parser.Variable">Variable</a>) -&gt; <a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a></li><li class="src short"><a href="#v:executeRemoteSchemaCall">executeRemoteSchemaCall</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; (<a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) -&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a> -&gt; m <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Object" title="Data.Aeson.Ordered">Object</a></li><li class="src short"><a href="#v:buildJoinIndex">buildJoinIndex</a> :: <span class="keyword">forall</span> m. <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a> -&gt; <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Object" title="Data.Aeson.Ordered">Object</a> -&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a>)</li><li class="src short"><a href="#v:parseGraphQLName">parseGraphQLName</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; Text -&gt; m Name</li><li class="src short"><a href="#v:ordJSONValueToGValue">ordJSONValueToGValue</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> n =&gt; <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a> -&gt; n (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:makeRemoteSchemaJoinCall" class="def">makeRemoteSchemaJoinCall</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#makeRemoteSchemaJoinCall" class="link">Source</a> <a href="#v:makeRemoteSchemaJoinCall" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</td><td class="doc"><p>Function to send a request over the network.</p></td></tr><tr><td class="src">-&gt; <a href="Hasura-Session.html#t:UserInfo" title="Hasura.Session">UserInfo</a></td><td class="doc"><p>User information.</p></td></tr><tr><td class="src">-&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:RemoteSchemaJoin" title="Hasura.GraphQL.Execute.RemoteJoin.Types">RemoteSchemaJoin</a></td><td class="doc"><p>Information about that remote join.</p></td></tr><tr><td class="src">-&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgument" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgument</a></td><td class="doc"><p>Mapping from <code><a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgumentId" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgumentId</a></code> to its corresponding <code><a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgument" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgument</a></code>.</p></td></tr><tr><td class="src">-&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a>))</td><td class="doc"><p>The resulting join index (see <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#v:buildJoinIndex" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">buildJoinIndex</a></code>) if any.</p></td></tr></table></div><div class="doc"><p>Construct and execute a call to a remote schema for a remote join.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RemoteSchemaCall" class="def">RemoteSchemaCall</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#RemoteSchemaCall" class="link">Source</a> <a href="#t:RemoteSchemaCall" class="selflink">#</a></p><div class="doc"><p>Intermediate type containing all of the information required to perform
 a remote schema call, constructed from the static join information.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RemoteSchemaCall" class="def">RemoteSchemaCall</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:rscCustomizer" class="def">rscCustomizer</a> :: <a href="Hasura-RQL-Types-ResultCustomization.html#t:ResultCustomizer" title="Hasura.RQL.Types.ResultCustomization">ResultCustomizer</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rscGQLRequest" class="def">rscGQLRequest</a> :: <a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rscResponsePaths" class="def">rscResponsePaths</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:ResponsePath" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">ResponsePath</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ResponsePath" class="def">ResponsePath</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#ResponsePath" class="link">Source</a> <a href="#t:ResponsePath" class="selflink">#</a></p><div class="doc"><p>Used to extract the value from a remote schema response.</p><p>For example: if a remote relationship is defined to retrieve data from some
 deeply nested field, this is the path towards that deeply nested field.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ResponsePath" class="def">ResponsePath</a> (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> Name)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:buildRemoteSchemaCall" class="def">buildRemoteSchemaCall</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:RemoteSchemaJoin" title="Hasura.GraphQL.Execute.RemoteJoin.Types">RemoteSchemaJoin</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgument" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgument</a> -&gt; <a href="Hasura-Session.html#t:UserInfo" title="Hasura.Session">UserInfo</a> -&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a>) <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#buildRemoteSchemaCall" class="link">Source</a> <a href="#v:buildRemoteSchemaCall" class="selflink">#</a></p><div class="doc"><p>Constructs a <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a></code> from some static information, such as the
 definition of the join, and dynamic information such as the user's
 information and the map of join arguments.</p></div></div><div class="top"><p class="src"><a id="v:fieldCallsToField" class="def">fieldCallsToField</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#fieldCallsToField" class="link">Source</a> <a href="#v:fieldCallsToField" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m. <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; HashMap Name (<a href="Hasura-GraphQL-Parser-Variable.html#t:InputValue" title="Hasura.GraphQL.Parser.Variable">InputValue</a> <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>)</td><td class="doc"><p>user input arguments to the remote join field</p></td></tr><tr><td class="src">-&gt; HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>)</td><td class="doc"><p>Contains the values of the variables that have been defined in the remote join definition</p></td></tr><tr><td class="src">-&gt; SelectionSet NoFragments <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a></td><td class="doc"><p>Inserted at leaf of nested FieldCalls</p></td></tr><tr><td class="src">-&gt; Name</td><td class="doc"><p>Top-level name to set for this Field</p></td></tr><tr><td class="src">-&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Hasura-RQL-Types-Relationships-ToSchema.html#t:FieldCall" title="Hasura.RQL.Types.Relationships.ToSchema">FieldCall</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m (Field NoFragments <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Fold nested <code><a href="Hasura-RQL-Types-Relationships-ToSchema.html#t:FieldCall" title="Hasura.RQL.Types.Relationships.ToSchema">FieldCall</a></code>s into a bare <code>Field</code>, inserting the passed
 selection set at the leaf of the tree we construct.</p></div></div><div class="top"><p class="src"><a id="v:createArguments" class="def">createArguments</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>) -&gt; <a href="Hasura-RQL-Types-Relationships-ToSchema.html#t:RemoteArguments" title="Hasura.RQL.Types.Relationships.ToSchema">RemoteArguments</a> -&gt; m (HashMap Name (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>)) <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#createArguments" class="link">Source</a> <a href="#v:createArguments" class="selflink">#</a></p><div class="doc"><p>Create an argument map using the inputs taken from the left hand side.</p></div></div><div class="top"><p class="src"><a id="v:combineValues" class="def">combineValues</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; Name -&gt; Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a> -&gt; Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a> -&gt; m (Value <a href="Hasura-RQL-Types-RemoteSchema.html#t:RemoteSchemaVariable" title="Hasura.RQL.Types.RemoteSchema">RemoteSchemaVariable</a>) <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#combineValues" class="link">Source</a> <a href="#v:combineValues" class="selflink">#</a></p><div class="doc"><p>Combine two GraphQL values together.</p><p>This is used to combine different input arguments into one. This function can
 only combine objects or lists pairwise, and fails if it has to combine any
 other combination of values.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>combineValues (Object (fromList [(&quot;id&quot;, Number 1)]) (Object (fromList [(&quot;name&quot;, String &quot;foo&quot;)])
</code></strong>Object (fromList [(&quot;id&quot;, Number 1), (&quot;name&quot;, String &quot;foo&quot;)])
</pre></div></div><div class="top"><p class="src"><a id="v:fieldsToRequest" class="def">fieldsToRequest</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (Field NoFragments <a href="Hasura-GraphQL-Parser-Variable.html#t:Variable" title="Hasura.GraphQL.Parser.Variable">Variable</a>) -&gt; <a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#fieldsToRequest" class="link">Source</a> <a href="#v:fieldsToRequest" class="selflink">#</a></p><div class="doc"><p>Craft a GraphQL query document from the list of fields.</p></div></div><div class="top"><p class="src"><a id="v:executeRemoteSchemaCall" class="def">executeRemoteSchemaCall</a> <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#executeRemoteSchemaCall" class="link">Source</a> <a href="#v:executeRemoteSchemaCall" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<a href="Hasura-GraphQL-Transport-HTTP-Protocol.html#t:GQLReqOutgoing" title="Hasura.GraphQL.Transport.HTTP.Protocol">GQLReqOutgoing</a> -&gt; m <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</td><td class="doc"><p>Function to send a request over the network.</p></td></tr><tr><td class="src">-&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a></td><td class="doc"><p>Information about that call.</p></td></tr><tr><td class="src">-&gt; m <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Object" title="Data.Aeson.Ordered">Object</a></td><td class="doc"><p>Resulting JSON object</p></td></tr></table></div><div class="doc"><p>Sends the call over the network, and parse the resulting ByteString.</p></div></div><div class="top"><p class="src"><a id="v:buildJoinIndex" class="def">buildJoinIndex</a> :: <span class="keyword">forall</span> m. <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; <a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:RemoteSchemaCall" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">RemoteSchemaCall</a> -&gt; <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Object" title="Data.Aeson.Ordered">Object</a> -&gt; m (<a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/Data-IntMap-Strict-Internal.html#t:IntMap" title="Data.IntMap.Strict.Internal">IntMap</a> <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a>) <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#buildJoinIndex" class="link">Source</a> <a href="#v:buildJoinIndex" class="selflink">#</a></p><div class="doc"><p>Construct a join index from the remote source's <code><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a></code> response.</p><p>This function extracts from the <code>RemoteJoinCall</code> a mapping from
 <code><a href="Hasura-GraphQL-Execute-RemoteJoin-Types.html#t:JoinArgumentId" title="Hasura.GraphQL.Execute.RemoteJoin.Types">JoinArgumentId</a></code> to <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:ResponsePath" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">ResponsePath</a></code>: from an integer that uniquely identifies
 a join argument to the &quot;path&quot; at which we expect that value in the
 response. With it, and with the actual reponse JSON value obtained from the
 remote server, it constructs a corresponding mapping of, for each argument,
 its extracted value.</p><p>If the response does not have value at any of the provided <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:ResponsePath" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">ResponsePath</a></code>s,
 throw a generic <code><a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a></code>.</p><p>NOTE(jkachmar): If we switch to an <code><a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> validator, we can collect
 more than one missing <code><a href="Hasura-GraphQL-Execute-RemoteJoin-RemoteSchema.html#t:ResponsePath" title="Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema">ResponsePath</a></code>s (rather than short-circuiting on the
 first missing value).</p></div></div><div class="top"><p class="src"><a id="v:parseGraphQLName" class="def">parseGraphQLName</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; Text -&gt; m Name <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#parseGraphQLName" class="link">Source</a> <a href="#v:parseGraphQLName" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ordJSONValueToGValue" class="def">ordJSONValueToGValue</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> n =&gt; <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/aeson-ordered-0.1.0.0/opt/doc/html/aeson-ordered/Data-Aeson-Ordered.html#t:Value" title="Data.Aeson.Ordered">Value</a> -&gt; n (Value <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a>) <a href="src/Hasura.GraphQL.Execute.RemoteJoin.RemoteSchema.html#ordJSONValueToGValue" class="link">Source</a> <a href="#v:ordJSONValueToGValue" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>