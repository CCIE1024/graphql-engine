<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskellQuotes #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | Generate table selection schema both for ordinary Hasura-type and</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- relay-type queries.  All schema with &quot;relay&quot; or &quot;connection&quot; in the name is</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- used exclusively by relay.</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Schema.Select</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier">selectTableByPk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier">selectTableConnection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTable"><span class="hs-identifier">defaultSelectTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTableAggregate"><span class="hs-identifier">defaultSelectTableAggregate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier">defaultTableArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableSelectionSet"><span class="hs-identifier">defaultTableSelectionSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier">tableAggregationFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier">tableConnectionArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier">tableConnectionSelectionSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier">tableWhereArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier">tableOrderByArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier">tableDistinctArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier">tableLimitArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier">tableOffsetArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier">tablePermissionsInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier">tableSelectionList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">index</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Internal</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Key</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">K</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Has</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.HashMap.Strict.Extended.html"><span class="hs-identifier">Data.HashMap.Strict.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html"><span class="hs-identifier">Hasura.Backends.Postgres.SQL.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PG</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/hasura-error-message-1.0.0/opt/doc/html/hasura-error-message/src"><span class="hs-identifier">Hasura.Base.ErrorMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/hasura-error-message-1.0.0/opt/doc/html/hasura-error-message/src"><span class="hs-identifier">toErrorMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Class</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Internal.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Backend</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.BoolExp.html"><span class="hs-identifier">Hasura.GraphQL.Schema.BoolExp</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Common</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Options</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html#OptimizePermissionFilters"><span class="hs-identifier">OptimizePermissionFilters</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Options.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Options</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Options</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.OrderBy.html"><span class="hs-identifier">Hasura.GraphQL.Schema.OrderBy</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier">FieldParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier">InputFieldsParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Kind"><span class="hs-identifier">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Table.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Table</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Typename.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Typename</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Name.html"><span class="hs-identifier">Hasura.Name</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.html"><span class="hs-identifier">Hasura.RQL.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html"><span class="hs-identifier">Hasura.RQL.IR.BoolExp</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html"><span class="hs-identifier">Hasura.RQL.Types.Backend</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Column.html"><span class="hs-identifier">Hasura.RQL.Types.Column</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html"><span class="hs-identifier">Hasura.RQL.Types.ComputedField</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.Object.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata.Object</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Local</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Remote</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.SourceCustomization</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Table.html"><span class="hs-identifier">Hasura.RQL.Types.Table</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html"><span class="hs-identifier">Hasura.Server.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier">executeJSONPath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- Top-level functions.</span><span>
</span><span id="line-80"></span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- Those functions implement parsers for top-level components of the schema,</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- such as querying a table or a function. They are typically used to implement</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- root fields.</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-comment">-- | Simple table selection.</span><span>
</span><span id="line-86"></span><span class="hs-comment">--</span><span>
</span><span id="line-87"></span><span class="hs-comment">-- The field for the table accepts table selection arguments, and</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- expects a selection of fields</span><span>
</span><span id="line-89"></span><span class="hs-comment">--</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- &gt; table_name(limit: 10) {</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- &gt;   col1: col1_type</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- &gt;   col2: col2_type</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- &gt; }: [table!]!</span><span>
</span><span id="line-94"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTable"><span class="hs-identifier hs-type">defaultSelectTable</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489261"><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489260"><span class="annot"><a href="#local-6989586621689489260"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489259"><span class="annot"><a href="#local-6989586621689489259"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489258"><span class="annot"><a href="#local-6989586621689489258"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489260"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489259"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489258"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="#local-6989586621689489259"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489258"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489261"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span id="defaultSelectTable"><span class="annot"><span class="annottext">defaultSelectTable :: SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTable"><span class="hs-identifier hs-var hs-var">defaultSelectTable</span></a></span></span><span> </span><span id="local-6989586621689489257"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489257"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489256"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489256"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621689489255"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489255"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621689489254"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489254"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (SelectExp b))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621689489252"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489252"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; MaybeT m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621689489249"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489249"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489256"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621689489246"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489246"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall r (m :: * -&gt; *) (n :: * -&gt; *) (b :: BackendType).
(MonadBuildSchemaBase r m n, BackendTableSelectSchema b) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489257"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489256"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (SelectExp b))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (SelectExp b))
-&gt; m (FieldParser n (SelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">defaultSelectTable</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489257"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489242"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489255"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-110"></span><span>    </span><span id="local-6989586621689489241"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489241"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaOptions -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var hs-var">Options.soStringifyNumbers</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621689489238"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621689489238"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489257"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489256"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-113"></span><span>      </span><span class="annot"><span class="annottext">MetadataObjId
-&gt; FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b)
forall (m :: * -&gt; *) origin a.
origin -&gt; FieldParser origin m a -&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#setFieldParserOrigin"><span class="hs-identifier hs-var">P.setFieldParserOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOSource"><span class="hs-identifier hs-var">MOSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489257"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b))
-&gt; FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser
     MetadataObjId
     n
     (SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Output m b
-&gt; FieldParser origin m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489255"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489254"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621689489238"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489246"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-115"></span><span>          </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
-&gt; ((SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
    -&gt; SelectExp b)
-&gt; FieldParser n (SelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621689489232"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621689489232"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489231"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689489231"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-116"></span><span>            </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; Maybe NamingCase
-&gt; AnnSelectG b f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-117"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_asnFields:AnnSelectG :: AnnotatedFields b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFields%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689489231"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnFrom:AnnSelectG :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFrom%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489242"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnPerm:AnnSelectG :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489249"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnArgs:AnnSelectG :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnArgs%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621689489232"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnStrfyNum:AnnSelectG :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnStrfyNum%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489241"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnNamingConvention:AnnSelectG :: Maybe NamingCase
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnNamingConvention%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnNamingConvention</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Maybe NamingCase
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489252"><span class="hs-identifier hs-var">tCase</span></a></span><span>
</span><span id="line-123"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621689489242"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489242"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489256"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Simple table connection selection.</span><span>
</span><span id="line-128"></span><span class="hs-comment">--</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- The field for the table accepts table connection selection argument, and</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- expects a selection of connection fields</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- &gt; table_name_connection(first: 1) {</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- &gt;   pageInfo: {</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- &gt;     hasNextPage: Boolean!</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- &gt;     endCursor: String!</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- &gt;   }</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- &gt;   edges: {</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- &gt;     cursor: String!</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- &gt;     node: {</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- &gt;       id: ID!</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- &gt;       col1: col1_type</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- &gt;       col2: col2_type</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- &gt;     }</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- &gt;   }</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- &gt; }: table_nameConnection!</span><span>
</span><span id="line-146"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-type">selectTableConnection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489289"><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489288"><span class="annot"><a href="#local-6989586621689489288"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489287"><span class="annot"><a href="#local-6989586621689489287"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489286"><span class="annot"><a href="#local-6989586621689489286"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489288"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489287"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489286"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-comment">-- | primary key columns</span><span>
</span><span id="line-159"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="#local-6989586621689489287"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489286"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionSelectExp"><span class="hs-identifier hs-type">ConnectionSelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span id="selectTableConnection"><span class="annot"><span class="annottext">selectTableConnection :: SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; PrimaryKeyColumns b
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-var hs-var">selectTableConnection</span></a></span></span><span> </span><span id="local-6989586621689489221"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489221"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489220"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489220"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621689489219"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489219"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621689489218"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489218"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621689489217"><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689489217"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (ConnectionSelectExp b))
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621689489216"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489216"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; MaybeT m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621689489215"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621689489215"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XRelay b) -&gt; MaybeT m (XRelay b))
-&gt; Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489289"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621689489212"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489212"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489220"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span id="local-6989586621689489211"><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621689489211"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Parser
   MetadataObjId
   'Output
   n
   (Fields
      (ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Parser
      MetadataObjId
      'Output
      n
      (Fields
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; MaybeT
     m
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; MaybeT
     m
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(MaybeT
   m
   (Parser
      MetadataObjId
      'Output
      n
      (Fields
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
 -&gt; MaybeT
      m
      (Parser
         MetadataObjId
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; (m (Maybe
         (Parser
            MetadataObjId
            'Output
            n
            (Fields
               (ConnectionField
                  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
    -&gt; MaybeT
         m
         (Parser
            MetadataObjId
            'Output
            n
            (Fields
               (ConnectionField
                  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; m (Maybe
        (Parser
           MetadataObjId
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe
      (Parser
         MetadataObjId
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
 -&gt; MaybeT
      m
      (Parser
         MetadataObjId
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; m (Maybe
        (Parser
           MetadataObjId
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        MetadataObjId
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (Maybe
        (Parser
           MetadataObjId
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadBuildSchema b r m n, BackendTableSelectSchema b) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-var">tableConnectionSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489221"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489220"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (FieldParser n (ConnectionSelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (ConnectionSelectExp b))
 -&gt; MaybeT m (FieldParser n (ConnectionSelectExp b)))
-&gt; m (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (FieldParser n (ConnectionSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (ConnectionSelectExp b))
-&gt; m (FieldParser n (ConnectionSelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTableConnection</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489221"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489208"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489219"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621689489207"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489207"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaOptions -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var hs-var">Options.soStringifyNumbers</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span id="local-6989586621689489206"><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs b,
   Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621689489206"><span class="hs-identifier hs-var">selectArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
-&gt; SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
PrimaryKeyColumns b
-&gt; SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-var">tableConnectionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689489217"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489221"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489220"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (SelectArgs b,
      Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
      Maybe ConnectionSlice)
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; FieldParser
     MetadataObjId
     n
     ((SelectArgs b,
       Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
       Maybe ConnectionSlice),
      Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Output m b
-&gt; FieldParser origin m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489219"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489218"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs b,
   Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621689489206"><span class="hs-identifier hs-var">selectArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621689489211"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  ((SelectArgs b,
    Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
    Maybe ConnectionSlice),
   Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; (((SelectArgs b,
      Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
      Maybe ConnectionSlice),
     Fields
       (ConnectionField
          b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; ConnectionSelectExp b)
-&gt; FieldParser n (ConnectionSelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621689489205"><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689489205"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489204"><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689489204"><span class="hs-identifier hs-var">split</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489203"><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621689489203"><span class="hs-identifier hs-var">slice</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489202"><span class="annot"><span class="annottext">Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489202"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-172"></span><span>          </span><span class="annot"><span class="annottext">ConnectionSelect :: forall (b :: BackendType) r v.
XRelay b
-&gt; PrimaryKeyColumns b
-&gt; Maybe (NonEmpty (ConnectionSplit b v))
-&gt; Maybe ConnectionSlice
-&gt; AnnSelectG b (ConnectionField b r) v
-&gt; ConnectionSelect b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSelect"><span class="hs-identifier hs-type">IR.ConnectionSelect</span></a></span><span>
</span><span id="line-173"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_csXRelay:ConnectionSelect :: XRelay b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_csXRelay%3AConnectionSelect"><span class="hs-identifier hs-var">IR._csXRelay</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621689489215"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>              </span><span class="annot"><span class="annottext">$sel:_csPrimaryKeyColumns:ConnectionSelect :: PrimaryKeyColumns b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_csPrimaryKeyColumns%3AConnectionSelect"><span class="hs-identifier hs-var">IR._csPrimaryKeyColumns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689489217"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-175"></span><span>              </span><span class="annot"><span class="annottext">$sel:_csSplit:ConnectionSelect :: Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_csSplit%3AConnectionSelect"><span class="hs-identifier hs-var">IR._csSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689489204"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-176"></span><span>              </span><span class="annot"><span class="annottext">$sel:_csSlice:ConnectionSelect :: Maybe ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_csSlice%3AConnectionSelect"><span class="hs-identifier hs-var">IR._csSlice</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621689489203"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-177"></span><span>              </span><span class="annot"><span class="annottext">$sel:_csSelect:ConnectionSelect :: AnnSelectG
  b
  (ConnectionField b (RemoteRelationshipField UnpreparedValue))
  (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_csSelect%3AConnectionSelect"><span class="hs-identifier hs-var">IR._csSelect</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-178"></span><span>                </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; Maybe NamingCase
-&gt; AnnSelectG b f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-179"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_asnFields:AnnSelectG :: Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFields%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489202"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnFrom:AnnSelectG :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFrom%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489208"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnPerm:AnnSelectG :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489212"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnArgs:AnnSelectG :: SelectArgs b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnArgs%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689489205"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-183"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnStrfyNum:AnnSelectG :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnStrfyNum%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489207"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-184"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnNamingConvention:AnnSelectG :: Maybe NamingCase
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnNamingConvention%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnNamingConvention</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Maybe NamingCase
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489216"><span class="hs-identifier hs-var">tCase</span></a></span><span>
</span><span id="line-185"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-186"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621689489208"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489208"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489220"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-- | Table selection by primary key.</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- &gt; table_name(id: 42) {</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- &gt;   col1: col1_type</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- &gt;   col2: col2_type</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- &gt; }: table</span><span>
</span><span id="line-196"></span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- Returns Nothing if there's nothing that can be selected with</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- current permissions or if there are primary keys the user</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- doesn't have select permissions for.</span><span>
</span><span id="line-200"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier hs-type">selectTableByPk</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489195"><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489194"><span class="annot"><a href="#local-6989586621689489194"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489193"><span class="annot"><a href="#local-6989586621689489193"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489192"><span class="annot"><a href="#local-6989586621689489192"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489194"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489193"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489192"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><a href="#local-6989586621689489193"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489192"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489195"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span id="selectTableByPk"><span class="annot"><span class="annottext">selectTableByPk :: SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier hs-var hs-var">selectTableByPk</span></a></span></span><span> </span><span id="local-6989586621689489191"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489191"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489190"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489190"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621689489189"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489189"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621689489188"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489188"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (SelectExp b))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621689489187"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489187"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; MaybeT m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621689489186"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489186"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489190"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span id="local-6989586621689489185"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689489185"><span class="hs-identifier hs-var">primaryKeys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b))
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b)))
-&gt; Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b)
forall (b :: BackendType) a1. PrimaryKey b a1 -&gt; NESeq a1
</span><a href="Hasura.RQL.Types.Table.html#_pkColumns"><span class="hs-identifier hs-var hs-var">_pkColumns</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; (TableInfo b -&gt; Maybe (PrimaryKey b (ColumnInfo b)))
-&gt; TableInfo b
-&gt; Maybe (NESeq (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1
-&gt; Maybe (PrimaryKey b primaryKeyColumn1)
</span><a href="Hasura.RQL.Types.Table.html#_tciPrimaryKey"><span class="hs-identifier hs-var hs-var">_tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Maybe (PrimaryKey b (ColumnInfo b)))
-&gt; (TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
-&gt; TableInfo b
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TableInfo b -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; TableInfo b -&gt; Maybe (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489190"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621689489180"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489180"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489191"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489190"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Bool) -&gt; NESeq (ColumnInfo b) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621689489177"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489177"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489177"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Bool
forall k a. (Eq k, Hashable k) =&gt; k -&gt; HashMap k a -&gt; Bool
</span><span class="hs-operator hs-var">`Map.member`</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489186"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689489185"><span class="hs-identifier hs-var">primaryKeys</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (SelectExp b))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (SelectExp b))
-&gt; m (FieldParser n (SelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTableByPk</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489191"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489173"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489189"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-218"></span><span>    </span><span id="local-6989586621689489172"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489172"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaOptions -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var hs-var">Options.soStringifyNumbers</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621689489171"><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
</span><a href="#local-6989586621689489171"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><span class="annottext">NESeq
  (InputFieldsParser
     MetadataObjId n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">(NESeq
   (InputFieldsParser
      MetadataObjId n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
 -&gt; InputFieldsParser
      MetadataObjId
      n
      (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (NESeq
        (InputFieldsParser
           MetadataObjId
           n
           (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        MetadataObjId
        n
        (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
-&gt; (ColumnInfo b
    -&gt; m (InputFieldsParser
            MetadataObjId
            n
            (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (NESeq
        (InputFieldsParser
           MetadataObjId
           n
           (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689489185"><span class="hs-identifier hs-var">primaryKeys</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689489168"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621689489167"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689489167"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r, Has NamingCase r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Nullability) -&gt; Bool -&gt; Nullability
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-223"></span><span>          </span><span class="annot"><span class="annottext">AnnBoolExpFld b (UnpreparedValue b)
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall (backend :: BackendType) field.
field -&gt; GBoolExp backend field
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolField"><span class="hs-identifier hs-var">BoolField</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld b (UnpreparedValue b)
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
-&gt; [OpExpG b (UnpreparedValue b)]
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall (backend :: BackendType) leaf.
ColumnInfo backend
-&gt; [OpExpG backend leaf] -&gt; AnnBoolExpFld backend leaf
</span><a href="Hasura.RQL.IR.BoolExp.html#AVColumn"><span class="hs-identifier hs-var">AVColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">([OpExpG b (UnpreparedValue b)]
 -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; [OpExpG b (UnpreparedValue b)])
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OpExpG b (UnpreparedValue b) -&gt; [OpExpG b (UnpreparedValue b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(OpExpG b (UnpreparedValue b) -&gt; [OpExpG b (UnpreparedValue b)])
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; OpExpG b (UnpreparedValue b))
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; [OpExpG b (UnpreparedValue b)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; UnpreparedValue b -&gt; OpExpG b (UnpreparedValue b)
forall (backend :: BackendType) field.
Bool -&gt; field -&gt; OpExpG backend field
</span><a href="Hasura.RQL.IR.BoolExp.html#AEQ"><span class="hs-identifier hs-var">AEQ</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">(UnpreparedValue b -&gt; OpExpG b (UnpreparedValue b))
-&gt; (ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b)
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; OpExpG b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
forall (b :: BackendType).
ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#mkParameter"><span class="hs-identifier hs-var">IR.mkParameter</span></a></span><span>
</span><span id="line-224"></span><span>            </span><span class="annot"><span class="annottext">(ValueWithOrigin (ColumnValue b)
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; InputFieldsParser
     MetadataObjId n (ValueWithOrigin (ColumnValue b))
-&gt; InputFieldsParser
     MetadataObjId n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; InputFieldsParser
     MetadataObjId n (ValueWithOrigin (ColumnValue b))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#field"><span class="hs-identifier hs-var">P.field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689489168"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689489167"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-226"></span><span>      </span><span class="annot"><span class="annottext">MetadataObjId
-&gt; FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b)
forall (m :: * -&gt; *) origin a.
origin -&gt; FieldParser origin m a -&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#setFieldParserOrigin"><span class="hs-identifier hs-var">P.setFieldParserOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOSource"><span class="hs-identifier hs-var">MOSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489191"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b))
-&gt; FieldParser n (SelectExp b) -&gt; FieldParser n (SelectExp b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-227"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     MetadataObjId
     n
     (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser
     MetadataObjId
     n
     (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
      AnnotatedFields b)
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Output m b
-&gt; FieldParser origin m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489189"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489188"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
</span><a href="#local-6989586621689489171"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489180"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-228"></span><span>          </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
   AnnotatedFields b)
-&gt; ((NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
     AnnotatedFields b)
    -&gt; SelectExp b)
-&gt; FieldParser n (SelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621689489155"><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621689489155"><span class="hs-identifier hs-var">boolExpr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489154"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689489154"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-229"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489153"><span class="annot"><span class="annottext">defaultPerms :: TablePerms b
</span><a href="#local-6989586621689489153"><span class="hs-identifier hs-var hs-var">defaultPerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePerms b
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489186"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-230"></span><span>                </span><span class="hs-comment">-- Do not account permission limit since the result is just a nullable object</span><span>
</span><span id="line-231"></span><span>                </span><span id="local-6989586621689489152"><span class="annot"><span class="annottext">permissions :: TablePerms b
</span><a href="#local-6989586621689489152"><span class="hs-identifier hs-var hs-var">permissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TablePerms b
</span><a href="#local-6989586621689489153"><span class="hs-identifier hs-var">defaultPerms</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:_tpLimit:TablePerm :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpLimit%3ATablePerm"><span class="hs-identifier hs-var">IR._tpLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">}</span><span>
</span><span id="line-232"></span><span>                </span><span id="local-6989586621689489150"><span class="annot"><span class="annottext">whereExpr :: Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621689489150"><span class="hs-identifier hs-var hs-var">whereExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
-&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
 -&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
-&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall (backend :: BackendType) field.
[GBoolExp backend field] -&gt; GBoolExp backend field
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-var">BoolAnd</span></a></span><span> </span><span class="annot"><span class="annottext">([GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; [GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; [GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621689489155"><span class="hs-identifier hs-var">boolExpr</span></a></span><span>
</span><span id="line-233"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; Maybe NamingCase
-&gt; AnnSelectG b f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-234"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_asnFields:AnnSelectG :: AnnotatedFields b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFields%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689489154"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-235"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnFrom:AnnSelectG :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFrom%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489173"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-236"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnPerm:AnnSelectG :: TablePerms b
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TablePerms b
</span><a href="#local-6989586621689489152"><span class="hs-identifier hs-var">permissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-237"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnArgs:AnnSelectG :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnArgs%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
forall (backend :: BackendType) v. SelectArgsG backend v
</span><a href="Hasura.RQL.IR.Select.html#noSelectArgs"><span class="hs-identifier hs-var">IR.noSelectArgs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:_saWhere:SelectArgs :: Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saWhere%3ASelectArgs"><span class="hs-identifier hs-var">IR._saWhere</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621689489150"><span class="hs-identifier hs-var">whereExpr</span></a></span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-238"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnStrfyNum:AnnSelectG :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnStrfyNum%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489172"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-239"></span><span>                    </span><span class="annot"><span class="annottext">$sel:_asnNamingConvention:AnnSelectG :: Maybe NamingCase
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnNamingConvention%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnNamingConvention</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Maybe NamingCase
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489187"><span class="hs-identifier hs-var">tCase</span></a></span><span>
</span><span id="line-240"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621689489173"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489173"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489190"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Table aggregation selection</span><span>
</span><span id="line-245"></span><span class="hs-comment">--</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- Parser for an aggregation selection of a table.</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- &gt; table_aggregate(limit: 10) {</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- &gt;   aggregate: table_aggregate_fields</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- &gt;   nodes: [table!]!</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- &gt; } :: table_aggregate!</span><span>
</span><span id="line-251"></span><span class="hs-comment">--</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- Returns Nothing if there's nothing that can be selected with</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- current permissions.</span><span>
</span><span id="line-254"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTableAggregate"><span class="hs-identifier hs-type">defaultSelectTableAggregate</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489145"><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489144"><span class="annot"><a href="#local-6989586621689489144"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489143"><span class="annot"><a href="#local-6989586621689489143"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489142"><span class="annot"><a href="#local-6989586621689489142"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489144"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489143"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489142"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>  </span><span class="annot"><a href="#local-6989586621689489143"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489142"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AggSelectExp"><span class="hs-identifier hs-type">AggSelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span id="defaultSelectTableAggregate"><span class="annot"><span class="annottext">defaultSelectTableAggregate :: SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#defaultSelectTableAggregate"><span class="hs-identifier hs-var hs-var">defaultSelectTableAggregate</span></a></span></span><span> </span><span id="local-6989586621689489141"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489140"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621689489139"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489139"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621689489138"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489138"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AggSelectExp b))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (FieldParser n (AggSelectExp b))
 -&gt; m (Maybe (FieldParser n (AggSelectExp b))))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-266"></span><span>  </span><span id="local-6989586621689489137"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489137"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; MaybeT m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621689489136"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489136"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Bool
forall (b :: BackendType). SelPermInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Table.html#spiAllowAgg"><span class="hs-identifier hs-var hs-var">spiAllowAgg</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489136"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-269"></span><span>  </span><span id="local-6989586621689489134"><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621689489134"><span class="hs-identifier hs-var">xNodesAgg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b))
-&gt; Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XNodesAgg b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XNodesAgg b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#nodesAggExtension"><span class="hs-identifier hs-var">nodesAggExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489145"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span id="local-6989586621689489132"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489132"><span class="hs-identifier hs-var">nodesParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall r (m :: * -&gt; *) (n :: * -&gt; *) (b :: BackendType).
(MonadBuildSchemaBase r m n, BackendTableSelectSchema b) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (AggSelectExp b))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (AggSelectExp b))
 -&gt; MaybeT m (FieldParser n (AggSelectExp b)))
-&gt; m (FieldParser n (AggSelectExp b))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (AggSelectExp b))
-&gt; m (FieldParser n (AggSelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">defaultSelectTableAggregate</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489131"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489139"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621689489130"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489130"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaOptions -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var hs-var">Options.soStringifyNumbers</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621689489129"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489129"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621689489127"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621689489127"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621689489126"><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621689489126"><span class="hs-identifier hs-var">aggregateParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-var">tableAggregationFields</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621689489125"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489125"><span class="hs-identifier hs-var">selectionName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489129"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__aggregate"><span class="hs-identifier hs-var">Name.__aggregate</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489122"><span class="annot"><span class="annottext">aggregationParser :: Parser
  MetadataObjId
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621689489122"><span class="hs-identifier hs-var hs-var">aggregationParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>          </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   MetadataObjId
   'Output
   n
   (Fields
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Parser
      MetadataObjId
      'Output
      n
      (Fields
         (TableAggregateFieldG
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-279"></span><span>            </span><span class="annot"><span class="annottext">(Text
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFExp"><span class="hs-identifier hs-var">IR.TAFExp</span></a></span><span>
</span><span id="line-280"></span><span>              </span><span class="annot"><span class="annottext">(InsOrdHashMap
   Name
   (ParsedSelection
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Fields
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      MetadataObjId
      n
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span>
</span><span id="line-281"></span><span>                </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489125"><span class="hs-identifier hs-var">selectionName</span></a></span><span>
</span><span id="line-282"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregated selection of &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489131"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
-&gt; AnnotatedFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
XNodesAgg b -&gt; AnnFieldsG b r v -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFNodes"><span class="hs-identifier hs-var">IR.TAFNodes</span></a></span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621689489134"><span class="hs-identifier hs-var">xNodesAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser MetadataObjId n (AnnotatedFields b)
-&gt; FieldParser
     MetadataObjId
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser MetadataObjId n (AnnotatedFields b)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_nodes"><span class="hs-identifier hs-var">Name._nodes</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489132"><span class="hs-identifier hs-var">nodesParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-284"></span><span>                  </span><span class="annot"><span class="annottext">AggregateFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
AggregateFields b -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFAgg"><span class="hs-identifier hs-var">IR.TAFAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AggregateFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser MetadataObjId n (AggregateFields b)
-&gt; FieldParser
     MetadataObjId
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AggregateFields b)
-&gt; FieldParser MetadataObjId n (AggregateFields b)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_aggregate"><span class="hs-identifier hs-var">Name._aggregate</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621689489126"><span class="hs-identifier hs-var">aggregateParser</span></a></span><span>
</span><span id="line-285"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-287"></span><span>      </span><span class="annot"><span class="annottext">MetadataObjId
-&gt; FieldParser n (AggSelectExp b) -&gt; FieldParser n (AggSelectExp b)
forall (m :: * -&gt; *) origin a.
origin -&gt; FieldParser origin m a -&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#setFieldParserOrigin"><span class="hs-identifier hs-var">P.setFieldParserOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName -&gt; MetadataObjId
</span><a href="Hasura.RQL.Types.Metadata.Object.html#MOSource"><span class="hs-identifier hs-var">MOSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489141"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggSelectExp b) -&gt; FieldParser n (AggSelectExp b))
-&gt; FieldParser n (AggSelectExp b) -&gt; FieldParser n (AggSelectExp b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; Parser
     MetadataObjId
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; FieldParser
     MetadataObjId
     n
     (SelectArgsG b (UnpreparedValue b),
      Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Output m b
-&gt; FieldParser origin m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489139"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489138"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621689489127"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621689489122"><span class="hs-identifier hs-var">aggregationParser</span></a></span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (SelectArgsG b (UnpreparedValue b),
   Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; ((SelectArgsG b (UnpreparedValue b),
     Fields
       (TableAggregateFieldG
          b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; AggSelectExp b)
-&gt; FieldParser n (AggSelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621689489111"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621689489111"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689489110"><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489110"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-290"></span><span>            </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; Maybe NamingCase
-&gt; AnnSelectG b f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-291"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_asnFields:AnnSelectG :: Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFields%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489110"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-292"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnFrom:AnnSelectG :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnFrom%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489131"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-293"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnPerm:AnnSelectG :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489136"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnArgs:AnnSelectG :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnArgs%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621689489111"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnStrfyNum:AnnSelectG :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnStrfyNum%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621689489130"><span class="hs-identifier hs-var">stringifyNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>                </span><span class="annot"><span class="annottext">$sel:_asnNamingConvention:AnnSelectG :: Maybe NamingCase
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnNamingConvention%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnNamingConvention</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Maybe NamingCase
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689489137"><span class="hs-identifier hs-var">tCase</span></a></span><span>
</span><span id="line-297"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-299"></span><span>    </span><span id="local-6989586621689489131"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489131"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-comment">{- Note [Selectability of tables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The GraphQL specification requires that if the type of a selected field is an
interface, union, or object, then its subselection set must not be empty
(Section 5.3.3).  Since we model database tables by GraphQL objects, this means
that a table can be selected as a GraphQL field only if it has fields that we
can select, such as a column.  It is perfectly fine not to allow any selections
of any columns of the table in the database.  In that case, the table would not
be selectable as a field in GraphQL.

However, this is not the end of the story.  In addition to scalar fields, we
support relationships between tables, so that we may have another table B as a
selected field of this table A.  Then the selectability of A depends on the
selectability of B: if we permit selection a column of B, then, as a
consequence, we permit selection of the relationship from A to B, and hence we
permit selection of A, as there would now be valid GraphQL syntax that selects
A.  In turn, the selectability of B can depend on the selectability of a further
table C, through a relationship from B to C.

Now consider the case of a table A, whose columns themselves are not selectable,
but which has a relationship with itself.  Is A selectable?  In fact, if A has
no further relationships with other tables, or any computed fields, A is not
selectable.  But as soon as any leaf field in the transitive closure of tables
related to A becomes selectable, A itself becomes selectable.

In summary, figuring out the selectability of a table is a mess.  In order to
avoid doing graph theory, for now, we simply pretend that GraphQL did not have
the restriction of only allowing selections of fields of type objects when its
subselection is non-empty.  In practice, this white lie is somewhat unlikely to
cause errors on the client side, for the following reasons:

- Introspection of the GraphQL schema is normally provided to aid development of
  valid GraphQL schemas, and so any errors in the exposed schema can be caught
  at development time: when a developer is building a GraphQL query using schema
  introspection, they will eventually find out that the selection they aim to do
  is not valid GraphQL.  Put differently: exposing a given field through
  introspection is not the same as claiming that there is a valid GraphQL query
  that selects that field.

- We only support tables that have at least one column (since we require primary
  keys), so that the admin role can select every table anyway.
-}</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-comment">-- | Fields of a table</span><span>
</span><span id="line-346"></span><span class="hs-comment">--</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- &gt; type table{</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- &gt;   # table columns</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- &gt;   column_1: column1_type</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- &gt;   .</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- &gt;   column_n: columnn_type</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- &gt;   # table relationships</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- &gt;   object_relationship: remote_table</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- &gt;   array_relationship: [remote_table!]!</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- &gt;   # computed fields</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- &gt;   computed_field: field_type</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- &gt;   # remote relationships</span><span>
</span><span id="line-361"></span><span class="hs-comment">-- &gt;   remote_field: field_type</span><span>
</span><span id="line-362"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-363"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableSelectionSet"><span class="hs-identifier hs-type">defaultTableSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489109"><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489108"><span class="annot"><a href="#local-6989586621689489108"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489107"><span class="annot"><a href="#local-6989586621689489107"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489106"><span class="annot"><a href="#local-6989586621689489106"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489108"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489107"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489106"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-367"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#BooleanOperators"><span class="hs-identifier hs-type">BooleanOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-368"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#FunctionArgumentExp"><span class="hs-identifier hs-type">FunctionArgumentExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-370"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-371"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="#local-6989586621689489107"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489106"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-type">AnnotatedFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span id="defaultTableSelectionSet"><span class="annot"><span class="annottext">defaultTableSelectionSet :: SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#defaultTableSelectionSet"><span class="hs-identifier hs-var hs-var">defaultTableSelectionSet</span></a></span></span><span> </span><span id="local-6989586621689489105"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489105"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489104"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (AnnotatedFields b))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-374"></span><span>  </span><span id="local-6989586621689489103"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489103"><span class="hs-identifier hs-var">_selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621689489102"><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689489102"><span class="hs-identifier hs-var">schemaKind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SchemaKind -&gt; MaybeT m SchemaKind
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m SchemaKind -&gt; MaybeT m SchemaKind)
-&gt; m SchemaKind -&gt; MaybeT m SchemaKind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; SchemaKind) -&gt; m SchemaKind
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#scSchemaKind"><span class="hs-identifier hs-var hs-var">scSchemaKind</span></a></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-comment">-- If this check fails, it means we're attempting to build a Relay schema, but</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-comment">-- the current backend b does't support Relay; rather than returning an</span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-comment">-- incomplete selection set, we fail early and return 'Nothing'. This check</span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-comment">-- must happen first, since we can't memoize a @Maybe Parser@.</span><span>
</span><span id="line-380"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaKind -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Common.html#isHasuraSchema"><span class="hs-identifier hs-var">isHasuraSchema</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689489102"><span class="hs-identifier hs-var">schemaKind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>  </span><span class="annot"><span class="annottext">m (Parser 'Output n (AnnotatedFields b))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Output n (AnnotatedFields b))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Parser 'Output n (AnnotatedFields b))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">defaultTableSelectionSet</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621689489097"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489096"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621689489095"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489095"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621689489094"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489094"><span class="hs-identifier hs-var">objectTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489095"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489093"><span class="annot"><span class="annottext">xRelay :: Maybe (XRelay b)
</span><a href="#local-6989586621689489093"><span class="hs-identifier hs-var hs-var">xRelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489109"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-385"></span><span>        </span><span id="local-6989586621689489092"><span class="annot"><span class="annottext">tableFields :: [FieldInfo b]
</span><a href="#local-6989586621689489092"><span class="hs-identifier hs-var hs-var">tableFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b]
forall k v. HashMap k v -&gt; [v]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">(HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b])
-&gt; HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; HashMap FieldName (FieldInfo b)
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; FieldInfoMap field
</span><a href="Hasura.RQL.Types.Table.html#_tciFieldInfoMap"><span class="hs-identifier hs-var hs-var">_tciFieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621689489089"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-386"></span><span>        </span><span id="local-6989586621689489088"><span class="annot"><span class="annottext">tablePkeyColumns :: Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621689489088"><span class="hs-identifier hs-var hs-var">tablePkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b)
forall (b :: BackendType) a1. PrimaryKey b a1 -&gt; NESeq a1
</span><a href="Hasura.RQL.Types.Table.html#_pkColumns"><span class="hs-identifier hs-var hs-var">_pkColumns</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1
-&gt; Maybe (PrimaryKey b primaryKeyColumn1)
</span><a href="Hasura.RQL.Types.Table.html#_tciPrimaryKey"><span class="hs-identifier hs-var hs-var">_tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621689489089"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span id="local-6989586621689489087"><span class="annot"><span class="annottext">pkFields :: [ColumnInfo b]
</span><a href="#local-6989586621689489087"><span class="hs-identifier hs-var hs-var">pkFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NESeq (ColumnInfo b) -&gt; [ColumnInfo b])
-&gt; Maybe (NESeq (ColumnInfo b)) -&gt; [ColumnInfo b]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b) -&gt; [ColumnInfo b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621689489088"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span><span>
</span><span id="line-388"></span><span>        </span><span id="local-6989586621689489085"><span class="annot"><span class="annottext">pkFieldDirective :: Text
</span><a href="#local-6989586621689489085"><span class="hs-identifier hs-var hs-var">pkFieldDirective</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.intercalate</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Text) -&gt; [ColumnInfo b] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Text) -&gt; (ColumnInfo b -&gt; Name) -&gt; ColumnInfo b -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689489087"><span class="hs-identifier hs-var">pkFields</span></a></span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-comment">-- Adding `@key` directives to type for apollo federation. An example</span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-comment">-- of type with key directive:</span><span>
</span><span id="line-391"></span><span>        </span><span class="hs-comment">--  type Product @key(fields: &quot;upc sku&quot;){</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-comment">--    upc: UPC!</span><span>
</span><span id="line-393"></span><span>        </span><span class="hs-comment">--    sku: SKU!</span><span>
</span><span id="line-394"></span><span>        </span><span class="hs-comment">--    name: String</span><span>
</span><span id="line-395"></span><span>        </span><span class="hs-comment">--  }</span><span>
</span><span id="line-396"></span><span>        </span><span id="local-6989586621689489082"><span class="annot"><span class="annottext">pkDirectives :: [Directive Void]
</span><a href="#local-6989586621689489082"><span class="hs-identifier hs-var hs-var">pkDirectives</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-397"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Maybe ApolloFederationConfig -&gt; Bool
</span><a href="Hasura.RQL.Types.Common.html#isApolloFedV1enabled"><span class="hs-identifier hs-var">isApolloFedV1enabled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe ApolloFederationConfig
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1
-&gt; Maybe ApolloFederationConfig
</span><a href="Hasura.RQL.Types.Table.html#_tciApolloFederationConfig"><span class="hs-identifier hs-var hs-var">_tciApolloFederationConfig</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621689489089"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; ([ColumnInfo b] -&gt; Bool) -&gt; [ColumnInfo b] -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689489087"><span class="hs-identifier hs-var">pkFields</span></a></span><span>
</span><span id="line-398"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HashMap Name (Value Void) -&gt; Directive Void
forall var. Name -&gt; HashMap Name (Value var) -&gt; Directive var
</span><span class="hs-identifier hs-var">G.Directive</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_key"><span class="hs-identifier hs-var">Name._key</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Name (Value Void) -&gt; Directive Void)
-&gt; (Text -&gt; HashMap Name (Value Void)) -&gt; Text -&gt; Directive Void
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Value Void -&gt; HashMap Name (Value Void)
forall k v. Hashable k =&gt; k -&gt; v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_fields"><span class="hs-identifier hs-var">Name._fields</span></a></span><span> </span><span class="annot"><span class="annottext">(Value Void -&gt; HashMap Name (Value Void))
-&gt; (Text -&gt; Value Void) -&gt; Text -&gt; HashMap Name (Value Void)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value Void
forall var. Text -&gt; Value var
</span><span class="hs-identifier hs-var">G.VString</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689489085"><span class="hs-identifier hs-var">pkFieldDirective</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-399"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Directive Void]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-400"></span><span>        </span><span id="local-6989586621689489071"><span class="annot"><span class="annottext">description :: Maybe Description
</span><a href="#local-6989586621689489071"><span class="hs-identifier hs-var hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description)
-&gt; (PGDescription -&gt; Text) -&gt; PGDescription -&gt; Description
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PGDescription -&gt; Text
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#getPGDescription"><span class="hs-identifier hs-var hs-var">PG.getPGDescription</span></a></span><span> </span><span class="annot"><span class="annottext">(PGDescription -&gt; Description)
-&gt; Maybe PGDescription -&gt; Maybe Description
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe PGDescription
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; Maybe PGDescription
</span><a href="Hasura.RQL.Types.Table.html#_tciDescription"><span class="hs-identifier hs-var hs-var">_tciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621689489089"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621689489068"><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621689489068"><span class="hs-identifier hs-var">fieldParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><span class="annottext">[[FieldParser n (AnnotatedField b)]]
-&gt; [FieldParser n (AnnotatedField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-403"></span><span>        </span><span class="annot"><span class="annottext">([[FieldParser n (AnnotatedField b)]]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m [[FieldParser n (AnnotatedField b)]]
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[FieldInfo b]
-&gt; (FieldInfo b -&gt; m [FieldParser n (AnnotatedField b)])
-&gt; m [[FieldParser n (AnnotatedField b)]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span>
</span><span id="line-404"></span><span>          </span><span class="annot"><span class="annottext">[FieldInfo b]
</span><a href="#local-6989586621689489092"><span class="hs-identifier hs-var">tableFields</span></a></span><span>
</span><span id="line-405"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadBuildSchema b r m n, BackendTableSelectSchema b,
 Eq (BooleanOperators b (UnpreparedValue b)),
 Eq (FunctionArgumentExp b (UnpreparedValue b))) =&gt;
SourceInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
</span><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-var">fieldSelection</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489105"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489096"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- We don't check *here* that the subselection set is non-empty,</span><span>
</span><span id="line-408"></span><span>    </span><span class="hs-comment">-- even though the GraphQL specification requires that it is (see</span><span>
</span><span id="line-409"></span><span>    </span><span class="hs-comment">-- Note [Selectability of tables]). However, the GraphQL parser</span><span>
</span><span id="line-410"></span><span>    </span><span class="hs-comment">-- enforces that a selection set, if present, is non-empty; and our</span><span>
</span><span id="line-411"></span><span>    </span><span class="hs-comment">-- parser later verifies that a selection set is present if</span><span>
</span><span id="line-412"></span><span>    </span><span class="hs-comment">-- required, meaning that not having this check here does not allow</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-comment">-- for the construction of invalid queries.</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689489102"><span class="hs-identifier hs-var">schemaKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621689489088"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b)
</span><a href="#local-6989586621689489093"><span class="hs-identifier hs-var">xRelay</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-416"></span><span>      </span><span class="hs-comment">-- A relay table</span><span>
</span><span id="line-417"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RelaySchema"><span class="hs-identifier hs-type">RelaySchema</span></a></span><span> </span><span id="local-6989586621689489064"><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
</span><a href="#local-6989586621689489064"><span class="hs-identifier hs-var">nodeBuilder</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689489063"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689489063"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689489062"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621689489062"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489061"><span class="annot"><span class="annottext">nodeIdFieldParser :: FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621689489061"><span class="hs-identifier hs-var hs-var">nodeIdFieldParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-419"></span><span>              </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n Text
-&gt; FieldParser MetadataObjId n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_id"><span class="hs-identifier hs-var">Name._id</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Text
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#identifier"><span class="hs-identifier hs-var">P.identifier</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n ()
-&gt; AnnotatedField b -&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">XRelay b
-&gt; SourceName
-&gt; TableName b
-&gt; NESeq (ColumnInfo b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
XRelay b
-&gt; SourceName
-&gt; TableName b
-&gt; PrimaryKeyColumns b
-&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFNodeId"><span class="hs-identifier hs-var">IR.AFNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621689489062"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621689489097"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489096"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689489063"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-420"></span><span>            </span><span id="local-6989586621689489055"><span class="annot"><span class="annottext">allFieldParsers :: [FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621689489055"><span class="hs-identifier hs-var hs-var">allFieldParsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621689489068"><span class="hs-identifier hs-var">fieldParsers</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621689489061"><span class="hs-identifier hs-var">nodeIdFieldParser</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-421"></span><span>        </span><span id="local-6989586621689489054"><span class="annot"><span class="annottext">Parser 'Output n NodeMap
</span><a href="#local-6989586621689489054"><span class="hs-identifier hs-var">nodeInterface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
-&gt; forall r (n :: * -&gt; *) (m :: * -&gt; *).
   MonadBuildSchemaBase r m n =&gt;
   m (Parser 'Output n NodeMap)
</span><a href="Hasura.GraphQL.Schema.Common.html#runNodeBuilder"><span class="hs-identifier hs-var hs-var">runNodeBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
</span><a href="#local-6989586621689489064"><span class="hs-identifier hs-var">nodeBuilder</span></a></span><span>
</span><span id="line-422"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-423"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [Parser 'Output n NodeMap]
-&gt; [Directive Void]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; [Parser origin 'Output m b]
-&gt; [Directive Void]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="#local-6989586621689489052"><span class="hs-identifier hs-var">selectionSetObjectWithDirective</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489094"><span class="hs-identifier hs-var">objectTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489071"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621689489055"><span class="hs-identifier hs-var">allFieldParsers</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Parser 'Output n NodeMap
</span><a href="#local-6989586621689489054"><span class="hs-identifier hs-var">nodeInterface</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621689489082"><span class="hs-identifier hs-var">pkDirectives</span></a></span><span>
</span><span id="line-424"></span><span>            </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
    -&gt; AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AnnotatedField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
-&gt; AnnotatedFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AnnotatedField b
forall (b :: BackendType) r v. Text -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFExpression"><span class="hs-identifier hs-var">IR.AFExpression</span></a></span><span>
</span><span id="line-425"></span><span>      </span><span class="annot"><span class="annottext">(SchemaKind, Maybe (NESeq (ColumnInfo b)), Maybe (XRelay b))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-426"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields b)
 -&gt; m (Parser 'Output n (AnnotatedFields b)))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-427"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [Parser MetadataObjId 'Output n Any]
-&gt; [Directive Void]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; [Parser origin 'Output m b]
-&gt; [Directive Void]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="#local-6989586621689489052"><span class="hs-identifier hs-var">selectionSetObjectWithDirective</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489094"><span class="hs-identifier hs-var">objectTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489071"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621689489068"><span class="hs-identifier hs-var">fieldParsers</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621689489082"><span class="hs-identifier hs-var">pkDirectives</span></a></span><span>
</span><span id="line-428"></span><span>            </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
    -&gt; AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AnnotatedField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
-&gt; AnnotatedFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AnnotatedField b
forall (b :: BackendType) r v. Text -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFExpression"><span class="hs-identifier hs-var">IR.AFExpression</span></a></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-430"></span><span>    </span><span id="local-6989586621689489097"><span class="annot"><span class="annottext">sourceName :: SourceName
</span><a href="#local-6989586621689489097"><span class="hs-identifier hs-var hs-var">sourceName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489105"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621689489096"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489096"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-432"></span><span>    </span><span id="local-6989586621689489089"><span class="annot"><span class="annottext">tableCoreInfo :: TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621689489089"><span class="hs-identifier hs-var hs-var">tableCoreInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489104"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-433"></span><span>    </span><span id="local-6989586621689489052"><span class="annot"><span class="annottext">selectionSetObjectWithDirective :: Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; [Parser origin 'Output m b]
-&gt; [Directive Void]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="#local-6989586621689489052"><span class="hs-identifier hs-var hs-var">selectionSetObjectWithDirective</span></a></span></span><span> </span><span id="local-6989586621689489050"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489050"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621689489049"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489049"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621689489048"><span class="annot"><span class="annottext">[FieldParser origin m a]
</span><a href="#local-6989586621689489048"><span class="hs-identifier hs-var">parsers</span></a></span></span><span> </span><span id="local-6989586621689489047"><span class="annot"><span class="annottext">[Parser origin 'Output m b]
</span><a href="#local-6989586621689489047"><span class="hs-identifier hs-var">implementsInterfaces</span></a></span></span><span> </span><span id="local-6989586621689489046"><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621689489046"><span class="hs-identifier hs-var">directives</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-434"></span><span>      </span><span class="annot"><span class="annottext">[Directive Void]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
forall origin (k :: Kind) (m :: * -&gt; *) a.
[Directive Void] -&gt; Parser origin k m a -&gt; Parser origin k m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#setParserDirectives"><span class="hs-identifier hs-var">P.setParserDirectives</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive Void]
</span><a href="#local-6989586621689489046"><span class="hs-identifier hs-var">directives</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
 -&gt; Parser
      origin 'Output m (InsOrdHashMap Name (ParsedSelection a)))
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-435"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; [Parser origin 'Output m b]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; [Parser origin 'Output m b]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetObject"><span class="hs-identifier hs-var">P.selectionSetObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489050"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689489049"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser origin m a]
</span><a href="#local-6989586621689489048"><span class="hs-identifier hs-var">parsers</span></a></span><span> </span><span class="annot"><span class="annottext">[Parser origin 'Output m b]
</span><a href="#local-6989586621689489047"><span class="hs-identifier hs-var">implementsInterfaces</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-comment">-- | List of table fields object.</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- Just a @'nonNullableObjectList' wrapper over @'tableSelectionSet'.</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- &gt; table_name: [table!]!</span><span>
</span><span id="line-440"></span><span id="local-6989586621689489900"><span id="local-6989586621689489902"><span id="local-6989586621689489903"><span id="local-6989586621689489904"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-type">tableSelectionList</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489904"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489903"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489902"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489900"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489900"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-443"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489900"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="#local-6989586621689489903"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489902"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-type">AnnotatedFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489900"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-445"></span><span id="tableSelectionList"><span class="annot"><span class="annottext">tableSelectionList :: SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var hs-var">tableSelectionList</span></a></span></span><span> </span><span id="local-6989586621689489043"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489043"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489042"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489042"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields b)
 -&gt; Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var">nonNullableObjectList</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Parser 'Output n (AnnotatedFields b))
 -&gt; Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489043"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489042"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span class="hs-comment">-- | Converts an output type parser from object_type to [object_type!]!</span><span>
</span><span id="line-449"></span><span id="local-6989586621689489627"><span id="local-6989586621689489628"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-type">nonNullableObjectList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489628"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489627"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489628"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489627"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-450"></span><span id="nonNullableObjectList"><span class="annot"><span class="annottext">nonNullableObjectList :: Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var hs-var">nonNullableObjectList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; (Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; Parser 'Output m a
-&gt; Parser 'Output m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#multiple"><span class="hs-identifier hs-var">P.multiple</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; (Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; Parser 'Output m a
-&gt; Parser 'Output m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">-- | Connection fields of a table</span><span>
</span><span id="line-454"></span><span class="hs-comment">--</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- &gt; type tableConnection{</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- &gt;   pageInfo: PageInfo!</span><span>
</span><span id="line-457"></span><span class="hs-comment">-- &gt;   edges: [tableEdge!]!</span><span>
</span><span id="line-458"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-459"></span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- &gt; type PageInfo{</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- &gt;   startCursor: String!</span><span>
</span><span id="line-462"></span><span class="hs-comment">-- &gt;   endCursor: String!</span><span>
</span><span id="line-463"></span><span class="hs-comment">-- &gt;   hasNextPage: Boolean!</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- &gt;   hasPreviousPage: Boolean!</span><span>
</span><span id="line-465"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-466"></span><span class="hs-comment">--</span><span>
</span><span id="line-467"></span><span class="hs-comment">-- &gt; type tableEdge{</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- &gt;   cursor: String!</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- &gt;   node: table!</span><span>
</span><span id="line-470"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-471"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-type">tableConnectionSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489821"><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489820"><span class="annot"><a href="#local-6989586621689489820"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489819"><span class="annot"><a href="#local-6989586621689489819"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489818"><span class="annot"><a href="#local-6989586621689489818"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489820"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489819"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489818"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-475"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><a href="#local-6989586621689489819"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489818"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionFields"><span class="hs-identifier hs-type">ConnectionFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span id="tableConnectionSelectionSet"><span class="annot"><span class="annottext">tableConnectionSelectionSet :: SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-var hs-var">tableConnectionSelectionSet</span></a></span></span><span> </span><span id="local-6989586621689489039"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489039"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689489038"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489038"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (ConnectionFields b))
-&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-478"></span><span>  </span><span id="local-6989586621689489037"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489037"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489038"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-479"></span><span>  </span><span id="local-6989586621689489036"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689489036"><span class="hs-identifier hs-var">_selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489038"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-480"></span><span>  </span><span id="local-6989586621689489035"><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
</span><a href="#local-6989586621689489035"><span class="hs-identifier hs-var">edgesParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (EdgeFields b)))
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (EdgeFields b)))
 -&gt; MaybeT m (Parser 'Output n (EdgeFields b)))
-&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
</span><a href="#local-6989586621689489034"><span class="hs-identifier hs-var">tableEdgesSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489037"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span>
</span><span id="line-481"></span><span>  </span><span class="annot"><span class="annottext">m (Parser 'Output n (ConnectionFields b))
-&gt; MaybeT m (Parser 'Output n (ConnectionFields b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Output n (ConnectionFields b))
 -&gt; MaybeT m (Parser 'Output n (ConnectionFields b)))
-&gt; m (Parser 'Output n (ConnectionFields b))
-&gt; MaybeT m (Parser 'Output n (ConnectionFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (ConnectionFields b))
-&gt; m (Parser 'Output n (ConnectionFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">tableConnectionSelectionSet</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489039"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489033"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-482"></span><span>    </span><span id="local-6989586621689489032"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489032"><span class="hs-identifier hs-var">connectionTypeName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489037"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_Connection"><span class="hs-identifier hs-var">Name._Connection</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489030"><span class="annot"><span class="annottext">pageInfo :: FieldParser
  MetadataObjId
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489030"><span class="hs-identifier hs-var hs-var">pageInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-484"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Output n PageInfoFields
-&gt; FieldParser MetadataObjId n PageInfoFields
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-485"></span><span>            </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_pageInfo"><span class="hs-identifier hs-var">Name._pageInfo</span></a></span><span>
</span><span id="line-486"></span><span>            </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-487"></span><span>            </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n PageInfoFields
</span><a href="#local-6989586621689489028"><span class="hs-identifier hs-var">pageInfoSelectionSet</span></a></span><span>
</span><span id="line-488"></span><span>            </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n PageInfoFields
-&gt; (PageInfoFields
    -&gt; ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     MetadataObjId
     n
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoFields
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
PageInfoFields -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionPageInfo"><span class="hs-identifier hs-var">IR.ConnectionPageInfo</span></a></span><span>
</span><span id="line-489"></span><span>        </span><span id="local-6989586621689489026"><span class="annot"><span class="annottext">edges :: FieldParser
  MetadataObjId
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489026"><span class="hs-identifier hs-var hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (EdgeFields b)
-&gt; FieldParser MetadataObjId n (EdgeFields b)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-491"></span><span>            </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_edges"><span class="hs-identifier hs-var">Name._edges</span></a></span><span>
</span><span id="line-492"></span><span>            </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-493"></span><span>            </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
</span><a href="#local-6989586621689489035"><span class="hs-identifier hs-var">edgesParser</span></a></span><span>
</span><span id="line-494"></span><span>            </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (EdgeFields b)
-&gt; (EdgeFields b
    -&gt; ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     MetadataObjId
     n
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EdgeFields b
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
EdgeFields b r v -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionEdges"><span class="hs-identifier hs-var">IR.ConnectionEdges</span></a></span><span>
</span><span id="line-495"></span><span>        </span><span id="local-6989586621689489023"><span class="annot"><span class="annottext">connectionDescription :: Description
</span><a href="#local-6989586621689489023"><span class="hs-identifier hs-var hs-var">connectionDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;A Relay connection object on &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689489033"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields b)
-&gt; m (Parser 'Output n (ConnectionFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (ConnectionFields b)
 -&gt; m (Parser 'Output n (ConnectionFields b)))
-&gt; Parser 'Output n (ConnectionFields b)
-&gt; m (Parser 'Output n (ConnectionFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (ConnectionFields b)
 -&gt; Parser 'Output n (ConnectionFields b))
-&gt; Parser 'Output n (ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-498"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      MetadataObjId
      n
      (ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489032"><span class="hs-identifier hs-var">connectionTypeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621689489023"><span class="hs-identifier hs-var">connectionDescription</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489030"><span class="hs-identifier hs-var">pageInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689489026"><span class="hs-identifier hs-var">edges</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-499"></span><span>          </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap
     Name
     (ParsedSelection
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; (InsOrdHashMap
      Name
      (ParsedSelection
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; ConnectionField
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; ConnectionFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionTypename"><span class="hs-identifier hs-var">IR.ConnectionTypename</span></a></span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-501"></span><span>    </span><span id="local-6989586621689489033"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621689489033"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489038"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><a href="#local-6989586621689489028"><span class="hs-identifier hs-type">pageInfoSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489818"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#PageInfoFields"><span class="hs-identifier hs-type">IR.PageInfoFields</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span id="local-6989586621689489028"><span class="annot"><span class="annottext">pageInfoSelectionSet :: Parser MetadataObjId 'Output n PageInfoFields
</span><a href="#local-6989586621689489028"><span class="hs-identifier hs-var hs-var">pageInfoSelectionSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-505"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489021"><span class="annot"><span class="annottext">startCursorField :: FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489021"><span class="hs-identifier hs-var hs-var">startCursorField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-506"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n Text
-&gt; FieldParser origin n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-507"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_startCursor"><span class="hs-identifier hs-var">Name._startCursor</span></a></span><span>
</span><span id="line-508"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-509"></span><span>              </span><span class="annot"><span class="annottext">Parser origin 'Both n Text
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-510"></span><span>              </span><span class="annot"><span class="annottext">FieldParser origin n ()
-&gt; PageInfoField -&gt; FieldParser origin n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoStartCursor"><span class="hs-identifier hs-var">IR.PageInfoStartCursor</span></a></span><span>
</span><span id="line-511"></span><span>          </span><span id="local-6989586621689489017"><span class="annot"><span class="annottext">endCursorField :: FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489017"><span class="hs-identifier hs-var hs-var">endCursorField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-512"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n Text
-&gt; FieldParser origin n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-513"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_endCursor"><span class="hs-identifier hs-var">Name._endCursor</span></a></span><span>
</span><span id="line-514"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-515"></span><span>              </span><span class="annot"><span class="annottext">Parser origin 'Both n Text
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-516"></span><span>              </span><span class="annot"><span class="annottext">FieldParser origin n ()
-&gt; PageInfoField -&gt; FieldParser origin n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoEndCursor"><span class="hs-identifier hs-var">IR.PageInfoEndCursor</span></a></span><span>
</span><span id="line-517"></span><span>          </span><span id="local-6989586621689489014"><span class="annot"><span class="annottext">hasNextPageField :: FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489014"><span class="hs-identifier hs-var hs-var">hasNextPageField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-518"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n Bool
-&gt; FieldParser origin n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-519"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_hasNextPage"><span class="hs-identifier hs-var">Name._hasNextPage</span></a></span><span>
</span><span id="line-520"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-521"></span><span>              </span><span class="annot"><span class="annottext">Parser origin 'Both n Bool
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-522"></span><span>              </span><span class="annot"><span class="annottext">FieldParser origin n ()
-&gt; PageInfoField -&gt; FieldParser origin n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoHasNextPage"><span class="hs-identifier hs-var">IR.PageInfoHasNextPage</span></a></span><span>
</span><span id="line-523"></span><span>          </span><span id="local-6989586621689489010"><span class="annot"><span class="annottext">hasPreviousPageField :: FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489010"><span class="hs-identifier hs-var hs-var">hasPreviousPageField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-524"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n Bool
-&gt; FieldParser origin n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-525"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_hasPreviousPage"><span class="hs-identifier hs-var">Name._hasPreviousPage</span></a></span><span>
</span><span id="line-526"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-527"></span><span>              </span><span class="annot"><span class="annottext">Parser origin 'Both n Bool
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-528"></span><span>              </span><span class="annot"><span class="annottext">FieldParser origin n ()
-&gt; PageInfoField -&gt; FieldParser origin n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoHasPreviousPage"><span class="hs-identifier hs-var">IR.PageInfoHasPreviousPage</span></a></span><span>
</span><span id="line-529"></span><span>          </span><span id="local-6989586621689489007"><span class="annot"><span class="annottext">allFields :: [FieldParser MetadataObjId n PageInfoField]
</span><a href="#local-6989586621689489007"><span class="hs-identifier hs-var hs-var">allFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-530"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n PageInfoField
forall origin. FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489021"><span class="hs-identifier hs-var">startCursorField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-531"></span><span>              </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n PageInfoField
forall origin. FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489017"><span class="hs-identifier hs-var">endCursorField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-532"></span><span>              </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n PageInfoField
forall origin. FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489014"><span class="hs-identifier hs-var">hasNextPageField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-533"></span><span>              </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n PageInfoField
forall origin. FieldParser origin n PageInfoField
</span><a href="#local-6989586621689489010"><span class="hs-identifier hs-var">hasPreviousPageField</span></a></span><span>
</span><span id="line-534"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-535"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n PageInfoFields
-&gt; Parser MetadataObjId 'Output n PageInfoFields
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Output n PageInfoFields
 -&gt; Parser MetadataObjId 'Output n PageInfoFields)
-&gt; Parser MetadataObjId 'Output n PageInfoFields
-&gt; Parser MetadataObjId 'Output n PageInfoFields
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-536"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser MetadataObjId n PageInfoField]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap Name (ParsedSelection PageInfoField))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_PageInfo"><span class="hs-identifier hs-var">Name._PageInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser MetadataObjId n PageInfoField]
</span><a href="#local-6989586621689489007"><span class="hs-identifier hs-var">allFields</span></a></span><span>
</span><span id="line-537"></span><span>              </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap Name (ParsedSelection PageInfoField))
-&gt; (InsOrdHashMap Name (ParsedSelection PageInfoField)
    -&gt; PageInfoFields)
-&gt; Parser MetadataObjId 'Output n PageInfoFields
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; PageInfoField)
-&gt; InsOrdHashMap Name (ParsedSelection PageInfoField)
-&gt; PageInfoFields
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoTypename"><span class="hs-identifier hs-var">IR.PageInfoTypename</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>    </span><span class="annot"><a href="#local-6989586621689489034"><span class="hs-identifier hs-type">tableEdgesSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-540"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621689489819"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489818"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#EdgeFields"><span class="hs-identifier hs-type">EdgeFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489821"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>    </span><span id="local-6989586621689489034"><span class="annot"><span class="annottext">tableEdgesSelectionSet :: Name -&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
</span><a href="#local-6989586621689489034"><span class="hs-identifier hs-var hs-var">tableEdgesSelectionSet</span></a></span></span><span> </span><span id="local-6989586621689489004"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489004"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (EdgeFields b))
-&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-542"></span><span>      </span><span id="local-6989586621689489003"><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489003"><span class="hs-identifier hs-var">edgeNodeParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser MetadataObjId 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser MetadataObjId 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser MetadataObjId 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Output n (AnnotatedFields b)
 -&gt; Parser MetadataObjId 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n (AnnotatedFields b)
-&gt; Parser MetadataObjId 'Output n (AnnotatedFields b)
forall (m :: * -&gt; *) origin a.
Parser origin 'Output m a -&gt; Parser origin 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b))
 -&gt; Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (Maybe (Parser MetadataObjId 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689489039"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689489038"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-543"></span><span>      </span><span id="local-6989586621689489002"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489002"><span class="hs-identifier hs-var">edgesType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489004"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_Edge"><span class="hs-identifier hs-var">Name._Edge</span></a></span><span>
</span><span id="line-544"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689489000"><span class="annot"><span class="annottext">cursor :: FieldParser origin n (EdgeField b r v)
</span><a href="#local-6989586621689489000"><span class="hs-identifier hs-var hs-var">cursor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n Text
-&gt; FieldParser origin n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-546"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_cursor"><span class="hs-identifier hs-var">Name._cursor</span></a></span><span>
</span><span id="line-547"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-548"></span><span>              </span><span class="annot"><span class="annottext">Parser origin 'Both n Text
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-549"></span><span>              </span><span class="annot"><span class="annottext">FieldParser origin n ()
-&gt; EdgeField b r v -&gt; FieldParser origin n (EdgeField b r v)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EdgeField b r v
forall (b :: BackendType) r v. EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeCursor"><span class="hs-identifier hs-var">IR.EdgeCursor</span></a></span><span>
</span><span id="line-550"></span><span>          </span><span id="local-6989586621689488997"><span class="annot"><span class="annottext">edgeNode :: FieldParser
  MetadataObjId
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689488997"><span class="hs-identifier hs-var hs-var">edgeNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Output n (AnnotatedFields b)
-&gt; FieldParser MetadataObjId n (AnnotatedFields b)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-552"></span><span>              </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_node"><span class="hs-identifier hs-var">Name._node</span></a></span><span>
</span><span id="line-553"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-554"></span><span>              </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689489003"><span class="hs-identifier hs-var">edgeNodeParser</span></a></span><span>
</span><span id="line-555"></span><span>              </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (AnnotatedFields b)
-&gt; (AnnotatedFields b
    -&gt; EdgeField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     MetadataObjId
     n
     (EdgeField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
-&gt; EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. AnnFieldsG b r v -&gt; EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeNode"><span class="hs-identifier hs-var">IR.EdgeNode</span></a></span><span>
</span><span id="line-556"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (EdgeFields b)
 -&gt; MaybeT m (Parser 'Output n (EdgeFields b)))
-&gt; Parser 'Output n (EdgeFields b)
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-557"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b) -&gt; Parser 'Output n (EdgeFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var">nonNullableObjectList</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (EdgeFields b)
 -&gt; Parser 'Output n (EdgeFields b))
-&gt; Parser 'Output n (EdgeFields b)
-&gt; Parser 'Output n (EdgeFields b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-558"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      MetadataObjId
      n
      (EdgeField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (EdgeField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689489002"><span class="hs-identifier hs-var">edgesType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall origin (b :: BackendType) r v.
FieldParser origin n (EdgeField b r v)
</span><a href="#local-6989586621689489000"><span class="hs-identifier hs-var">cursor</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621689488997"><span class="hs-identifier hs-var">edgeNode</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-559"></span><span>            </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap
     Name
     (ParsedSelection
        (EdgeField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; (InsOrdHashMap
      Name
      (ParsedSelection
         (EdgeField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; EdgeFields b)
-&gt; Parser 'Output n (EdgeFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; EdgeField
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (EdgeField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; EdgeFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeTypename"><span class="hs-identifier hs-var">IR.EdgeTypename</span></a></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- Components</span><span>
</span><span id="line-563"></span><span class="hs-comment">--</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- Those parsers are sub-components of those top-level parsers.</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="hs-comment">-- | Arguments for a table selection. Default implementation for BackendSchema.</span><span>
</span><span id="line-567"></span><span class="hs-comment">--</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-569"></span><span class="hs-comment">-- &gt; limit: Int</span><span>
</span><span id="line-570"></span><span class="hs-comment">-- &gt; offset: Int</span><span>
</span><span id="line-571"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-572"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-573"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier hs-type">defaultTableArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689488993"><span class="annot"><a href="#local-6989586621689488993"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689488992"><span class="annot"><a href="#local-6989586621689488992"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689488991"><span class="annot"><a href="#local-6989586621689488991"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689488990"><span class="annot"><a href="#local-6989586621689488990"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-575"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488993"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488992"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488991"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488990"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-576"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488993"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-577"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488993"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-578"></span><span>  </span><span class="annot"><a href="#local-6989586621689488991"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488990"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier hs-type">SelectArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689488993"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span id="defaultTableArgs"><span class="annot"><span class="annottext">defaultTableArgs :: SourceInfo b
-&gt; TableInfo b -&gt; m (InputFieldsParser n (SelectArgs b))
</span><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier hs-var hs-var">defaultTableArgs</span></a></span></span><span> </span><span id="local-6989586621689488989"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488989"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488988"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488988"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>  </span><span id="local-6989586621689488987"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621689488987"><span class="hs-identifier hs-var">whereParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var">tableWhereArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488989"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488988"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-581"></span><span>  </span><span id="local-6989586621689488986"><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488986"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var">tableOrderByArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488989"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488988"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-582"></span><span>  </span><span id="local-6989586621689488985"><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621689488985"><span class="hs-identifier hs-var">distinctParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        MetadataObjId n (Maybe (NonEmpty (Column b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var">tableDistinctArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488989"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488988"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488984"><span class="annot"><span class="annottext">result :: InputFieldsParser n (SelectArgs b)
</span><a href="#local-6989586621689488984"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-584"></span><span>        </span><span id="local-6989586621689488983"><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488983"><span class="hs-identifier hs-var">whereArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621689488987"><span class="hs-identifier hs-var">whereParser</span></a></span><span>
</span><span id="line-585"></span><span>        </span><span id="local-6989586621689488982"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488982"><span class="hs-identifier hs-var">orderByArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488986"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-586"></span><span>        </span><span id="local-6989586621689488981"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621689488981"><span class="hs-identifier hs-var">limitArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int)
forall (n :: * -&gt; *).
MonadParse n =&gt;
InputFieldsParser n (Maybe Int)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-var">tableLimitArg</span></a></span><span>
</span><span id="line-587"></span><span>        </span><span id="local-6989586621689488980"><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621689488980"><span class="hs-identifier hs-var">offsetArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int64)
forall (n :: * -&gt; *).
MonadParse n =&gt;
InputFieldsParser n (Maybe Int64)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-var">tableOffsetArg</span></a></span><span>
</span><span id="line-588"></span><span>        </span><span id="local-6989586621689488979"><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621689488979"><span class="hs-identifier hs-var">distinctArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621689488985"><span class="hs-identifier hs-var">distinctParser</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-590"></span><span>          </span><span class="annot"><span class="annottext">SelectArgs :: forall (b :: BackendType) v.
Maybe (AnnBoolExp b v)
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgsG b v
</span><a href="Hasura.RQL.IR.Select.html#SelectArgs"><span class="hs-identifier hs-type">IR.SelectArgs</span></a></span><span>
</span><span id="line-591"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_saWhere:SelectArgs :: Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saWhere%3ASelectArgs"><span class="hs-identifier hs-var">IR._saWhere</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488983"><span class="hs-identifier hs-var">whereArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-592"></span><span>              </span><span class="annot"><span class="annottext">$sel:_saOrderBy:SelectArgs :: Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saOrderBy%3ASelectArgs"><span class="hs-identifier hs-var">IR._saOrderBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488982"><span class="hs-identifier hs-var">orderByArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-593"></span><span>              </span><span class="annot"><span class="annottext">$sel:_saLimit:SelectArgs :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saLimit%3ASelectArgs"><span class="hs-identifier hs-var">IR._saLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621689488981"><span class="hs-identifier hs-var">limitArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-594"></span><span>              </span><span class="annot"><span class="annottext">$sel:_saOffset:SelectArgs :: Maybe Int64
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saOffset%3ASelectArgs"><span class="hs-identifier hs-var">IR._saOffset</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621689488980"><span class="hs-identifier hs-var">offsetArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-595"></span><span>              </span><span class="annot"><span class="annottext">$sel:_saDistinct:SelectArgs :: Maybe (NonEmpty (Column b))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saDistinct%3ASelectArgs"><span class="hs-identifier hs-var">IR._saDistinct</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621689488979"><span class="hs-identifier hs-var">distinctArg</span></a></span><span>
</span><span id="line-596"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-597"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
-&gt; m (InputFieldsParser n (SelectArgs b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (SelectArgs b)
 -&gt; m (InputFieldsParser n (SelectArgs b)))
-&gt; InputFieldsParser n (SelectArgs b)
-&gt; m (InputFieldsParser n (SelectArgs b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
</span><a href="#local-6989586621689488984"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
-&gt; (SelectArgs b -&gt; n (SelectArgs b))
-&gt; InputFieldsParser n (SelectArgs b)
forall (m :: * -&gt; *) origin a b.
Monad m =&gt;
InputFieldsParser origin m a
-&gt; (a -&gt; m b) -&gt; InputFieldsParser origin m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488972"><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689488972"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-599"></span><span>      </span><span class="annot"><span class="annottext">Maybe (n ()) -&gt; n ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><span class="hs-identifier hs-var">sequence_</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-600"></span><span>        </span><span id="local-6989586621689488970"><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621689488970"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (b :: BackendType) v.
SelectArgsG b v -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saOrderBy%3ASelectArgs"><span class="hs-identifier hs-var hs-var">IR._saOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689488972"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-601"></span><span>        </span><span id="local-6989586621689488969"><span class="annot"><span class="annottext">NonEmpty (Column b)
</span><a href="#local-6989586621689488969"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SelectArgs b -&gt; Maybe (NonEmpty (Column b))
forall (b :: BackendType) v.
SelectArgsG b v -&gt; Maybe (NonEmpty (Column b))
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_saDistinct%3ASelectArgs"><span class="hs-identifier hs-var hs-var">IR._saDistinct</span></a></span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689488972"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-602"></span><span>        </span><span class="annot"><span class="annottext">n () -&gt; Maybe (n ())
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(n () -&gt; Maybe (n ())) -&gt; n () -&gt; Maybe (n ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; NonEmpty (Column b) -&gt; n ()
forall (t :: * -&gt; *) (b :: BackendType) (f :: * -&gt; *)
       (b :: BackendType) v.
(Foldable t, Eq (Column b), MonadParse f) =&gt;
NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; t (Column b) -&gt; f ()
</span><a href="#local-6989586621689488968"><span class="hs-identifier hs-var">validateArgs</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621689488970"><span class="hs-identifier hs-var">orderBy</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Column b)
</span><a href="#local-6989586621689488969"><span class="hs-identifier hs-var">distinct</span></a></span><span>
</span><span id="line-603"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621689488972"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>    </span><span id="local-6989586621689488968"><span class="annot"><span class="annottext">validateArgs :: NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; t (Column b) -&gt; f ()
</span><a href="#local-6989586621689488968"><span class="hs-identifier hs-var hs-var">validateArgs</span></a></span></span><span> </span><span id="local-6989586621689488967"><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
</span><a href="#local-6989586621689488967"><span class="hs-identifier hs-var">orderByCols</span></a></span></span><span> </span><span id="local-6989586621689488966"><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621689488966"><span class="hs-identifier hs-var">distinctCols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-606"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488965"><span class="annot"><span class="annottext">colsLen :: Int
</span><a href="#local-6989586621689488965"><span class="hs-identifier hs-var hs-var">colsLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t (Column b) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621689488966"><span class="hs-identifier hs-var">distinctCols</span></a></span><span>
</span><span id="line-607"></span><span>          </span><span id="local-6989586621689488963"><span class="annot"><span class="annottext">initOrderBys :: [OrderByItemG b (AnnotatedOrderByElement b v)]
</span><a href="#local-6989586621689488963"><span class="hs-identifier hs-var hs-var">initOrderBys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621689488965"><span class="hs-identifier hs-var">colsLen</span></a></span><span> </span><span class="annot"><span class="annottext">([OrderByItemG b (AnnotatedOrderByElement b v)]
 -&gt; [OrderByItemG b (AnnotatedOrderByElement b v)])
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
</span><a href="#local-6989586621689488967"><span class="hs-identifier hs-var">orderByCols</span></a></span><span>
</span><span id="line-608"></span><span>          </span><span id="local-6989586621689488960"><span class="annot"><span class="annottext">initOrdByCols :: [Column b]
</span><a href="#local-6989586621689488960"><span class="hs-identifier hs-var hs-var">initOrdByCols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
 -&gt; [OrderByItemG b (AnnotatedOrderByElement b v)] -&gt; [Column b])
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; (OrderByItemG b (AnnotatedOrderByElement b v)
    -&gt; Maybe (Column b))
-&gt; [Column b]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)] -&gt; [Column b]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">[OrderByItemG b (AnnotatedOrderByElement b v)]
</span><a href="#local-6989586621689488963"><span class="hs-identifier hs-var">initOrderBys</span></a></span><span> </span><span class="annot"><span class="annottext">((OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
 -&gt; [Column b])
-&gt; (OrderByItemG b (AnnotatedOrderByElement b v)
    -&gt; Maybe (Column b))
-&gt; [Column b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488957"><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
</span><a href="#local-6989586621689488957"><span class="hs-identifier hs-var">ob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-609"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) a. OrderByItemG b a -&gt; a
</span><a href="Hasura.RQL.IR.OrderBy.html#obiColumn"><span class="hs-identifier hs-var hs-var">IR.obiColumn</span></a></span><span> </span><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
</span><a href="#local-6989586621689488957"><span class="hs-identifier hs-var">ob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-610"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621689488954"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488954"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Maybe (Column b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Maybe (Column b)) -&gt; Column b -&gt; Maybe (Column b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488954"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-611"></span><span>              </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b v
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Column b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-612"></span><span>          </span><span id="local-6989586621689488953"><span class="annot"><span class="annottext">isValid :: Bool
</span><a href="#local-6989586621689488953"><span class="hs-identifier hs-var hs-var">isValid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-613"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621689488965"><span class="hs-identifier hs-var">colsLen</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Column b] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621689488960"><span class="hs-identifier hs-var">initOrdByCols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Bool) -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column b -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621689488960"><span class="hs-identifier hs-var">initOrdByCols</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t (Column b) -&gt; [Column b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621689488966"><span class="hs-identifier hs-var">distinctCols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-615"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; f () -&gt; f ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621689488953"><span class="hs-identifier hs-var">isValid</span></a></span><span> </span><span class="annot"><span class="annottext">(f () -&gt; f ()) -&gt; f () -&gt; f ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-616"></span><span>        </span><span class="annot"><span class="annottext">ErrorMessage -&gt; f ()
forall (m :: * -&gt; *) a. MonadParse m =&gt; ErrorMessage -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span>
</span><span id="line-617"></span><span>          </span><span class="annot"><span class="annottext">ErrorMessage
</span><span class="hs-string">&quot;\&quot;distinct_on\&quot; columns must match initial \&quot;order_by\&quot; columns&quot;</span></span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span class="hs-comment">-- | Argument to filter rows returned from table selection</span><span>
</span><span id="line-620"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-621"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-type">tableWhereArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489596"><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489595"><span class="annot"><a href="#local-6989586621689489595"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489594"><span class="annot"><a href="#local-6989586621689489594"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489593"><span class="annot"><a href="#local-6989586621689489593"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-623"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489595"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489594"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489593"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-624"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-625"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-626"></span><span>  </span><span class="annot"><a href="#local-6989586621689489594"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489593"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">IR.AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489596"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span id="tableWhereArg"><span class="annot"><span class="annottext">tableWhereArg :: SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var hs-var">tableWhereArg</span></a></span></span><span> </span><span id="local-6989586621689488949"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488949"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488948"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488948"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-628"></span><span>  </span><span id="local-6989586621689488947"><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488947"><span class="hs-identifier hs-var">boolExpParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (Parser 'Input n (AnnBoolExp b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (Parser 'Input n (AnnBoolExp b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.BoolExp.html#boolExp"><span class="hs-identifier hs-var">boolExp</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488949"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488948"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-630"></span><span>    </span><span class="annot"><span class="annottext">(Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))
 -&gt; Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; Maybe (AnnBoolExp b (UnpreparedValue b))
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
 -&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-631"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser
     MetadataObjId 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488944"><span class="hs-identifier hs-var">whereName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488943"><span class="hs-identifier hs-var">whereDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   MetadataObjId 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
 -&gt; InputFieldsParser
      MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))))
-&gt; Parser
     MetadataObjId 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-632"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
-&gt; Parser
     MetadataObjId 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488947"><span class="hs-identifier hs-var">boolExpParser</span></a></span><span>
</span><span id="line-633"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-634"></span><span>    </span><span id="local-6989586621689488944"><span class="annot"><span class="annottext">whereName :: Name
</span><a href="#local-6989586621689488944"><span class="hs-identifier hs-var hs-var">whereName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_where"><span class="hs-identifier hs-var">Name._where</span></a></span><span>
</span><span id="line-635"></span><span>    </span><span id="local-6989586621689488943"><span class="annot"><span class="annottext">whereDesc :: Maybe Description
</span><a href="#local-6989586621689488943"><span class="hs-identifier hs-var hs-var">whereDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;filter the rows returned&quot;</span></span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span class="hs-comment">-- | Argument to sort rows returned from table selection</span><span>
</span><span id="line-638"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-639"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-type">tableOrderByArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489591"><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489590"><span class="annot"><a href="#local-6989586621689489590"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489589"><span class="annot"><a href="#local-6989586621689489589"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489588"><span class="annot"><a href="#local-6989586621689489588"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-641"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489590"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489589"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489588"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-642"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-643"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-644"></span><span>  </span><span class="annot"><a href="#local-6989586621689489589"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489588"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489591"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span id="tableOrderByArg"><span class="annot"><span class="annottext">tableOrderByArg :: SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var hs-var">tableOrderByArg</span></a></span></span><span> </span><span id="local-6989586621689488940"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488940"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488939"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488939"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-646"></span><span>  </span><span id="local-6989586621689488938"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488938"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-647"></span><span>  </span><span id="local-6989586621689488937"><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
</span><a href="#local-6989586621689488937"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (Parser
        'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)])
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (Parser
        'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)])
</span><a href="Hasura.GraphQL.Schema.OrderBy.html#orderByExp"><span class="hs-identifier hs-var">orderByExp</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488940"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488939"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488935"><span class="annot"><span class="annottext">orderByName :: Name
</span><a href="#local-6989586621689488935"><span class="hs-identifier hs-var hs-var">orderByName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseCust"><span class="hs-identifier hs-var">applyFieldNameCaseCust</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488938"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_order_by"><span class="hs-identifier hs-var">Name._order_by</span></a></span><span>
</span><span id="line-649"></span><span>      </span><span id="local-6989586621689488932"><span class="annot"><span class="annottext">orderByDesc :: Maybe Description
</span><a href="#local-6989586621689488932"><span class="hs-identifier hs-var hs-var">orderByDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;sort the rows by one or more columns&quot;</span></span><span>
</span><span id="line-650"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
 -&gt; m (InputFieldsParser
         n
         (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))))
-&gt; InputFieldsParser
     n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-651"></span><span>    </span><span id="local-6989586621689488931"><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
</span><a href="#local-6989586621689488931"><span class="hs-identifier hs-var">maybeOrderByExps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-652"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
 -&gt; Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   MetadataObjId
   n
   (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
 -&gt; InputFieldsParser
      MetadataObjId
      n
      (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-653"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser
     MetadataObjId
     'Input
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488935"><span class="hs-identifier hs-var">orderByName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488932"><span class="hs-identifier hs-var">orderByDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   MetadataObjId
   'Input
   n
   (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
 -&gt; InputFieldsParser
      MetadataObjId
      n
      (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])))
-&gt; Parser
     MetadataObjId
     'Input
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Input
  n
  [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Parser
     MetadataObjId
     'Input
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   MetadataObjId
   'Input
   n
   [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
 -&gt; Parser
      MetadataObjId
      'Input
      n
      (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; Parser
     MetadataObjId
     'Input
     n
     [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Parser
     MetadataObjId
     'Input
     n
     (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
-&gt; Parser
     MetadataObjId
     'Input
     n
     [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m [a]
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#list"><span class="hs-identifier hs-var">P.list</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
</span><a href="#local-6989586621689488937"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-654"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
</span><a href="#local-6989586621689488931"><span class="hs-identifier hs-var">maybeOrderByExps</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; ([[AnnotatedOrderByItemG b (UnpreparedValue b)]]
    -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b (UnpreparedValue b)]
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">([AnnotatedOrderByItemG b (UnpreparedValue b)]
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; ([[AnnotatedOrderByItemG b (UnpreparedValue b)]]
    -&gt; [AnnotatedOrderByItemG b (UnpreparedValue b)])
-&gt; [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; [AnnotatedOrderByItemG b (UnpreparedValue b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="hs-comment">-- | Argument to distinct select on columns returned from table selection</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-658"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-type">tableDistinctArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489587"><span class="annot"><a href="#local-6989586621689489587"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489586"><span class="annot"><a href="#local-6989586621689489586"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489585"><span class="annot"><a href="#local-6989586621689489585"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489584"><span class="annot"><a href="#local-6989586621689489584"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-660"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489587"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489586"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489585"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489584"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489587"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-662"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489587"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-663"></span><span>  </span><span class="annot"><a href="#local-6989586621689489585"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489584"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489587"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span id="tableDistinctArg"><span class="annot"><span class="annottext">tableDistinctArg :: SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var hs-var">tableDistinctArg</span></a></span></span><span> </span><span id="local-6989586621689488928"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488928"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488927"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488927"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-665"></span><span>  </span><span id="local-6989586621689488926"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488926"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-666"></span><span>  </span><span id="local-6989586621689488925"><span class="annot"><span class="annottext">Maybe (Parser MetadataObjId 'Both n (Column b))
</span><a href="#local-6989586621689488925"><span class="hs-identifier hs-var">columnsEnum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (Maybe (Parser MetadataObjId 'Both n (Column b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumnsEnum"><span class="hs-identifier hs-var">tableSelectColumnsEnum</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488928"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488927"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-667"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488923"><span class="annot"><span class="annottext">distinctOnName :: Name
</span><a href="#local-6989586621689488923"><span class="hs-identifier hs-var hs-var">distinctOnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseCust"><span class="hs-identifier hs-var">applyFieldNameCaseCust</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488926"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_distinct_on"><span class="hs-identifier hs-var">Name._distinct_on</span></a></span><span>
</span><span id="line-668"></span><span>      </span><span id="local-6989586621689488921"><span class="annot"><span class="annottext">distinctOnDesc :: Maybe Description
</span><a href="#local-6989586621689488921"><span class="hs-identifier hs-var hs-var">distinctOnDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;distinct select on columns&quot;</span></span><span>
</span><span id="line-669"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (NonEmpty (Column b)))
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-670"></span><span>    </span><span id="local-6989586621689488920"><span class="annot"><span class="annottext">Maybe [Column b]
</span><a href="#local-6989586621689488920"><span class="hs-identifier hs-var">maybeDistinctOnColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-671"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Maybe [Column b]) -&gt; Maybe [Column b]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe [Column b]) -&gt; Maybe [Column b])
-&gt; (Maybe (Maybe (Maybe [Column b])) -&gt; Maybe (Maybe [Column b]))
-&gt; Maybe (Maybe (Maybe [Column b]))
-&gt; Maybe [Column b]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (Maybe [Column b])) -&gt; Maybe (Maybe [Column b])
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span>
</span><span id="line-672"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (Maybe (Maybe [Column b])) -&gt; Maybe [Column b])
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (Maybe [Column b])))
-&gt; InputFieldsParser MetadataObjId n (Maybe [Column b])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Parser MetadataObjId 'Both n (Column b))
-&gt; (Parser MetadataObjId 'Both n (Column b)
    -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe [Column b])))
-&gt; InputFieldsParser
     MetadataObjId n (Maybe (Maybe (Maybe [Column b])))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span>
</span><span id="line-673"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Parser MetadataObjId 'Both n (Column b))
</span><a href="#local-6989586621689488925"><span class="hs-identifier hs-var">columnsEnum</span></a></span><span>
</span><span id="line-674"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe [Column b])
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe [Column b]))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488923"><span class="hs-identifier hs-var">distinctOnName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488921"><span class="hs-identifier hs-var">distinctOnDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n (Maybe [Column b])
 -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe [Column b])))
-&gt; (Parser MetadataObjId 'Both n (Column b)
    -&gt; Parser MetadataObjId 'Both n (Maybe [Column b]))
-&gt; Parser MetadataObjId 'Both n (Column b)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe [Column b]))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n [Column b]
-&gt; Parser MetadataObjId 'Both n (Maybe [Column b])
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n [Column b]
 -&gt; Parser MetadataObjId 'Both n (Maybe [Column b]))
-&gt; (Parser MetadataObjId 'Both n (Column b)
    -&gt; Parser MetadataObjId 'Both n [Column b])
-&gt; Parser MetadataObjId 'Both n (Column b)
-&gt; Parser MetadataObjId 'Both n (Maybe [Column b])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n (Column b)
-&gt; Parser MetadataObjId 'Both n [Column b]
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m [a]
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#list"><span class="hs-identifier hs-var">P.list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Maybe [Column b]
</span><a href="#local-6989586621689488920"><span class="hs-identifier hs-var">maybeDistinctOnColumns</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Column b]
-&gt; ([Column b] -&gt; Maybe (NonEmpty (Column b)))
-&gt; Maybe (NonEmpty (Column b))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Column b] -&gt; Maybe (NonEmpty (Column b))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span class="hs-comment">-- | Argument to limit rows returned from table selection</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- &gt; limit: NonNegativeInt</span><span>
</span><span id="line-679"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-type">tableLimitArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489583"><span class="annot"><a href="#local-6989586621689489583"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-681"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489583"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-682"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489583"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span id="tableLimitArg"><span class="annot"><span class="annottext">tableLimitArg :: InputFieldsParser n (Maybe Int)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-var hs-var">tableLimitArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-684"></span><span>  </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int32 -&gt; Int) -&gt; Maybe Int32 -&gt; Maybe Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int32 -&gt; Maybe Int)
-&gt; (Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; Maybe (Maybe Int32)
-&gt; Maybe Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser MetadataObjId n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser n (Maybe Int))
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-685"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe Int32)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488919"><span class="hs-identifier hs-var">limitName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488918"><span class="hs-identifier hs-var">limitDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n (Maybe Int32)
 -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int32)))
-&gt; Parser MetadataObjId 'Both n (Maybe Int32)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-686"></span><span>      </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Int32
-&gt; Parser MetadataObjId 'Both n (Maybe Int32)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Int32
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-688"></span><span>    </span><span id="local-6989586621689488919"><span class="annot"><span class="annottext">limitName :: Name
</span><a href="#local-6989586621689488919"><span class="hs-identifier hs-var hs-var">limitName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_limit"><span class="hs-identifier hs-var">Name._limit</span></a></span><span>
</span><span id="line-689"></span><span>    </span><span id="local-6989586621689488918"><span class="annot"><span class="annottext">limitDesc :: Maybe Description
</span><a href="#local-6989586621689488918"><span class="hs-identifier hs-var hs-var">limitDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;limit the number of rows returned&quot;</span></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="hs-comment">-- | Argument to skip some rows, in conjunction with order_by</span><span>
</span><span id="line-692"></span><span class="hs-comment">-- &gt; offset: BigInt</span><span>
</span><span id="line-693"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-type">tableOffsetArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489582"><span class="annot"><a href="#local-6989586621689489582"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-695"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489582"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-696"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489582"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span id="tableOffsetArg"><span class="annot"><span class="annottext">tableOffsetArg :: InputFieldsParser n (Maybe Int64)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-var hs-var">tableOffsetArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><span class="annottext">(Maybe (Maybe Int64) -&gt; Maybe Int64)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int64))
-&gt; InputFieldsParser n (Maybe Int64)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int64) -&gt; Maybe Int64
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser MetadataObjId n (Maybe (Maybe Int64))
 -&gt; InputFieldsParser n (Maybe Int64))
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int64))
-&gt; InputFieldsParser n (Maybe Int64)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe Int64)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int64))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488915"><span class="hs-identifier hs-var">offsetName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488914"><span class="hs-identifier hs-var">offsetDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n (Maybe Int64)
 -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int64)))
-&gt; Parser MetadataObjId 'Both n (Maybe Int64)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe Int64))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-700"></span><span>      </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Int64
-&gt; Parser MetadataObjId 'Both n (Maybe Int64)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Int64
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Int64
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#bigInt"><span class="hs-identifier hs-var">P.bigInt</span></a></span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-702"></span><span>    </span><span id="local-6989586621689488915"><span class="annot"><span class="annottext">offsetName :: Name
</span><a href="#local-6989586621689488915"><span class="hs-identifier hs-var hs-var">offsetName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_offset"><span class="hs-identifier hs-var">Name._offset</span></a></span><span>
</span><span id="line-703"></span><span>    </span><span id="local-6989586621689488914"><span class="annot"><span class="annottext">offsetDesc :: Maybe Description
</span><a href="#local-6989586621689488914"><span class="hs-identifier hs-var hs-var">offsetDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;skip the first n rows. Use only with order_by&quot;</span></span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="hs-comment">-- | Arguments for a table connection selection</span><span>
</span><span id="line-706"></span><span class="hs-comment">--</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- &gt; first: Int</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- &gt; last: Int</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- &gt; before: String</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- &gt; after: String</span><span>
</span><span id="line-714"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-type">tableConnectionArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489811"><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489810"><span class="annot"><a href="#local-6989586621689489810"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489809"><span class="annot"><a href="#local-6989586621689489809"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489808"><span class="annot"><a href="#local-6989586621689489808"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-716"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489810"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489809"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489808"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-717"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-718"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-719"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><a href="#local-6989586621689489809"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-721"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span>
</span><span id="line-722"></span><span>        </span><span class="annot"><a href="#local-6989586621689489808"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-723"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier hs-type">SelectArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-724"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-type">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-725"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSlice"><span class="hs-identifier hs-type">IR.ConnectionSlice</span></a></span><span>
</span><span id="line-726"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span id="tableConnectionArgs"><span class="annot"><span class="annottext">tableConnectionArgs :: PrimaryKeyColumns b
-&gt; SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-var hs-var">tableConnectionArgs</span></a></span></span><span> </span><span id="local-6989586621689488911"><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689488911"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span id="local-6989586621689488910"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488910"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488909"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488909"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-729"></span><span>  </span><span id="local-6989586621689488908"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621689488908"><span class="hs-identifier hs-var">whereParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var">tableWhereArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488910"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488909"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-730"></span><span>  </span><span id="local-6989586621689488907"><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488907"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
 -&gt; NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
forall v.
NonEmpty (AnnotatedOrderByItemG b v)
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621689488906"><span class="hs-identifier hs-var">appendPrimaryKeyOrderBy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   MetadataObjId
   n
   (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
 -&gt; InputFieldsParser
      MetadataObjId
      n
      (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        MetadataObjId
        n
        (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        MetadataObjId
        n
        (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        MetadataObjId
        n
        (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var">tableOrderByArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488910"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488909"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-731"></span><span>  </span><span id="local-6989586621689488905"><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621689488905"><span class="hs-identifier hs-var">distinctParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        MetadataObjId n (Maybe (NonEmpty (Column b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var">tableDistinctArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488910"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488909"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-732"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488904"><span class="annot"><span class="annottext">maybeFirst :: InputFieldsParser origin n (Maybe Int32)
</span><a href="#local-6989586621689488904"><span class="hs-identifier hs-var hs-var">maybeFirst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe Int32)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser origin n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser origin n (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe Int32)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n (Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_first"><span class="hs-identifier hs-var">Name._first</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser origin 'Both n (Maybe Int32)
 -&gt; InputFieldsParser origin n (Maybe (Maybe Int32)))
-&gt; Parser origin 'Both n (Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser origin 'Both n Int32 -&gt; Parser origin 'Both n (Maybe Int32)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser origin 'Both n Int32
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-733"></span><span>      </span><span id="local-6989586621689488902"><span class="annot"><span class="annottext">maybeLast :: InputFieldsParser origin n (Maybe Int32)
</span><a href="#local-6989586621689488902"><span class="hs-identifier hs-var hs-var">maybeLast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe Int32)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser origin n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser origin n (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
-&gt; InputFieldsParser origin n (Maybe Int32)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser origin 'Both n (Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_last"><span class="hs-identifier hs-var">Name._last</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser origin 'Both n (Maybe Int32)
 -&gt; InputFieldsParser origin n (Maybe (Maybe Int32)))
-&gt; Parser origin 'Both n (Maybe Int32)
-&gt; InputFieldsParser origin n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser origin 'Both n Int32 -&gt; Parser origin 'Both n (Maybe Int32)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser origin 'Both n Int32
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-734"></span><span>      </span><span id="local-6989586621689488900"><span class="annot"><span class="annottext">maybeAfter :: InputFieldsParser MetadataObjId n (Maybe ByteString)
</span><a href="#local-6989586621689488900"><span class="hs-identifier hs-var hs-var">maybeAfter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe ByteString) -&gt; Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe ByteString) -&gt; Maybe ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
 -&gt; InputFieldsParser MetadataObjId n (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_after"><span class="hs-identifier hs-var">Name._after</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n (Maybe ByteString)
 -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString)))
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n ByteString
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n ByteString
forall origin. Parser origin 'Both n ByteString
</span><a href="#local-6989586621689488898"><span class="hs-identifier hs-var">base64Text</span></a></span><span>
</span><span id="line-735"></span><span>      </span><span id="local-6989586621689488897"><span class="annot"><span class="annottext">maybeBefore :: InputFieldsParser MetadataObjId n (Maybe ByteString)
</span><a href="#local-6989586621689488897"><span class="hs-identifier hs-var hs-var">maybeBefore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe ByteString) -&gt; Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe ByteString) -&gt; Maybe ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
 -&gt; InputFieldsParser MetadataObjId n (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_before"><span class="hs-identifier hs-var">Name._before</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser MetadataObjId 'Both n (Maybe ByteString)
 -&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString)))
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
-&gt; InputFieldsParser MetadataObjId n (Maybe (Maybe ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n ByteString
-&gt; Parser MetadataObjId 'Both n (Maybe ByteString)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n ByteString
forall origin. Parser origin 'Both n ByteString
</span><a href="#local-6989586621689488898"><span class="hs-identifier hs-var">base64Text</span></a></span><span>
</span><span id="line-736"></span><span>      </span><span id="local-6989586621689488895"><span class="annot"><span class="annottext">firstAndLast :: InputFieldsParser MetadataObjId n (Maybe Int32, Maybe Int32)
</span><a href="#local-6989586621689488895"><span class="hs-identifier hs-var hs-var">firstAndLast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Int32 -&gt; Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
-&gt; InputFieldsParser MetadataObjId n (Maybe Int32)
-&gt; InputFieldsParser
     MetadataObjId n (Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe Int32)
forall origin. InputFieldsParser origin n (Maybe Int32)
</span><a href="#local-6989586621689488904"><span class="hs-identifier hs-var">maybeFirst</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId n (Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
-&gt; InputFieldsParser MetadataObjId n (Maybe Int32)
-&gt; InputFieldsParser MetadataObjId n (Maybe Int32, Maybe Int32)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe Int32)
forall origin. InputFieldsParser origin n (Maybe Int32)
</span><a href="#local-6989586621689488902"><span class="hs-identifier hs-var">maybeLast</span></a></span><span>
</span><span id="line-737"></span><span>      </span><span id="local-6989586621689488894"><span class="annot"><span class="annottext">afterBeforeAndOrderBy :: InputFieldsParser
  MetadataObjId
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488894"><span class="hs-identifier hs-var hs-var">afterBeforeAndOrderBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString
 -&gt; Maybe ByteString
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
 -&gt; (Maybe ByteString, Maybe ByteString,
     Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe ByteString
      -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
      -&gt; (Maybe ByteString, Maybe ByteString,
          Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe ByteString)
</span><a href="#local-6989586621689488900"><span class="hs-identifier hs-var">maybeAfter</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe ByteString
   -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
   -&gt; (Maybe ByteString, Maybe ByteString,
       Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser MetadataObjId n (Maybe ByteString)
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
      -&gt; (Maybe ByteString, Maybe ByteString,
          Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe ByteString)
</span><a href="#local-6989586621689488897"><span class="hs-identifier hs-var">maybeBefore</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
   -&gt; (Maybe ByteString, Maybe ByteString,
       Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe ByteString, Maybe ByteString,
      Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488907"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-740"></span><span>    </span><span id="local-6989586621689488893"><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488893"><span class="hs-identifier hs-var">whereF</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621689488908"><span class="hs-identifier hs-var">whereParser</span></a></span><span>
</span><span id="line-741"></span><span>    </span><span id="local-6989586621689488892"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488892"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488907"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-742"></span><span>    </span><span id="local-6989586621689488891"><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621689488891"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621689488905"><span class="hs-identifier hs-var">distinctParser</span></a></span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621689488890"><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689488890"><span class="hs-identifier hs-var">split</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-744"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621689488894"><span class="hs-identifier hs-var">afterBeforeAndOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  MetadataObjId
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; ((Maybe ByteString, Maybe ByteString,
     Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
    -&gt; n (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))))
-&gt; InputFieldsParser
     MetadataObjId
     n
     (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
forall (m :: * -&gt; *) origin a b.
Monad m =&gt;
InputFieldsParser origin m a
-&gt; (a -&gt; m b) -&gt; InputFieldsParser origin m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621689488889"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621689488889"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689488888"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621689488888"><span class="hs-identifier hs-var">before</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621689488887"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488887"><span class="hs-identifier hs-var">orderBy'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-745"></span><span>        </span><span id="local-6989586621689488886"><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
</span><a href="#local-6989586621689488886"><span class="hs-identifier hs-var">rawSplit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621689488889"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621689488888"><span class="hs-identifier hs-var">before</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-746"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-747"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorMessage -&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (m :: * -&gt; *) a. MonadParse m =&gt; ErrorMessage -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMessage
</span><span class="hs-string">&quot;\&quot;after\&quot; and \&quot;before\&quot; are not allowed at once&quot;</span></span><span>
</span><span id="line-748"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689488885"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488885"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ConnectionSplitKind, ByteString)
 -&gt; n (Maybe (ConnectionSplitKind, ByteString)))
-&gt; Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplitKind, ByteString)
-&gt; Maybe (ConnectionSplitKind, ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="Hasura.RQL.IR.Select.html#CSKAfter"><span class="hs-identifier hs-var">IR.CSKAfter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488885"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689488883"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488883"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ConnectionSplitKind, ByteString)
 -&gt; n (Maybe (ConnectionSplitKind, ByteString)))
-&gt; Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplitKind, ByteString)
-&gt; Maybe (ConnectionSplitKind, ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="Hasura.RQL.IR.Select.html#CSKBefore"><span class="hs-identifier hs-var">IR.CSKBefore</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488883"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>        </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; ((ConnectionSplitKind, ByteString)
    -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; n (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
</span><a href="#local-6989586621689488886"><span class="hs-identifier hs-var">rawSplit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ConnectionSplitKind
 -&gt; ByteString
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (ConnectionSplitKind, ByteString)
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; ConnectionSplitKind
-&gt; ByteString
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689488880"><span class="hs-identifier hs-var">parseConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488887"><span class="hs-identifier hs-var">orderBy'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span>    </span><span id="local-6989586621689488879"><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621689488879"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-753"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe Int32, Maybe Int32)
</span><a href="#local-6989586621689488895"><span class="hs-identifier hs-var">firstAndLast</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (Maybe Int32, Maybe Int32)
-&gt; ((Maybe Int32, Maybe Int32) -&gt; n (Maybe ConnectionSlice))
-&gt; InputFieldsParser MetadataObjId n (Maybe ConnectionSlice)
forall (m :: * -&gt; *) origin a b.
Monad m =&gt;
InputFieldsParser origin m a
-&gt; (a -&gt; m b) -&gt; InputFieldsParser origin m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-754"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-755"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorMessage -&gt; n (Maybe ConnectionSlice)
forall (m :: * -&gt; *) a. MonadParse m =&gt; ErrorMessage -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMessage
</span><span class="hs-string">&quot;\&quot;first\&quot; and \&quot;last\&quot; are not allowed at once&quot;</span></span><span>
</span><span id="line-756"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689488878"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621689488878"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice))
-&gt; Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConnectionSlice -&gt; Maybe ConnectionSlice
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSlice -&gt; Maybe ConnectionSlice)
-&gt; ConnectionSlice -&gt; Maybe ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#SliceFirst"><span class="hs-identifier hs-var">IR.SliceFirst</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ConnectionSlice) -&gt; Int -&gt; ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621689488878"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-757"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689488876"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621689488876"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice))
-&gt; Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConnectionSlice -&gt; Maybe ConnectionSlice
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSlice -&gt; Maybe ConnectionSlice)
-&gt; ConnectionSlice -&gt; Maybe ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#SliceLast"><span class="hs-identifier hs-var">IR.SliceLast</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ConnectionSlice) -&gt; Int -&gt; ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621689488876"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span>    </span><span class="hs-identifier">pure</span><span>
</span><span id="line-760"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgs b
forall (b :: BackendType) v.
Maybe (AnnBoolExp b v)
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgsG b v
</span><a href="Hasura.RQL.IR.Select.html#SelectArgs"><span class="hs-identifier hs-var">IR.SelectArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621689488893"><span class="hs-identifier hs-var">whereF</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488892"><span class="hs-identifier hs-var">orderBy</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int64
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621689488891"><span class="hs-identifier hs-var">distinct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-761"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689488890"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-762"></span><span>        </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621689488879"><span class="hs-identifier hs-var">slice</span></a></span><span>
</span><span id="line-763"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-765"></span><span>    </span><span id="local-6989586621689488898"><span class="annot"><span class="annottext">base64Text :: Parser origin 'Both n ByteString
</span><a href="#local-6989586621689488898"><span class="hs-identifier hs-var hs-var">base64Text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><a href="Hasura.Prelude.html#base64Decode"><span class="hs-identifier hs-var">base64Decode</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; Parser origin 'Both n Text -&gt; Parser origin 'Both n ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser origin 'Both n Text
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-766"></span><span>
</span><span id="line-767"></span><span>    </span><span id="local-6989586621689489497"><span class="annot"><a href="#local-6989586621689488906"><span class="hs-identifier hs-type">appendPrimaryKeyOrderBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489497"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489497"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-768"></span><span>    </span><span id="local-6989586621689488906"><span class="annot"><span class="annottext">appendPrimaryKeyOrderBy :: NonEmpty (AnnotatedOrderByItemG b v)
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621689488906"><span class="hs-identifier hs-var hs-var">appendPrimaryKeyOrderBy</span></a></span></span><span> </span><span id="local-6989586621689488873"><span class="annot"><span class="annottext">orderBys :: NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621689488873"><span class="hs-identifier hs-var">orderBys</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621689488872"><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
</span><a href="#local-6989586621689488872"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span id="local-6989586621689488870"><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621689488870"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-769"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488869"><span class="annot"><span class="annottext">orderByColumnNames :: [Column b]
</span><a href="#local-6989586621689488869"><span class="hs-identifier hs-var hs-var">orderByColumnNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-770"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621689488873"><span class="hs-identifier hs-var">orderBys</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b v)
-&gt; Getting
     (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)) (Column b)
-&gt; [Column b]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v
 -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
-&gt; Const (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((AnnotatedOrderByItemG b v
  -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
 -&gt; NonEmpty (AnnotatedOrderByItemG b v)
 -&gt; Const (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)))
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; AnnotatedOrderByItemG b v
    -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
-&gt; Getting
     (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)) (Column b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v -&gt; AnnotatedOrderByElement b v)
-&gt; Optic'
     (-&gt;)
     (Const (Endo [Column b]))
     (AnnotatedOrderByItemG b v)
     (AnnotatedOrderByElement b v)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v -&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) a. OrderByItemG b a -&gt; a
</span><a href="Hasura.RQL.IR.OrderBy.html#obiColumn"><span class="hs-identifier hs-var hs-var">IR.obiColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Optic'
  (-&gt;)
  (Const (Endo [Column b]))
  (AnnotatedOrderByItemG b v)
  (AnnotatedOrderByElement b v)
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; AnnotatedOrderByElement b v
    -&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v))
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; AnnotatedOrderByItemG b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
-&gt; AnnotatedOrderByElement b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v)
forall (b :: BackendType) v.
Prism' (AnnotatedOrderByElement b v) (ColumnInfo b)
</span><a href="Hasura.RQL.IR.Select.html#_AOCColumn"><span class="hs-identifier hs-var">IR._AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
 -&gt; AnnotatedOrderByElement b v
 -&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v))
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; AnnotatedOrderByElement b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Column b)
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; ColumnInfo b
-&gt; Const (Endo [Column b]) (ColumnInfo b)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span>
</span><span id="line-771"></span><span>          </span><span id="local-6989586621689488864"><span class="annot"><span class="annottext">pkeyOrderBys :: [AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621689488864"><span class="hs-identifier hs-var hs-var">pkeyOrderBys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
 -&gt; [ColumnInfo b] -&gt; [AnnotatedOrderByItemG b v])
-&gt; [ColumnInfo b]
-&gt; (ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [AnnotatedOrderByItemG b v]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [ColumnInfo b] -&gt; [AnnotatedOrderByItemG b v]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimaryKeyColumns b -&gt; [ColumnInfo b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689488911"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
 -&gt; [AnnotatedOrderByItemG b v])
-&gt; (ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [AnnotatedOrderByItemG b v]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488863"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488863"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-772"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488863"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621689488869"><span class="hs-identifier hs-var">orderByColumnNames</span></a></span><span>
</span><span id="line-773"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnotatedOrderByItemG b v)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-774"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b v
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b v
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) v.
ColumnInfo b -&gt; AnnotatedOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-var">IR.AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488863"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-775"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
</span><a href="#local-6989586621689488872"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
-&gt; [AnnotatedOrderByItemG b v]
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621689488870"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
-&gt; [AnnotatedOrderByItemG b v] -&gt; [AnnotatedOrderByItemG b v]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621689488864"><span class="hs-identifier hs-var">pkeyOrderBys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><a href="#local-6989586621689488880"><span class="hs-identifier hs-type">parseConnectionSplit</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-778"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-779"></span><span>      </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplitKind"><span class="hs-identifier hs-type">IR.ConnectionSplitKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-780"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-781"></span><span>      </span><span class="annot"><a href="#local-6989586621689489808"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-type">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>    </span><span id="local-6989586621689488880"><span class="annot"><span class="annottext">parseConnectionSplit :: Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; ConnectionSplitKind
-&gt; ByteString
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621689488880"><span class="hs-identifier hs-var hs-var">parseConnectionSplit</span></a></span></span><span> </span><span id="local-6989586621689488861"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488861"><span class="hs-identifier hs-var">maybeOrderBys</span></a></span></span><span> </span><span id="local-6989586621689488860"><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621689488860"><span class="hs-identifier hs-var">splitKind</span></a></span></span><span> </span><span id="local-6989586621689488859"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488859"><span class="hs-identifier hs-var">cursorSplit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-783"></span><span>      </span><span id="local-6989586621689488858"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488858"><span class="hs-identifier hs-var">cursorValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String Value
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">J.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621689488859"><span class="hs-identifier hs-var">cursorSplit</span></a></span><span> </span><span class="annot"><span class="annottext">Either String Value -&gt; (String -&gt; n Value) -&gt; n Value
forall (m :: * -&gt; *) e a.
Applicative m =&gt;
Either e a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="Hasura.Prelude.html#onLeft"><span class="hs-operator hs-var">`onLeft`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value -&gt; String -&gt; n Value
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621689488854"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-784"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621689488861"><span class="hs-identifier hs-var">maybeOrderBys</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-785"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnInfo b)
-&gt; (ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimaryKeyColumns b -&gt; NonEmpty (ColumnInfo b)
forall a. NESeq a -&gt; NonEmpty a
</span><a href="Hasura.Prelude.html#nonEmptySeqToNonEmptyList"><span class="hs-identifier hs-var">nonEmptySeqToNonEmptyList</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621689488911"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-786"></span><span>          </span><span class="hs-glyph">\</span><span id="local-6989586621689488851"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488851"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-787"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488850"><span class="annot"><span class="annottext">columnJsonPath :: [JSONPathElement]
</span><a href="#local-6989586621689488850"><span class="hs-identifier hs-var hs-var">columnJsonPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Key -&gt; JSONPathElement) -&gt; Key -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Key
</span><span class="hs-identifier hs-var">K.fromText</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Key) -&gt; Text -&gt; Key
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488851"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-788"></span><span>                </span><span id="local-6989586621689488846"><span class="annot"><span class="annottext">columnType :: ColumnType b
</span><a href="#local-6989586621689488846"><span class="hs-identifier hs-var hs-var">columnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488851"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-789"></span><span>            </span><span id="local-6989586621689488845"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488845"><span class="hs-identifier hs-var">columnValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-790"></span><span>              </span><span class="annot"><span class="annottext">IResult Value -&gt; Maybe Value
forall a. IResult a -&gt; Maybe a
</span><a href="Hasura.Base.Error.html#iResultToMaybe"><span class="hs-identifier hs-var">iResultToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JSONPathElement] -&gt; Value -&gt; IResult Value
</span><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-var">executeJSONPath</span></a></span><span> </span><span class="annot"><span class="annottext">[JSONPathElement]
</span><a href="#local-6989586621689488850"><span class="hs-identifier hs-var">columnJsonPath</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488858"><span class="hs-identifier hs-var">cursorValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>                </span><span class="annot"><span class="annottext">Maybe Value -&gt; n Value -&gt; n Value
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621689488854"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-792"></span><span>            </span><span id="local-6989586621689488842"><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621689488842"><span class="hs-identifier hs-var">pgValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a. Except QErr a -&gt; n a
</span><a href="#local-6989586621689488841"><span class="hs-identifier hs-var">liftQErr</span></a></span><span> </span><span class="annot"><span class="annottext">(Except QErr (ScalarValue b) -&gt; n (ScalarValue b))
-&gt; Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; Value -&gt; Except QErr (ScalarValue b)
forall (m :: * -&gt; *) (b :: BackendType).
(MonadError QErr m, Backend b) =&gt;
ColumnType b -&gt; Value -&gt; m (ScalarValue b)
</span><a href="Hasura.RQL.Types.Column.html#parseScalarValueColumnType"><span class="hs-identifier hs-var">parseScalarValueColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621689488846"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488845"><span class="hs-identifier hs-var">columnValue</span></a></span><span>
</span><span id="line-793"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488839"><span class="annot"><span class="annottext">unresolvedValue :: UnpreparedValue b
</span><a href="#local-6989586621689488839"><span class="hs-identifier hs-var hs-var">unresolvedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
forall (b :: BackendType).
Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#UVParameter"><span class="hs-identifier hs-var">IR.UVParameter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(ColumnValue b -&gt; UnpreparedValue b)
-&gt; ColumnValue b -&gt; UnpreparedValue b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
forall (b :: BackendType).
ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
</span><a href="Hasura.RQL.Types.Column.html#ColumnValue"><span class="hs-identifier hs-var">ColumnValue</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621689488846"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621689488842"><span class="hs-identifier hs-var">pgValue</span></a></span><span>
</span><span id="line-794"></span><span>            </span><span class="annot"><span class="annottext">ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplit b (UnpreparedValue b)
 -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-795"></span><span>              </span><span class="annot"><span class="annottext">ConnectionSplitKind
-&gt; UnpreparedValue b
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall (b :: BackendType) v.
ConnectionSplitKind
-&gt; v
-&gt; OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; ConnectionSplit b v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-var">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621689488860"><span class="hs-identifier hs-var">splitKind</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
</span><a href="#local-6989586621689488839"><span class="hs-identifier hs-var">unresolvedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b (UnpreparedValue b)
 -&gt; ConnectionSplit b (UnpreparedValue b))
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-796"></span><span>                </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b (UnpreparedValue b)
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; AnnotatedOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ColumnInfo b -&gt; AnnotatedOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-var">IR.AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488851"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-797"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621689488835"><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621689488835"><span class="hs-identifier hs-var">orderBys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-798"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; (AnnotatedOrderByItemG b (UnpreparedValue b)
    -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621689488835"><span class="hs-identifier hs-var">orderBys</span></a></span><span> </span><span class="annot"><span class="annottext">((AnnotatedOrderByItemG b (UnpreparedValue b)
  -&gt; n (ConnectionSplit b (UnpreparedValue b)))
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (AnnotatedOrderByItemG b (UnpreparedValue b)
    -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488834"><span class="annot"><span class="annottext">AnnotatedOrderByItemG b (UnpreparedValue b)
</span><a href="#local-6989586621689488834"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-799"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-type">IR.OrderByItemG</span></a></span><span> </span><span id="local-6989586621689488833"><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
</span><a href="#local-6989586621689488833"><span class="hs-identifier hs-var">orderType</span></a></span></span><span> </span><span id="local-6989586621689488832"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488832"><span class="hs-identifier hs-var">annObCol</span></a></span></span><span> </span><span id="local-6989586621689488831"><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
</span><a href="#local-6989586621689488831"><span class="hs-identifier hs-var">nullsOrder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b (UnpreparedValue b)
</span><a href="#local-6989586621689488834"><span class="hs-identifier hs-var">orderBy</span></a></span><span>
</span><span id="line-800"></span><span>                </span><span id="local-6989586621689488830"><span class="annot"><span class="annottext">columnType :: ColumnType b
</span><a href="#local-6989586621689488830"><span class="hs-identifier hs-var hs-var">columnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621689488829"><span class="hs-identifier hs-var">getOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488832"><span class="hs-identifier hs-var">annObCol</span></a></span><span>
</span><span id="line-801"></span><span>            </span><span id="local-6989586621689488828"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488828"><span class="hs-identifier hs-var">orderByItemValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-802"></span><span>              </span><span class="annot"><span class="annottext">IResult Value -&gt; Maybe Value
forall a. IResult a -&gt; Maybe a
</span><a href="Hasura.Base.Error.html#iResultToMaybe"><span class="hs-identifier hs-var">iResultToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JSONPathElement] -&gt; Value -&gt; IResult Value
</span><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-var">executeJSONPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; [Text] -&gt; [JSONPathElement]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Key -&gt; JSONPathElement)
-&gt; (Text -&gt; Key) -&gt; Text -&gt; JSONPathElement
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Key
</span><span class="hs-identifier hs-var">K.fromText</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [Text]
</span><a href="#local-6989586621689488827"><span class="hs-identifier hs-var">getPathFromOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488832"><span class="hs-identifier hs-var">annObCol</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488858"><span class="hs-identifier hs-var">cursorValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-803"></span><span>                </span><span class="annot"><span class="annottext">Maybe Value -&gt; n Value -&gt; n Value
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621689488854"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-804"></span><span>            </span><span id="local-6989586621689488826"><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621689488826"><span class="hs-identifier hs-var">pgValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a. Except QErr a -&gt; n a
</span><a href="#local-6989586621689488841"><span class="hs-identifier hs-var">liftQErr</span></a></span><span> </span><span class="annot"><span class="annottext">(Except QErr (ScalarValue b) -&gt; n (ScalarValue b))
-&gt; Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; Value -&gt; Except QErr (ScalarValue b)
forall (m :: * -&gt; *) (b :: BackendType).
(MonadError QErr m, Backend b) =&gt;
ColumnType b -&gt; Value -&gt; m (ScalarValue b)
</span><a href="Hasura.RQL.Types.Column.html#parseScalarValueColumnType"><span class="hs-identifier hs-var">parseScalarValueColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621689488830"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621689488828"><span class="hs-identifier hs-var">orderByItemValue</span></a></span><span>
</span><span id="line-805"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488825"><span class="annot"><span class="annottext">unresolvedValue :: UnpreparedValue b
</span><a href="#local-6989586621689488825"><span class="hs-identifier hs-var hs-var">unresolvedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
forall (b :: BackendType).
Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#UVParameter"><span class="hs-identifier hs-var">IR.UVParameter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(ColumnValue b -&gt; UnpreparedValue b)
-&gt; ColumnValue b -&gt; UnpreparedValue b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
forall (b :: BackendType).
ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
</span><a href="Hasura.RQL.Types.Column.html#ColumnValue"><span class="hs-identifier hs-var">ColumnValue</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621689488830"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621689488826"><span class="hs-identifier hs-var">pgValue</span></a></span><span>
</span><span id="line-806"></span><span>            </span><span class="annot"><span class="annottext">ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplit b (UnpreparedValue b)
 -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-807"></span><span>              </span><span class="annot"><span class="annottext">ConnectionSplitKind
-&gt; UnpreparedValue b
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall (b :: BackendType) v.
ConnectionSplitKind
-&gt; v
-&gt; OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; ConnectionSplit b v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-var">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621689488860"><span class="hs-identifier hs-var">splitKind</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
</span><a href="#local-6989586621689488825"><span class="hs-identifier hs-var">unresolvedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b (UnpreparedValue b)
 -&gt; ConnectionSplit b (UnpreparedValue b))
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-808"></span><span>                </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b (UnpreparedValue b)
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
</span><a href="#local-6989586621689488833"><span class="hs-identifier hs-var">orderType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488832"><span class="hs-identifier hs-var">annObCol</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
</span><a href="#local-6989586621689488831"><span class="hs-identifier hs-var">nullsOrder</span></a></span><span>
</span><span id="line-809"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-810"></span><span>        </span><span id="local-6989586621689488854"><span class="annot"><span class="annottext">throwInvalidCursor :: n a
</span><a href="#local-6989586621689488854"><span class="hs-identifier hs-var hs-var">throwInvalidCursor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ErrorMessage -&gt; n a
forall (m :: * -&gt; *) a. MonadParse m =&gt; ErrorMessage -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMessage
</span><span class="hs-string">&quot;the \&quot;after\&quot; or \&quot;before\&quot; cursor is invalid&quot;</span></span><span>
</span><span id="line-811"></span><span>        </span><span id="local-6989586621689488841"><span class="annot"><span class="annottext">liftQErr :: Except QErr a -&gt; n a
</span><a href="#local-6989586621689488841"><span class="hs-identifier hs-var hs-var">liftQErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QErr -&gt; n a) -&gt; (a -&gt; n a) -&gt; Either QErr a -&gt; n a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ErrorMessage -&gt; n a
forall (m :: * -&gt; *) a. MonadParse m =&gt; ErrorMessage -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">(ErrorMessage -&gt; n a) -&gt; (QErr -&gt; ErrorMessage) -&gt; QErr -&gt; n a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ErrorMessage
</span><a href="../file:///workdir/dist-newstyle/build/x86_64-linux/ghc-8.10.7/hasura-error-message-1.0.0/opt/doc/html/hasura-error-message/src"><span class="hs-identifier hs-var">toErrorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ErrorMessage) -&gt; (QErr -&gt; Text) -&gt; QErr -&gt; ErrorMessage
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QErr -&gt; Text
</span><a href="Hasura.Base.Error.html#qeError"><span class="hs-identifier hs-var hs-var">qeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; n a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either QErr a -&gt; n a)
-&gt; (Except QErr a -&gt; Either QErr a) -&gt; Except QErr a -&gt; n a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Except QErr a -&gt; Either QErr a
forall e a. Except e a -&gt; Either e a
</span><span class="hs-identifier hs-var">runExcept</span></span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span>        </span><span id="local-6989586621689488821"><span class="annot"><span class="annottext">mkAggregateOrderByPath :: AnnotatedAggregateOrderBy b -&gt; [Text]
</span><a href="#local-6989586621689488821"><span class="hs-identifier hs-var hs-var">mkAggregateOrderByPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-814"></span><span>          </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="Hasura.RQL.IR.Select.html#AAOCount"><span class="hs-identifier hs-var">IR.AAOCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;count&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-815"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AAOOp"><span class="hs-identifier hs-type">IR.AAOOp</span></a></span><span> </span><span id="local-6989586621689488818"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488818"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621689488817"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488817"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488818"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488817"><span class="hs-identifier hs-var">col</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-816"></span><span>
</span><span id="line-817"></span><span>        </span><span id="local-6989586621689488827"><span class="annot"><span class="annottext">getPathFromOrderBy :: AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [Text]
</span><a href="#local-6989586621689488827"><span class="hs-identifier hs-var hs-var">getPathFromOrderBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-818"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621689488816"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488816"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-819"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488815"><span class="annot"><span class="annottext">pathElement :: Text
</span><a href="#local-6989586621689488815"><span class="hs-identifier hs-var hs-var">pathElement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488816"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-820"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488815"><span class="hs-identifier hs-var">pathElement</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-821"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCObjectRelation"><span class="hs-identifier hs-type">IR.AOCObjectRelation</span></a></span><span> </span><span id="local-6989586621689488813"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488813"><span class="hs-identifier hs-var">relInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488812"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488812"><span class="hs-identifier hs-var">obCol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-822"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488811"><span class="annot"><span class="annottext">pathElement :: Text
</span><a href="#local-6989586621689488811"><span class="hs-identifier hs-var hs-var">pathElement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(RelName -&gt; Text) -&gt; RelName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488813"><span class="hs-identifier hs-var">relInfo</span></a></span><span>
</span><span id="line-823"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488811"><span class="hs-identifier hs-var">pathElement</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [Text]
</span><a href="#local-6989586621689488827"><span class="hs-identifier hs-var">getPathFromOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488812"><span class="hs-identifier hs-var">obCol</span></a></span><span>
</span><span id="line-824"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCArrayAggregation"><span class="hs-identifier hs-type">IR.AOCArrayAggregation</span></a></span><span> </span><span id="local-6989586621689488807"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488807"><span class="hs-identifier hs-var">relInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488806"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488806"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-825"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488805"><span class="annot"><span class="annottext">fieldName :: Text
</span><a href="#local-6989586621689488805"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488807"><span class="hs-identifier hs-var">relInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;_aggregate&quot;</span></span><span>
</span><span id="line-826"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488805"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; [Text]
</span><a href="#local-6989586621689488821"><span class="hs-identifier hs-var">mkAggregateOrderByPath</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488806"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-827"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCComputedField"><span class="hs-identifier hs-type">IR.AOCComputedField</span></a></span><span> </span><span id="local-6989586621689488803"><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621689488803"><span class="hs-identifier hs-var">cfob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-828"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488802"><span class="annot"><span class="annottext">fieldNameText :: Text
</span><a href="#local-6989586621689488802"><span class="hs-identifier hs-var hs-var">fieldNameText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComputedFieldName -&gt; Text
</span><a href="Hasura.RQL.Types.ComputedField.html#computedFieldNameToText"><span class="hs-identifier hs-var">computedFieldNameToText</span></a></span><span> </span><span class="annot"><span class="annottext">(ComputedFieldName -&gt; Text) -&gt; ComputedFieldName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b) -&gt; ComputedFieldName
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldName
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_cfobName%3AComputedFieldOrderBy"><span class="hs-identifier hs-var hs-var">IR._cfobName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621689488803"><span class="hs-identifier hs-var">cfob</span></a></span><span>
</span><span id="line-829"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
-&gt; ComputedFieldOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_cfobOrderByElement%3AComputedFieldOrderBy"><span class="hs-identifier hs-var hs-var">IR._cfobOrderByElement</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621689488803"><span class="hs-identifier hs-var">cfob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-830"></span><span>                  </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBEScalar"><span class="hs-identifier hs-type">IR.CFOBEScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488802"><span class="hs-identifier hs-var">fieldNameText</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-831"></span><span>                  </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBETableAggregation"><span class="hs-identifier hs-type">IR.CFOBETableAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488796"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488796"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-832"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488802"><span class="hs-identifier hs-var">fieldNameText</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;_aggregate&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; [Text]
</span><a href="#local-6989586621689488821"><span class="hs-identifier hs-var">mkAggregateOrderByPath</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488796"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span>        </span><span id="local-6989586621689488829"><span class="annot"><span class="annottext">getOrderByColumnType :: AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621689488829"><span class="hs-identifier hs-var hs-var">getOrderByColumnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-835"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621689488795"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488795"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488795"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-836"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCObjectRelation"><span class="hs-identifier hs-type">IR.AOCObjectRelation</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488794"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488794"><span class="hs-identifier hs-var">obCol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621689488829"><span class="hs-identifier hs-var">getOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621689488794"><span class="hs-identifier hs-var">obCol</span></a></span><span>
</span><span id="line-837"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCArrayAggregation"><span class="hs-identifier hs-type">IR.AOCArrayAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488793"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488793"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621689488792"><span class="hs-identifier hs-var">aggregateOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488793"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-838"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCComputedField"><span class="hs-identifier hs-type">IR.AOCComputedField</span></a></span><span> </span><span id="local-6989586621689488791"><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621689488791"><span class="hs-identifier hs-var">cfob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-839"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
-&gt; ComputedFieldOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_cfobOrderByElement%3AComputedFieldOrderBy"><span class="hs-identifier hs-var hs-var">IR._cfobOrderByElement</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621689488791"><span class="hs-identifier hs-var">cfob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-840"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBEScalar"><span class="hs-identifier hs-type">IR.CFOBEScalar</span></a></span><span> </span><span id="local-6989586621689488790"><span class="annot"><span class="annottext">ScalarType b
</span><a href="#local-6989586621689488790"><span class="hs-identifier hs-var">scalarType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScalarType b -&gt; ColumnType b
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType b
</span><a href="#local-6989586621689488790"><span class="hs-identifier hs-var">scalarType</span></a></span><span>
</span><span id="line-841"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBETableAggregation"><span class="hs-identifier hs-type">IR.CFOBETableAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488788"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488788"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621689488792"><span class="hs-identifier hs-var">aggregateOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621689488788"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-842"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-843"></span><span>            </span><span id="local-6989586621689488792"><span class="annot"><span class="annottext">aggregateOrderByColumnType :: AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621689488792"><span class="hs-identifier hs-var hs-var">aggregateOrderByColumnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-844"></span><span>              </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="Hasura.RQL.IR.Select.html#AAOCount"><span class="hs-identifier hs-var">IR.AAOCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScalarType b -&gt; ColumnType b
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BackendSchema b =&gt; ScalarType b
forall (b :: BackendType). BackendSchema b =&gt; ScalarType b
</span><a href="Hasura.GraphQL.Schema.Backend.html#aggregateOrderByCountType"><span class="hs-identifier hs-var">aggregateOrderByCountType</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489811"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AAOOp"><span class="hs-identifier hs-type">IR.AAOOp</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621689488786"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488786"><span class="hs-identifier hs-var">colInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488786"><span class="hs-identifier hs-var">colInfo</span></a></span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="hs-comment">-- | Aggregation fields</span><span>
</span><span id="line-848"></span><span class="hs-comment">--</span><span>
</span><span id="line-849"></span><span class="hs-comment">-- &gt; type table_aggregate_fields{</span><span>
</span><span id="line-850"></span><span class="hs-comment">-- &gt;   count(distinct: Boolean, columns: [table_select_column!]): Int!</span><span>
</span><span id="line-851"></span><span class="hs-comment">-- &gt;   sum: table_sum_fields</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- &gt;   avg: table_avg_fields</span><span>
</span><span id="line-853"></span><span class="hs-comment">-- &gt;   stddev: table_stddev_fields</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- &gt;   stddev_pop: table_stddev_pop_fields</span><span>
</span><span id="line-855"></span><span class="hs-comment">-- &gt;   variance: table_variance_fields</span><span>
</span><span id="line-856"></span><span class="hs-comment">-- &gt;   var_pop: table_var_pop_fields</span><span>
</span><span id="line-857"></span><span class="hs-comment">-- &gt;   max: table_max_fields</span><span>
</span><span id="line-858"></span><span class="hs-comment">-- &gt;   min: table_min_fields</span><span>
</span><span id="line-859"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-860"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-type">tableAggregationFields</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489719"><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489718"><span class="annot"><a href="#local-6989586621689489718"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489717"><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489716"><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-862"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489718"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-863"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-864"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-865"></span><span>  </span><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateFields"><span class="hs-identifier hs-type">IR.AggregateFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span id="tableAggregationFields"><span class="annot"><span class="annottext">tableAggregationFields :: SourceInfo b
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-var hs-var">tableAggregationFields</span></a></span></span><span> </span><span id="local-6989586621689488785"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488785"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488784"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-867"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (AggregateFields b))
-&gt; m (Parser 'Output n (AggregateFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, Ord a, Typeable p, Typeable a, Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">tableAggregationFields</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; SourceName
forall (b :: BackendType). SourceInfo b -&gt; SourceName
</span><a href="Hasura.RQL.Types.Source.html#_siName"><span class="hs-identifier hs-var hs-var">_siName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488785"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-868"></span><span>    </span><span id="local-6989586621689488783"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488783"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-869"></span><span>    </span><span id="local-6989586621689488782"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488782"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-870"></span><span>    </span><span id="local-6989586621689488781"><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488781"><span class="hs-identifier hs-var">allColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; TableInfo b -&gt; m [ColumnInfo b]
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadError QErr m, MonadReader r m, Has RoleName r) =&gt;
SourceInfo b -&gt; TableInfo b -&gt; m [ColumnInfo b]
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumns"><span class="hs-identifier hs-var">tableSelectColumns</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488785"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-871"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488779"><span class="annot"><span class="annottext">numericColumns :: [ColumnInfo b]
</span><a href="#local-6989586621689488779"><span class="hs-identifier hs-var hs-var">numericColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; [ColumnInfo b]
forall (b :: BackendType).
Backend b =&gt;
[ColumnInfo b] -&gt; [ColumnInfo b]
</span><a href="Hasura.RQL.Types.Column.html#onlyNumCols"><span class="hs-identifier hs-var">onlyNumCols</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488781"><span class="hs-identifier hs-var">allColumns</span></a></span><span>
</span><span id="line-872"></span><span>        </span><span id="local-6989586621689488777"><span class="annot"><span class="annottext">comparableColumns :: [ColumnInfo b]
</span><a href="#local-6989586621689488777"><span class="hs-identifier hs-var hs-var">comparableColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; [ColumnInfo b]
forall (b :: BackendType).
Backend b =&gt;
[ColumnInfo b] -&gt; [ColumnInfo b]
</span><a href="Hasura.RQL.Types.Column.html#onlyComparableCols"><span class="hs-identifier hs-var">onlyComparableCols</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488781"><span class="hs-identifier hs-var">allColumns</span></a></span><span>
</span><span id="line-873"></span><span>        </span><span id="local-6989586621689488775"><span class="annot"><span class="annottext">description :: Description
</span><a href="#local-6989586621689488775"><span class="hs-identifier hs-var hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregate fields of &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-874"></span><span>    </span><span id="local-6989586621689488774"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488774"><span class="hs-identifier hs-var">selectName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#mkTypename"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488783"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__aggregate_fields"><span class="hs-identifier hs-var">Name.__aggregate_fields</span></a></span><span>
</span><span id="line-875"></span><span>    </span><span id="local-6989586621689488772"><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
</span><a href="#local-6989586621689488772"><span class="hs-identifier hs-var">count</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (FieldParser n (AggregateField b))
</span><a href="#local-6989586621689488771"><span class="hs-identifier hs-var">countField</span></a></span><span>
</span><span id="line-876"></span><span>    </span><span id="local-6989586621689488770"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621689488770"><span class="hs-identifier hs-var">makeTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; MkTypename) -&gt; m MkTypename
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; MkTypename
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-877"></span><span>    </span><span id="local-6989586621689488769"><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621689488769"><span class="hs-identifier hs-var">numericAndComparable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-878"></span><span>      </span><span class="annot"><span class="annottext">([[FieldParser n (AggregateField b)]]
 -&gt; [FieldParser n (AggregateField b)])
-&gt; m [[FieldParser n (AggregateField b)]]
-&gt; m [FieldParser n (AggregateField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[[FieldParser n (AggregateField b)]]
-&gt; [FieldParser n (AggregateField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">(m [[FieldParser n (AggregateField b)]]
 -&gt; m [FieldParser n (AggregateField b)])
-&gt; m [[FieldParser n (AggregateField b)]]
-&gt; m [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-879"></span><span>        </span><span class="annot"><span class="annottext">[m [FieldParser n (AggregateField b)]]
-&gt; m [[FieldParser n (AggregateField b)]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">([m [FieldParser n (AggregateField b)]]
 -&gt; m [[FieldParser n (AggregateField b)]])
-&gt; [m [FieldParser n (AggregateField b)]]
-&gt; m [[FieldParser n (AggregateField b)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-880"></span><span>          </span><span class="annot"><span class="annottext">[Maybe (m [FieldParser n (AggregateField b)])]
-&gt; [m [FieldParser n (AggregateField b)]]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-881"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- operators on numeric columns</span><span>
</span><span id="line-882"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488779"><span class="hs-identifier hs-var">numericColumns</span></a></span><span>
</span><span id="line-883"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (m [FieldParser n (AggregateField b)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-884"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m [FieldParser n (AggregateField b)]
 -&gt; Maybe (m [FieldParser n (AggregateField b)]))
-&gt; m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-885"></span><span>                  </span><span class="annot"><span class="annottext">[Name]
-&gt; (Name -&gt; m (FieldParser n (AggregateField b)))
-&gt; m [FieldParser n (AggregateField b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Hasura.GraphQL.Schema.Common.html#numericAggOperators"><span class="hs-identifier hs-var">numericAggOperators</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; m (FieldParser n (AggregateField b)))
 -&gt; m [FieldParser n (AggregateField b)])
-&gt; (Name -&gt; m (FieldParser n (AggregateField b)))
-&gt; m [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488766"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488766"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-886"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488765"><span class="annot"><span class="annottext">fieldNameCase :: Name
</span><a href="#local-6989586621689488765"><span class="hs-identifier hs-var hs-var">fieldNameCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseCust"><span class="hs-identifier hs-var">applyFieldNameCaseCust</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488782"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488766"><span class="hs-identifier hs-var">operator</span></a></span><span>
</span><span id="line-887"></span><span>                    </span><span id="local-6989586621689488764"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488764"><span class="hs-identifier hs-var">numFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488763"><span class="hs-identifier hs-var">mkNumericAggFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488766"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488779"><span class="hs-identifier hs-var">numericColumns</span></a></span><span>
</span><span id="line-888"></span><span>                    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; Name
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621689488762"><span class="hs-identifier hs-var">parseAggOperator</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621689488770"><span class="hs-identifier hs-var">makeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488766"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488765"><span class="hs-identifier hs-var">fieldNameCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488783"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488764"><span class="hs-identifier hs-var">numFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>              </span><span class="hs-comment">-- operators on comparable columns</span><span>
</span><span id="line-890"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488777"><span class="hs-identifier hs-var">comparableColumns</span></a></span><span>
</span><span id="line-891"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (m [FieldParser n (AggregateField b)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-892"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m [FieldParser n (AggregateField b)]
 -&gt; Maybe (m [FieldParser n (AggregateField b)]))
-&gt; m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-893"></span><span>                  </span><span id="local-6989586621689488761"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488761"><span class="hs-identifier hs-var">comparableFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621689488760"><span class="hs-identifier hs-var">mkColumnAggField</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488777"><span class="hs-identifier hs-var">comparableColumns</span></a></span><span>
</span><span id="line-894"></span><span>                  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-895"></span><span>                    </span><span class="annot"><span class="annottext">[Name]
</span><a href="Hasura.GraphQL.Schema.Common.html#comparisonAggOperators"><span class="hs-identifier hs-var">comparisonAggOperators</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; ([Name] -&gt; [FieldParser n (AggregateField b)])
-&gt; [FieldParser n (AggregateField b)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; FieldParser n (AggregateField b))
-&gt; [Name] -&gt; [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488757"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488757"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-896"></span><span>                      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488756"><span class="annot"><span class="annottext">fieldNameCase :: Name
</span><a href="#local-6989586621689488756"><span class="hs-identifier hs-var hs-var">fieldNameCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseCust"><span class="hs-identifier hs-var">applyFieldNameCaseCust</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488782"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488757"><span class="hs-identifier hs-var">operator</span></a></span><span>
</span><span id="line-897"></span><span>                       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; Name
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621689488762"><span class="hs-identifier hs-var">parseAggOperator</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621689488770"><span class="hs-identifier hs-var">makeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488757"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488756"><span class="hs-identifier hs-var">fieldNameCase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488783"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488761"><span class="hs-identifier hs-var">comparableFields</span></a></span><span>
</span><span id="line-898"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-899"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488755"><span class="annot"><span class="annottext">aggregateFields :: [FieldParser n (AggregateField b)]
</span><a href="#local-6989586621689488755"><span class="hs-identifier hs-var hs-var">aggregateFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
</span><a href="#local-6989586621689488772"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
-&gt; [FieldParser n (AggregateField b)]
-&gt; [FieldParser n (AggregateField b)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621689488769"><span class="hs-identifier hs-var">numericAndComparable</span></a></span><span>
</span><span id="line-900"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-901"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AggregateField b)]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap Name (ParsedSelection (AggregateField b)))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488774"><span class="hs-identifier hs-var">selectName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621689488775"><span class="hs-identifier hs-var">description</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621689488755"><span class="hs-identifier hs-var">aggregateFields</span></a></span><span>
</span><span id="line-902"></span><span>        </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap Name (ParsedSelection (AggregateField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AggregateField b))
    -&gt; AggregateFields b)
-&gt; Parser 'Output n (AggregateFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AggregateField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AggregateField b))
-&gt; AggregateFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AggregateField b
forall (b :: BackendType). Text -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFExp"><span class="hs-identifier hs-var">IR.AFExp</span></a></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-904"></span><span>    </span><span class="annot"><a href="#local-6989586621689488763"><span class="hs-identifier hs-type">mkNumericAggFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.Types.Column.html#ColumnInfo"><span class="hs-identifier hs-type">ColumnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-905"></span><span>    </span><span id="local-6989586621689488763"><span class="annot"><span class="annottext">mkNumericAggFields :: Name -&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488763"><span class="hs-identifier hs-var hs-var">mkNumericAggFields</span></a></span></span><span> </span><span id="local-6989586621689488753"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488753"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-906"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488753"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_sum"><span class="hs-identifier hs-var">Name._sum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621689488760"><span class="hs-identifier hs-var">mkColumnAggField</span></a></span><span>
</span><span id="line-907"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488751"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488751"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-908"></span><span>        </span><span class="annot"><span class="annottext">FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b)))
-&gt; FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-909"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n (Maybe Double)
-&gt; FieldParser MetadataObjId n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-910"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488751"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-911"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488751"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-912"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Double
-&gt; Parser MetadataObjId 'Both n (Maybe Double)
forall origin (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser origin k m a -&gt; Parser origin k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Double
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Double
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#float"><span class="hs-identifier hs-var">P.float</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>            </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n ()
-&gt; ColFld b -&gt; FieldParser n (ColFld b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; ColumnType b -&gt; ColFld b
forall (b :: BackendType). Column b -&gt; ColumnType b -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFCol"><span class="hs-identifier hs-var">IR.CFCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488751"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488751"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span>    </span><span class="annot"><a href="#local-6989586621689488760"><span class="hs-identifier hs-type">mkColumnAggField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#ColumnInfo"><span class="hs-identifier hs-type">ColumnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-916"></span><span>    </span><span id="local-6989586621689488760"><span class="annot"><span class="annottext">mkColumnAggField :: ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621689488760"><span class="hs-identifier hs-var hs-var">mkColumnAggField</span></a></span></span><span> </span><span id="local-6989586621689488748"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-917"></span><span>      </span><span id="local-6989586621689488747"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689488747"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r, Has NamingCase r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-919"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; FieldParser MetadataObjId n ()
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Both m a
-&gt; FieldParser origin m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-920"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>          </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689488747"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-923"></span><span>          </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n ()
-&gt; ColFld b -&gt; FieldParser n (ColFld b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; ColumnType b -&gt; ColFld b
forall (b :: BackendType). Column b -&gt; ColumnType b -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFCol"><span class="hs-identifier hs-var">IR.CFCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488748"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-924"></span><span>
</span><span id="line-925"></span><span>    </span><span class="annot"><a href="#local-6989586621689488771"><span class="hs-identifier hs-type">countField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621689489717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateField"><span class="hs-identifier hs-type">IR.AggregateField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>    </span><span id="local-6989586621689488771"><span class="annot"><span class="annottext">countField :: m (FieldParser n (AggregateField b))
</span><a href="#local-6989586621689488771"><span class="hs-identifier hs-var hs-var">countField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-927"></span><span>      </span><span id="local-6989586621689488746"><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621689488746"><span class="hs-identifier hs-var">columnsEnum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumnsEnum"><span class="hs-identifier hs-var">tableSelectColumnsEnum</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488785"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488784"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-928"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488745"><span class="annot"><span class="annottext">distinctName :: Name
</span><a href="#local-6989586621689488745"><span class="hs-identifier hs-var hs-var">distinctName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_distinct"><span class="hs-identifier hs-var">Name._distinct</span></a></span><span>
</span><span id="line-929"></span><span>          </span><span id="local-6989586621689488743"><span class="annot"><span class="annottext">args :: InputFieldsParser MetadataObjId n (CountType b)
</span><a href="#local-6989586621689488743"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-930"></span><span>            </span><span id="local-6989586621689488742"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621689488742"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Both n Bool
-&gt; InputFieldsParser MetadataObjId n (Maybe Bool)
forall (m :: * -&gt; *) (k :: Kind) origin a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin k m a
-&gt; InputFieldsParser origin m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488745"><span class="hs-identifier hs-var">distinctName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Bool
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-931"></span><span>            </span><span id="local-6989586621689488741"><span class="annot"><span class="annottext">CountDistinct -&gt; CountType b
</span><a href="#local-6989586621689488741"><span class="hs-identifier hs-var">mkCountType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
-&gt; InputFieldsParser MetadataObjId n (CountDistinct -&gt; CountType b)
forall (b :: BackendType) (n :: * -&gt; *).
(BackendSchema b, MonadParse n) =&gt;
Maybe (Parser 'Both n (Column b))
-&gt; InputFieldsParser n (CountDistinct -&gt; CountType b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#countTypeInput"><span class="hs-identifier hs-var">countTypeInput</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621689488746"><span class="hs-identifier hs-var">columnsEnum</span></a></span><span>
</span><span id="line-932"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-933"></span><span>              </span><span class="annot"><span class="annottext">CountDistinct -&gt; CountType b
</span><a href="#local-6989586621689488741"><span class="hs-identifier hs-var">mkCountType</span></a></span><span> </span><span class="annot"><span class="annottext">(CountDistinct -&gt; CountType b) -&gt; CountDistinct -&gt; CountType b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-934"></span><span>                </span><span class="annot"><span class="annottext">CountDistinct
-&gt; (Bool -&gt; CountDistinct) -&gt; Maybe Bool -&gt; CountDistinct
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-935"></span><span>                  </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountNonDistinct"><span class="hs-identifier hs-var">IR.SelectCountNonDistinct</span></a></span><span> </span><span class="hs-comment">-- If &quot;distinct&quot; is &quot;null&quot; or absent, we default to @'SelectCountNonDistinct'</span><span>
</span><span id="line-936"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CountDistinct -&gt; CountDistinct -&gt; Bool -&gt; CountDistinct
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountNonDistinct"><span class="hs-identifier hs-var">IR.SelectCountNonDistinct</span></a></span><span> </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountDistinct"><span class="hs-identifier hs-var">IR.SelectCountDistinct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621689488742"><span class="hs-identifier hs-var">distinct</span></a></span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span>      </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
-&gt; m (FieldParser n (AggregateField b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggregateField b)
 -&gt; m (FieldParser n (AggregateField b)))
-&gt; FieldParser n (AggregateField b)
-&gt; m (FieldParser n (AggregateField b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CountType b -&gt; AggregateField b
forall (b :: BackendType). CountType b -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFCount"><span class="hs-identifier hs-var">IR.AFCount</span></a></span><span> </span><span class="annot"><span class="annottext">(CountType b -&gt; AggregateField b)
-&gt; FieldParser MetadataObjId n (CountType b)
-&gt; FieldParser n (AggregateField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser MetadataObjId n (CountType b)
-&gt; Parser MetadataObjId 'Both n Int32
-&gt; FieldParser MetadataObjId n (CountType b)
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Both m b
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection"><span class="hs-identifier hs-var">P.selection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_count"><span class="hs-identifier hs-var">Name._count</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser MetadataObjId n (CountType b)
</span><a href="#local-6989586621689488743"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Both n Int32
forall (m :: * -&gt; *) origin.
MonadParse m =&gt;
Parser origin 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#int"><span class="hs-identifier hs-var">P.int</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span>    </span><span class="annot"><a href="#local-6989586621689488762"><span class="hs-identifier hs-type">parseAggOperator</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-942"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Schema.Typename.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-943"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-944"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-945"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-946"></span><span>      </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-947"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489716"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateField"><span class="hs-identifier hs-type">IR.AggregateField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489719"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>    </span><span id="local-6989586621689488762"><span class="annot"><span class="annottext">parseAggOperator :: MkTypename
-&gt; Name
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621689488762"><span class="hs-identifier hs-var hs-var">parseAggOperator</span></a></span></span><span> </span><span id="local-6989586621689488731"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621689488731"><span class="hs-identifier hs-var">makeTypename</span></a></span></span><span> </span><span id="local-6989586621689488730"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488730"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span id="local-6989586621689488729"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488729"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621689488728"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488728"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span id="local-6989586621689488727"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488727"><span class="hs-identifier hs-var">columns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-949"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488726"><span class="annot"><span class="annottext">opText :: Text
</span><a href="#local-6989586621689488726"><span class="hs-identifier hs-var hs-var">opText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488730"><span class="hs-identifier hs-var">operator</span></a></span><span>
</span><span id="line-950"></span><span>          </span><span id="local-6989586621689488725"><span class="annot"><span class="annottext">setName :: Name
</span><a href="#local-6989586621689488725"><span class="hs-identifier hs-var hs-var">setName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#runMkTypename"><span class="hs-identifier hs-var hs-var">runMkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621689488731"><span class="hs-identifier hs-var">makeTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; Name -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488728"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__"><span class="hs-identifier hs-var">Name.__</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488730"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__fields"><span class="hs-identifier hs-var">Name.__fields</span></a></span><span>
</span><span id="line-951"></span><span>          </span><span id="local-6989586621689488721"><span class="annot"><span class="annottext">setDesc :: Maybe Description
</span><a href="#local-6989586621689488721"><span class="hs-identifier hs-var hs-var">setDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregate &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488726"><span class="hs-identifier hs-var">opText</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; on columns&quot;</span></span><span>
</span><span id="line-952"></span><span>          </span><span id="local-6989586621689488720"><span class="annot"><span class="annottext">subselectionParser :: Parser MetadataObjId 'Output n (Fields (ColFld b))
</span><a href="#local-6989586621689488720"><span class="hs-identifier hs-var hs-var">subselectionParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-953"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (ColFld b)]
-&gt; Parser
     MetadataObjId
     'Output
     n
     (InsOrdHashMap Name (ParsedSelection (ColFld b)))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser origin m a]
-&gt; Parser origin 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488725"><span class="hs-identifier hs-var">setName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488721"><span class="hs-identifier hs-var">setDesc</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621689488727"><span class="hs-identifier hs-var">columns</span></a></span><span>
</span><span id="line-954"></span><span>              </span><span class="annot"><span class="annottext">Parser
  MetadataObjId
  'Output
  n
  (InsOrdHashMap Name (ParsedSelection (ColFld b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (ColFld b))
    -&gt; Fields (ColFld b))
-&gt; Parser MetadataObjId 'Output n (Fields (ColFld b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ColFld b)
-&gt; InsOrdHashMap Name (ParsedSelection (ColFld b))
-&gt; Fields (ColFld b)
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ColFld b
forall (b :: BackendType). Text -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFExp"><span class="hs-identifier hs-var">IR.CFExp</span></a></span><span>
</span><span id="line-955"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser MetadataObjId 'Output n (Fields (ColFld b))
-&gt; FieldParser MetadataObjId n (Fields (ColFld b))
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488729"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser MetadataObjId 'Output n (Fields (ColFld b))
</span><a href="#local-6989586621689488720"><span class="hs-identifier hs-var">subselectionParser</span></a></span><span>
</span><span id="line-956"></span><span>            </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (Fields (ColFld b))
-&gt; (Fields (ColFld b) -&gt; AggregateField b)
-&gt; FieldParser n (AggregateField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AggregateOp b -&gt; AggregateField b
forall (b :: BackendType). AggregateOp b -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFOp"><span class="hs-identifier hs-var">IR.AFOp</span></a></span><span> </span><span class="annot"><span class="annottext">(AggregateOp b -&gt; AggregateField b)
-&gt; (Fields (ColFld b) -&gt; AggregateOp b)
-&gt; Fields (ColFld b)
-&gt; AggregateField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Fields (ColFld b) -&gt; AggregateOp b
forall (b :: BackendType). Text -&gt; ColumnFields b -&gt; AggregateOp b
</span><a href="Hasura.RQL.IR.Select.html#AggregateOp"><span class="hs-identifier hs-var">IR.AggregateOp</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621689488726"><span class="hs-identifier hs-var">opText</span></a></span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="hs-comment">-- | An individual field of a table</span><span>
</span><span id="line-959"></span><span class="hs-comment">--</span><span>
</span><span id="line-960"></span><span class="hs-comment">-- &gt; field_name(arg_name: arg_type, ...): field_type</span><span>
</span><span id="line-961"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-type">fieldSelection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489666"><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489665"><span class="annot"><a href="#local-6989586621689489665"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489664"><span class="annot"><a href="#local-6989586621689489664"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489663"><span class="annot"><a href="#local-6989586621689489663"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489665"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489664"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489663"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-964"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-965"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#BooleanOperators"><span class="hs-identifier hs-type">BooleanOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-966"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#FunctionArgumentExp"><span class="hs-identifier hs-type">FunctionArgumentExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-968"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-969"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-970"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-971"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FieldInfo"><span class="hs-identifier hs-type">FieldInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-972"></span><span>  </span><span class="annot"><a href="#local-6989586621689489664"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489663"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-type">AnnotatedField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489666"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-973"></span><span id="fieldSelection"><span class="annot"><span class="annottext">fieldSelection :: SourceInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
</span><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-var hs-var">fieldSelection</span></a></span></span><span> </span><span id="local-6989586621689488716"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488716"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488715"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488715"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621689488714"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488714"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-974"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIColumn"><span class="hs-identifier hs-type">FIColumn</span></a></span><span> </span><span id="local-6989586621689488712"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-975"></span><span>    </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldParser n (AnnotatedField b))
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AnnotatedField b))
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-976"></span><span>      </span><span id="local-6989586621689488710"><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689488710"><span class="hs-identifier hs-var">schemaKind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; SchemaKind) -&gt; MaybeT m SchemaKind
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#scSchemaKind"><span class="hs-identifier hs-var hs-var">scSchemaKind</span></a></span><span>
</span><span id="line-977"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488709"><span class="annot"><span class="annottext">fieldName :: Name
</span><a href="#local-6989586621689488709"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-978"></span><span>      </span><span class="hs-comment">-- If the field name is 'id' and we're building a schema for the Relay</span><span>
</span><span id="line-979"></span><span>      </span><span class="hs-comment">-- API, Node's id field will take precedence; consequently we simply</span><span>
</span><span id="line-980"></span><span>      </span><span class="hs-comment">-- ignore the original.</span><span>
</span><span id="line-981"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaKind -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Common.html#isHasuraSchema"><span class="hs-identifier hs-var">isHasuraSchema</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689488710"><span class="hs-identifier hs-var">schemaKind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488709"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_id"><span class="hs-identifier hs-var">Name._id</span></a></span><span>
</span><span id="line-982"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488707"><span class="annot"><span class="annottext">columnName :: Column b
</span><a href="#local-6989586621689488707"><span class="hs-identifier hs-var hs-var">columnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-983"></span><span>      </span><span id="local-6989586621689488706"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488706"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488714"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-984"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621689488707"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Bool
forall k a. (Eq k, Hashable k) =&gt; k -&gt; HashMap k a -&gt; Bool
</span><span class="hs-operator hs-var">`Map.member`</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488706"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-985"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488705"><span class="annot"><span class="annottext">caseBoolExp :: Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621689488705"><span class="hs-identifier hs-var hs-var">caseBoolExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
 -&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621689488707"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488706"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>          </span><span id="local-6989586621689488703"><span class="annot"><span class="annottext">caseBoolExpUnpreparedValue :: Maybe
  (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
</span><a href="#local-6989586621689488703"><span class="hs-identifier hs-var hs-var">caseBoolExpUnpreparedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-987"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpField b (PartialSQLExp b)
 -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
-&gt; AnnColumnCaseBoolExpPartialSQL b
-&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((AnnColumnCaseBoolExpField b (PartialSQLExp b)
  -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
 -&gt; AnnColumnCaseBoolExpPartialSQL b
 -&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; ((PartialSQLExp b -&gt; UnpreparedValue b)
    -&gt; AnnColumnCaseBoolExpField b (PartialSQLExp b)
    -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
-&gt; (PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnColumnCaseBoolExpPartialSQL b
-&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnColumnCaseBoolExpField b (PartialSQLExp b)
-&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpPartialSQL b
 -&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
-&gt; Maybe
     (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621689488705"><span class="hs-identifier hs-var">caseBoolExp</span></a></span><span>
</span><span id="line-988"></span><span>          </span><span id="local-6989586621689488701"><span class="annot"><span class="annottext">pathArg :: InputFieldsParser n (Maybe (ScalarSelectionArguments b))
</span><a href="#local-6989586621689488701"><span class="hs-identifier hs-var hs-var">pathArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; InputFieldsParser n (Maybe (ScalarSelectionArguments b))
forall (b :: BackendType) (n :: * -&gt; *).
(BackendSchema b, MonadParse n) =&gt;
ColumnType b
-&gt; InputFieldsParser n (Maybe (ScalarSelectionArguments b))
</span><a href="Hasura.GraphQL.Schema.Backend.html#scalarSelectionArgumentsParser"><span class="hs-identifier hs-var">scalarSelectionArgumentsParser</span></a></span><span> </span><span class="annot"><span class="annottext">(ColumnType b
 -&gt; InputFieldsParser n (Maybe (ScalarSelectionArguments b)))
-&gt; ColumnType b
-&gt; InputFieldsParser n (Maybe (ScalarSelectionArguments b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-989"></span><span>          </span><span class="hs-comment">-- In an inherited role, when a column is part of all the select</span><span>
</span><span id="line-990"></span><span>          </span><span class="hs-comment">-- permissions which make up the inherited role then the nullability</span><span>
</span><span id="line-991"></span><span>          </span><span class="hs-comment">-- of the field is determined by the nullability of the DB column</span><span>
</span><span id="line-992"></span><span>          </span><span class="hs-comment">-- otherwise it is marked as nullable explicitly, ignoring the column's</span><span>
</span><span id="line-993"></span><span>          </span><span class="hs-comment">-- nullability. We do this because</span><span>
</span><span id="line-994"></span><span>          </span><span class="hs-comment">-- in multiple roles we execute an SQL query like:</span><span>
</span><span id="line-995"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-996"></span><span>          </span><span class="hs-comment">--  select</span><span>
</span><span id="line-997"></span><span>          </span><span class="hs-comment">--    (case when (P1 or P2) then addr else null end) as addr,</span><span>
</span><span id="line-998"></span><span>          </span><span class="hs-comment">--    (case when P2 then phone else null end) as phone</span><span>
</span><span id="line-999"></span><span>          </span><span class="hs-comment">-- from employee</span><span>
</span><span id="line-1000"></span><span>          </span><span class="hs-comment">-- where (P1 or P2)</span><span>
</span><span id="line-1001"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-1002"></span><span>          </span><span class="hs-comment">-- In the above example, P(n) is a predicate configured for a role</span><span>
</span><span id="line-1003"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-1004"></span><span>          </span><span class="hs-comment">-- NOTE: https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/FGALanguageICDE07.pdf</span><span>
</span><span id="line-1005"></span><span>          </span><span class="hs-comment">-- The above is the paper which talks about the idea of cell-level</span><span>
</span><span id="line-1006"></span><span>          </span><span class="hs-comment">-- authorization and multiple roles. The paper says that we should only</span><span>
</span><span id="line-1007"></span><span>          </span><span class="hs-comment">-- allow the case analysis only on nullable columns.</span><span>
</span><span id="line-1008"></span><span>          </span><span id="local-6989586621689488699"><span class="annot"><span class="annottext">nullability :: Bool
</span><a href="#local-6989586621689488699"><span class="hs-identifier hs-var hs-var">nullability</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621689488705"><span class="hs-identifier hs-var">caseBoolExp</span></a></span><span>
</span><span id="line-1009"></span><span>      </span><span id="local-6989586621689488698"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689488698"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
-&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
 -&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b))))
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
-&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r, Has NamingCase r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621689488699"><span class="hs-identifier hs-var">nullability</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1010"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1011"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (Maybe (ScalarSelectionArguments b))
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; FieldParser MetadataObjId n (Maybe (ScalarSelectionArguments b))
forall (m :: * -&gt; *) origin a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser origin m a
-&gt; Parser origin 'Both m b
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection"><span class="hs-identifier hs-var">P.selection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488709"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (ScalarSelectionArguments b))
</span><a href="#local-6989586621689488701"><span class="hs-identifier hs-var">pathArg</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621689488698"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-1012"></span><span>          </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (Maybe (ScalarSelectionArguments b))
-&gt; (Maybe (ScalarSelectionArguments b) -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; ColumnType b
-&gt; Maybe
     (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; Maybe (ScalarSelectionArguments b)
-&gt; AnnotatedField b
forall (backend :: BackendType) v r.
Column backend
-&gt; ColumnType backend
-&gt; Maybe (AnnColumnCaseBoolExp backend v)
-&gt; Maybe (ScalarSelectionArguments backend)
-&gt; AnnFieldG backend r v
</span><a href="Hasura.RQL.IR.Select.html#mkAnnColumnField"><span class="hs-identifier hs-var">IR.mkAnnColumnField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621689488712"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
</span><a href="#local-6989586621689488703"><span class="hs-identifier hs-var">caseBoolExpUnpreparedValue</span></a></span><span>
</span><span id="line-1013"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIRelationship"><span class="hs-identifier hs-type">FIRelationship</span></a></span><span> </span><span id="local-6989586621689488695"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488695"><span class="hs-identifier hs-var">relationshipInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1014"></span><span>    </span><span class="annot"><span class="annottext">[[FieldParser n (AnnotatedField b)]]
-&gt; [FieldParser n (AnnotatedField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[FieldParser n (AnnotatedField b)]]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; (Maybe [FieldParser n (AnnotatedField b)]
    -&gt; [[FieldParser n (AnnotatedField b)]])
-&gt; Maybe [FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (AnnotatedField b)]
-&gt; [[FieldParser n (AnnotatedField b)]]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (AnnotatedField b)]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadBuildSchema b r m n, BackendTableSelectSchema b,
 Eq (BooleanOperators b (UnpreparedValue b)),
 Eq (FunctionArgumentExp b (UnpreparedValue b))) =&gt;
SourceInfo b
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
</span><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-var">relationshipField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488716"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488715"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488695"><span class="hs-identifier hs-var">relationshipInfo</span></a></span><span>
</span><span id="line-1015"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIComputedField"><span class="hs-identifier hs-type">FIComputedField</span></a></span><span> </span><span id="local-6989586621689488692"><span class="annot"><span class="annottext">ComputedFieldInfo b
</span><a href="#local-6989586621689488692"><span class="hs-identifier hs-var">computedFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1016"></span><span>    </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldParser n (AnnotatedField b))
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; ComputedFieldInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceInfo b
-&gt; ComputedFieldInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#computedField"><span class="hs-identifier hs-var">computedField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488716"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldInfo b
</span><a href="#local-6989586621689488692"><span class="hs-identifier hs-var">computedFieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488715"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488714"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1017"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIRemoteRelationship"><span class="hs-identifier hs-type">FIRemoteRelationship</span></a></span><span> </span><span id="local-6989586621689488689"><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621689488689"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1018"></span><span>    </span><span id="local-6989586621689488688"><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689488688"><span class="hs-identifier hs-var">schemaKind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; SchemaKind) -&gt; m SchemaKind
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#scSchemaKind"><span class="hs-identifier hs-var hs-var">scSchemaKind</span></a></span><span>
</span><span id="line-1019"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaKind
</span><a href="#local-6989586621689488688"><span class="hs-identifier hs-var">schemaKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b) -&gt; RemoteFieldInfoRHS
forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; RemoteFieldInfoRHS
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#_rfiRHS"><span class="hs-identifier hs-var hs-var">_rfiRHS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621689488689"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1020"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RelaySchema"><span class="hs-identifier hs-type">RelaySchema</span></a></span><span> </span><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RFISchema"><span class="hs-identifier hs-type">RFISchema</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1021"></span><span>        </span><span class="hs-comment">-- Remote schemas aren't currently supported in Relay, and we therefore</span><span>
</span><span id="line-1022"></span><span>        </span><span class="hs-comment">-- cannot include remote relationships to them while building a</span><span>
</span><span id="line-1023"></span><span>        </span><span class="hs-comment">-- Relay-specific schema: attempting to do so would raise an error, as</span><span>
</span><span id="line-1024"></span><span>        </span><span class="hs-comment">-- 'remoteRelationshipField' would attempt to look into the</span><span>
</span><span id="line-1025"></span><span>        </span><span class="hs-comment">-- 'SchemaOptions' for information about the targeted schema.</span><span>
</span><span id="line-1026"></span><span>        </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1027"></span><span>      </span><span class="annot"><span class="annottext">(SchemaKind, RemoteFieldInfoRHS)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1028"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-type">RemoteRelationshipParserBuilder</span></a></span><span> </span><span id="local-6989586621689488684"><span class="annot"><span class="annottext">forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
MonadBuildSchemaBase r m n =&gt;
RemoteFieldInfo lhsJoinField
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
</span><a href="#local-6989586621689488684"><span class="hs-identifier hs-var">remoteRelationshipField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; RemoteRelationshipParserBuilder)
-&gt; m RemoteRelationshipParserBuilder
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#scRemoteRelationshipParserBuilder"><span class="hs-identifier hs-var hs-var">scRemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-1029"></span><span>        </span><span id="local-6989586621689488682"><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
</span><a href="#local-6989586621689488682"><span class="hs-identifier hs-var">relationshipFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
 -&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
MonadBuildSchemaBase r m n =&gt;
RemoteFieldInfo lhsJoinField
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
</span><a href="#local-6989586621689488684"><span class="hs-identifier hs-var">remoteRelationshipField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621689488689"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span><span>
</span><span id="line-1030"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488680"><span class="annot"><span class="annottext">lhsFields :: HashMap FieldName (DBJoinField b)
</span><a href="#local-6989586621689488680"><span class="hs-identifier hs-var hs-var">lhsFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
-&gt; HashMap FieldName (DBJoinField b)
forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; HashMap FieldName lhsJoinField
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#_rfiLHS"><span class="hs-identifier hs-var hs-var">_rfiLHS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621689488689"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span><span>
</span><span id="line-1031"></span><span>        </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([FieldParser n (AnnotatedField b)]
 -&gt; m [FieldParser n (AnnotatedField b)])
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; m [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (RemoteRelationshipField UnpreparedValue)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RemoteRelationshipField UnpreparedValue -&gt; AnnotatedField b)
-&gt; FieldParser n (RemoteRelationshipField UnpreparedValue)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteRelationshipSelect
  b (RemoteRelationshipField UnpreparedValue)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
RemoteRelationshipSelect b r -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFRemote"><span class="hs-identifier hs-var">IR.AFRemote</span></a></span><span> </span><span class="annot"><span class="annottext">(RemoteRelationshipSelect
   b (RemoteRelationshipField UnpreparedValue)
 -&gt; AnnotatedField b)
-&gt; (RemoteRelationshipField UnpreparedValue
    -&gt; RemoteRelationshipSelect
         b (RemoteRelationshipField UnpreparedValue))
-&gt; RemoteRelationshipField UnpreparedValue
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (DBJoinField b)
-&gt; RemoteRelationshipField UnpreparedValue
-&gt; RemoteRelationshipSelect
     b (RemoteRelationshipField UnpreparedValue)
forall (b :: BackendType) r.
HashMap FieldName (DBJoinField b)
-&gt; r -&gt; RemoteRelationshipSelect b r
</span><a href="Hasura.RQL.IR.Select.html#RemoteRelationshipSelect"><span class="hs-identifier hs-var">IR.RemoteRelationshipSelect</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (DBJoinField b)
</span><a href="#local-6989586621689488680"><span class="hs-identifier hs-var">lhsFields</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
</span><a href="#local-6989586621689488682"><span class="hs-identifier hs-var">relationshipFields</span></a></span><span>
</span><span id="line-1032"></span><span>
</span><span id="line-1033"></span><span class="hs-comment">{- Note [Permission filter deduplication]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1. `T` and `U` are tables.

1. `r` is a relationship on `T` to table `U` with the join condition, `T.c =
   U.d` where `c` and `d` are columns on tables `T` and `U` respectively.

1. `s` is a relationship on `U` to table `T` with the join condition, `U.d =
   T.c`.

1. `p(T)` and `p(U)` denote the permission filters on table `T` and `U`
   respectively for some role `R`.

Consider the SQL that we generate for this query:

```
query {
  T {
    c
    r {
      d
    }
  }
}
```

It would be along these lines:

```sql
SELECT
  *
FROM
  (
    SELECT * FROM T WHERE p(T)
  ) AS T
  LEFT OUTER JOIN LATERAL
  (
    SELECT * FROM U WHERE T.c = U.d AND p(U)
  ) AS U
  ON TRUE
```

The expression `T.c = U.d` is the join condition for relationship `r`. Note
that we use lateral joins, so the join condition is not expressed using `ON`
but on the where clause of `U`.

Now, let's say `p(U)` is of the form `{ s : p(T) }`.

```sql
SELECT
  *
FROM
  (
    SELECT * FROM T WHERE p(T)
  ) AS T
  LEFT OUTER JOIN LATERAL
  (
    SELECT * FROM U WHERE T.c = U.d
    AND EXISTS (
      SELECT 1 FROM T WHERE U.d = T.c AND p(T)
    )
  ) AS U
  ON TRUE
```

`p(U)`, i.e, `{ s : p(T) }` got expanded to

```sql
EXISTS (
  SELECT 1 FROM T WHERE U.d = T.c AND p(T)
)
```

Now, assuming, in the `WHERE` clause for `U`, that `T.c = U.d` holds, then the
`EXISTS` clause must evaluate to true. The `EXISTS` clause must evaluate to true
because the row from `T` we are joining against is exactly such a row satisfying
`p(T)`. In other words, the row obtained from `T` (as the left-hand side of the
join) satisfies `p(T)`.
-}</span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span class="hs-comment">-- | Field parsers for a table relationship</span><span>
</span><span id="line-1114"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-type">relationshipField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1115"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621689489369"><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621689489368"><span class="annot"><a href="#local-6989586621689489368"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621689489367"><span class="annot"><a href="#local-6989586621689489367"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621689489366"><span class="annot"><a href="#local-6989586621689489366"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1116"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489368"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489367"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489366"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1117"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1118"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#BooleanOperators"><span class="hs-identifier hs-type">BooleanOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1119"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#FunctionArgumentExp"><span class="hs-identifier hs-type">FunctionArgumentExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1121"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1122"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1123"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#RelInfo"><span class="hs-identifier hs-type">RelInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1124"></span><span>  </span><span class="annot"><a href="#local-6989586621689489367"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489366"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-type">AnnotatedField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span id="relationshipField"><span class="annot"><span class="annottext">relationshipField :: SourceInfo b
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
</span><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-var hs-var">relationshipField</span></a></span></span><span> </span><span id="local-6989586621689488676"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span id="local-6989586621689488675"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488675"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621689488674"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m [FieldParser n (AnnotatedField b)]
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1126"></span><span>  </span><span id="local-6989586621689488673"><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488673"><span class="hs-identifier hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; NamingCase) -&gt; MaybeT m NamingCase
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; NamingCase
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1127"></span><span>  </span><span id="local-6989586621689488672"><span class="annot"><span class="annottext">OptimizePermissionFilters
</span><a href="#local-6989586621689488672"><span class="hs-identifier hs-var">optimizePermissionFilters</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaOptions -&gt; OptimizePermissionFilters)
-&gt; MaybeT m OptimizePermissionFilters
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions -&gt; OptimizePermissionFilters
</span><a href="Hasura.GraphQL.Schema.Options.html#soOptimizePermissionFilters"><span class="hs-identifier hs-var hs-var">Options.soOptimizePermissionFilters</span></a></span><span>
</span><span id="line-1128"></span><span>  </span><span id="local-6989586621689488670"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo b) -&gt; MaybeT m (TableInfo b))
-&gt; m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
SourceInfo b -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TableName b -&gt; m (TableInfo b)) -&gt; TableName b -&gt; m (TableInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1129"></span><span>  </span><span id="local-6989586621689488667"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488667"><span class="hs-identifier hs-var">remotePerms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1130"></span><span>  </span><span id="local-6989586621689488666"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488666"><span class="hs-identifier hs-var">relFieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m Name) -&gt; Text -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(RelName -&gt; Text) -&gt; RelName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1131"></span><span>  </span><span class="hs-comment">-- START black magic to deduplicate permission checks</span><span>
</span><span id="line-1132"></span><span>  </span><span id="local-6989586621689488664"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488664"><span class="hs-identifier hs-var">thisTablePerm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1133"></span><span>    </span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="annot"><span class="annottext">(TablePermG b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; (SelPermInfo b -&gt; TablePermG b (UnpreparedValue b))
-&gt; SelPermInfo b
-&gt; AnnBoolExp b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span>
</span><span id="line-1134"></span><span>      </span><span class="annot"><span class="annottext">(SelPermInfo b -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; MaybeT m (SelPermInfo b)
-&gt; MaybeT m (AnnBoolExp b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has RoleName r) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(TableInfo b -&gt; m (Maybe (SelPermInfo b)))
-&gt; m (TableInfo b) -&gt; m (Maybe (SelPermInfo b))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
SourceInfo b -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488675"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621689488661"><span class="hs-identifier hs-type">deduplicatePermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>      </span><span id="local-6989586621689488661"><span class="annot"><span class="annottext">deduplicatePermissions :: AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488661"><span class="hs-identifier hs-var hs-var">deduplicatePermissions</span></a></span></span><span> </span><span id="local-6989586621689488660"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488660"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1137"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OptimizePermissionFilters
</span><a href="#local-6989586621689488672"><span class="hs-identifier hs-var">optimizePermissionFilters</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488660"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1138"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OptimizePermissionFilters
</span><a href="Hasura.GraphQL.Schema.Options.html#OptimizePermissionFilters"><span class="hs-identifier hs-var">OptimizePermissionFilters</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-type">BoolAnd</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#BoolField"><span class="hs-identifier hs-type">BoolField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AVRelationship"><span class="hs-identifier hs-type">AVRelationship</span></a></span><span> </span><span id="local-6989586621689488657"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488657"><span class="hs-identifier hs-var">remoteRI</span></a></span></span><span> </span><span id="local-6989586621689488656"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488656"><span class="hs-identifier hs-var">remoteTablePerm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1139"></span><span>            </span><span class="hs-comment">-- Here we try to figure out if the &quot;forwards&quot; joining condition</span><span>
</span><span id="line-1140"></span><span>            </span><span class="hs-comment">-- from `table` to the related table `riRTable ri` is equal to the</span><span>
</span><span id="line-1141"></span><span>            </span><span class="hs-comment">-- &quot;backwards&quot; joining condition from the related table back to</span><span>
</span><span id="line-1142"></span><span>            </span><span class="hs-comment">-- `table`.  If it is, then we can optimize the row-level permission</span><span>
</span><span id="line-1143"></span><span>            </span><span class="hs-comment">-- filters by dropping them here.</span><span>
</span><span id="line-1144"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488657"><span class="hs-identifier hs-var">remoteRI</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; TableName b -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488675"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-1145"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488657"><span class="hs-identifier hs-var">remoteRI</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Column b) (Column b)
-&gt; HashMap (Column b) (Column b) -&gt; Bool
forall k v.
(Eq k, Hashable k, Eq v, Hashable v) =&gt;
HashMap k v -&gt; HashMap v k -&gt; Bool
</span><a href="Data.HashMap.Strict.Extended.html#isInverseOf"><span class="hs-operator hs-var">`Map.isInverseOf`</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1146"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488664"><span class="hs-identifier hs-var">thisTablePerm</span></a></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488656"><span class="hs-identifier hs-var">remoteTablePerm</span></a></span><span>
</span><span id="line-1147"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[AnnBoolExp b (UnpreparedValue b)]
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (backend :: BackendType) field.
[GBoolExp backend field] -&gt; GBoolExp backend field
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-var">BoolAnd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1148"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488660"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1149"></span><span>          </span><span class="annot"><span class="annottext">(OptimizePermissionFilters, AnnBoolExp b (UnpreparedValue b))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488660"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1150"></span><span>      </span><span class="annot"><a href="#local-6989586621689488653"><span class="hs-identifier hs-type">deduplicatePermissions'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1151"></span><span>      </span><span id="local-6989586621689488653"><span class="annot"><span class="annottext">deduplicatePermissions' :: SelectExp b -&gt; SelectExp b
</span><a href="#local-6989586621689488653"><span class="hs-identifier hs-var hs-var">deduplicatePermissions'</span></a></span></span><span> </span><span id="local-6989586621689488652"><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488652"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1152"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488651"><span class="annot"><span class="annottext">newFilter :: AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488651"><span class="hs-identifier hs-var hs-var">newFilter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488661"><span class="hs-identifier hs-var">deduplicatePermissions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelectExp b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType) (f :: * -&gt; *) v.
AnnSelectG b f v -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var hs-var">IR._asnPerm</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488652"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488652"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:_asnPerm:AnnSelectG :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelectExp b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType) (f :: * -&gt; *) v.
AnnSelectG b f v -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_asnPerm%3AAnnSelectG"><span class="hs-identifier hs-var hs-var">IR._asnPerm</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488652"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:_tpFilter:TablePerm :: AnnBoolExp b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488651"><span class="hs-identifier hs-var">newFilter</span></a></span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1154"></span><span>  </span><span class="hs-comment">-- END black magic to deduplicate permission checks</span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelType
forall (b :: BackendType). RelInfo b -&gt; RelType
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riType"><span class="hs-identifier hs-var hs-var">riType</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1157"></span><span>    </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1158"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488648"><span class="annot"><span class="annottext">desc :: Maybe Description
</span><a href="#local-6989586621689488648"><span class="hs-identifier hs-var hs-var">desc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An object relationship&quot;</span></span><span>
</span><span id="line-1159"></span><span>      </span><span id="local-6989586621689488647"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689488647"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1160"></span><span>      </span><span class="hs-comment">-- We need to set the correct nullability of our GraphQL field.  Manual</span><span>
</span><span id="line-1161"></span><span>      </span><span class="hs-comment">-- relationships are always nullable, and so are &quot;reverse&quot; object</span><span>
</span><span id="line-1162"></span><span>      </span><span class="hs-comment">-- relationships, i.e. Hasura relationships that are generated from a</span><span>
</span><span id="line-1163"></span><span>      </span><span class="hs-comment">-- referenced table to a referencing table.  For automatic forward object</span><span>
</span><span id="line-1164"></span><span>      </span><span class="hs-comment">-- relationships, i.e. the generated relationship from table1 to table2,</span><span>
</span><span id="line-1165"></span><span>      </span><span class="hs-comment">-- where table1 has a foreign key constraint, we have to do some work.</span><span>
</span><span id="line-1166"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1167"></span><span>      </span><span class="hs-comment">-- Specifically, we would like to mark the relationship generated from a</span><span>
</span><span id="line-1168"></span><span>      </span><span class="hs-comment">-- foreign key constraint from table1 to table2 to be non-nullable if</span><span>
</span><span id="line-1169"></span><span>      </span><span class="hs-comment">-- Postgres enforces that for each row in table1, a corresponding row in</span><span>
</span><span id="line-1170"></span><span>      </span><span class="hs-comment">-- table2 exists.  From the Postgres manual:</span><span>
</span><span id="line-1171"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1172"></span><span>      </span><span class="hs-comment">-- &quot;Normally, a referencing row need not satisfy the foreign key</span><span>
</span><span id="line-1173"></span><span>      </span><span class="hs-comment">-- constraint if any of its referencing columns are null.  If MATCH FULL</span><span>
</span><span id="line-1174"></span><span>      </span><span class="hs-comment">-- is added to the foreign key declaration, a referencing row escapes</span><span>
</span><span id="line-1175"></span><span>      </span><span class="hs-comment">-- satisfying the constraint only if all its referencing columns are null</span><span>
</span><span id="line-1176"></span><span>      </span><span class="hs-comment">-- (so a mix of null and non-null values is guaranteed to fail a MATCH</span><span>
</span><span id="line-1177"></span><span>      </span><span class="hs-comment">-- FULL constraint).&quot;</span><span>
</span><span id="line-1178"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1179"></span><span>      </span><span class="hs-comment">-- https://www.postgresql.org/docs/9.5/ddl-constraints.html#DDL-CONSTRAINTS-FK</span><span>
</span><span id="line-1180"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1181"></span><span>      </span><span class="hs-comment">-- Since we don't store MATCH FULL in the RQL representation of the</span><span>
</span><span id="line-1182"></span><span>      </span><span class="hs-comment">-- database, the closest we can get is to only set the field to be</span><span>
</span><span id="line-1183"></span><span>      </span><span class="hs-comment">-- non-nullable if _all_ of the columns that reference the foreign table</span><span>
</span><span id="line-1184"></span><span>      </span><span class="hs-comment">-- are non-nullable.  Strictly speaking, we could do slightly better by</span><span>
</span><span id="line-1185"></span><span>      </span><span class="hs-comment">-- setting the field to be non-nullable also if the foreign key has MATCH</span><span>
</span><span id="line-1186"></span><span>      </span><span class="hs-comment">-- FULL set, and _any_ of the columns is non-nullable.  But we skip doing</span><span>
</span><span id="line-1187"></span><span>      </span><span class="hs-comment">-- this since, as of writing this, the old code used to make the wrong</span><span>
</span><span id="line-1188"></span><span>      </span><span class="hs-comment">-- decision about nullability of joint foreign keys entirely, so this is</span><span>
</span><span id="line-1189"></span><span>      </span><span class="hs-comment">-- probably not a very widely used mode of use.  The impact of this</span><span>
</span><span id="line-1190"></span><span>      </span><span class="hs-comment">-- suboptimality is merely that in introspection some fields might get</span><span>
</span><span id="line-1191"></span><span>      </span><span class="hs-comment">-- marked nullable which are in fact known to always be non-null.</span><span>
</span><span id="line-1192"></span><span>      </span><span id="local-6989586621689488646"><span class="annot"><span class="annottext">Nullable
</span><a href="#local-6989586621689488646"><span class="hs-identifier hs-var">nullable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; Bool
forall (b :: BackendType). RelInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riIsManual"><span class="hs-identifier hs-var hs-var">riIsManual</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; InsertOrder
forall (b :: BackendType). RelInfo b -&gt; InsertOrder
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riInsertOrder"><span class="hs-identifier hs-var hs-var">riInsertOrder</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1193"></span><span>        </span><span class="hs-comment">-- Automatically generated forward relationship</span><span>
</span><span id="line-1194"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InsertOrder
</span><a href="Hasura.RQL.Types.Common.html#BeforeParent"><span class="hs-identifier hs-var">BeforeParent</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1195"></span><span>          </span><span id="local-6989586621689488642"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488642"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; TableName b -&gt; MaybeT m (TableInfo b)
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
SourceInfo b -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621689488675"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-1196"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488641"><span class="annot"><span class="annottext">columns :: [Column b]
</span><a href="#local-6989586621689488641"><span class="hs-identifier hs-var hs-var">columns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap (Column b) (Column b) -&gt; [Column b]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">(HashMap (Column b) (Column b) -&gt; [Column b])
-&gt; HashMap (Column b) (Column b) -&gt; [Column b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1197"></span><span>              </span><span id="local-6989586621689488639"><span class="annot"><span class="annottext">fieldInfoMap :: FieldInfoMap (FieldInfo b)
</span><a href="#local-6989586621689488639"><span class="hs-identifier hs-var hs-var">fieldInfoMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; FieldInfoMap (FieldInfo b)
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; FieldInfoMap field
</span><a href="Hasura.RQL.Types.Table.html#_tciFieldInfoMap"><span class="hs-identifier hs-var hs-var">_tciFieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; FieldInfoMap (FieldInfo b))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; FieldInfoMap (FieldInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488642"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1198"></span><span>              </span><span id="local-6989586621689488638"><span class="annot"><span class="annottext">findColumn :: Column b -&gt; Maybe (ColumnInfo b)
</span><a href="#local-6989586621689488638"><span class="hs-identifier hs-var hs-var">findColumn</span></a></span></span><span> </span><span id="local-6989586621689488637"><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621689488637"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; FieldInfoMap (FieldInfo b) -&gt; Maybe (FieldInfo b)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column b -&gt; FieldName
forall (b :: BackendType). Backend b =&gt; Column b -&gt; FieldName
</span><a href="Hasura.RQL.Types.Column.html#fromCol"><span class="hs-identifier hs-var">fromCol</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621689488637"><span class="hs-identifier hs-var">col</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldInfoMap (FieldInfo b)
</span><a href="#local-6989586621689488639"><span class="hs-identifier hs-var">fieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldInfo b)
-&gt; Getting
     (First (ColumnInfo b)) (Maybe (FieldInfo b)) (ColumnInfo b)
-&gt; Maybe (ColumnInfo b)
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">(FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
-&gt; Maybe (FieldInfo b)
-&gt; Const (First (ColumnInfo b)) (Maybe (FieldInfo b))
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span> </span><span class="annot"><span class="annottext">((FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
 -&gt; Maybe (FieldInfo b)
 -&gt; Const (First (ColumnInfo b)) (Maybe (FieldInfo b)))
-&gt; ((ColumnInfo b -&gt; Const (First (ColumnInfo b)) (ColumnInfo b))
    -&gt; FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
-&gt; Getting
     (First (ColumnInfo b)) (Maybe (FieldInfo b)) (ColumnInfo b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Const (First (ColumnInfo b)) (ColumnInfo b))
-&gt; FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b)
forall (b :: BackendType). Prism' (FieldInfo b) (ColumnInfo b)
</span><a href="Hasura.RQL.Types.Table.html#_FIColumn"><span class="hs-identifier hs-var">_FIColumn</span></a></span><span>
</span><span id="line-1199"></span><span>          </span><span class="hs-comment">-- Fetch information about the referencing columns of the foreign key</span><span>
</span><span id="line-1200"></span><span>          </span><span class="hs-comment">-- constraint</span><span>
</span><span id="line-1201"></span><span>          </span><span id="local-6989586621689488632"><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488632"><span class="hs-identifier hs-var">colInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1202"></span><span>            </span><span class="annot"><span class="annottext">(Column b -&gt; Maybe (ColumnInfo b))
-&gt; [Column b] -&gt; Maybe [ColumnInfo b]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Maybe (ColumnInfo b)
</span><a href="#local-6989586621689488638"><span class="hs-identifier hs-var">findColumn</span></a></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621689488641"><span class="hs-identifier hs-var">columns</span></a></span><span>
</span><span id="line-1203"></span><span>              </span><span class="annot"><span class="annottext">Maybe [ColumnInfo b]
-&gt; MaybeT m [ColumnInfo b] -&gt; MaybeT m [ColumnInfo b]
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MaybeT m [ColumnInfo b]
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;could not find column info in schema cache&quot;</span></span><span>
</span><span id="line-1204"></span><span>          </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#boolToNullable"><span class="hs-identifier hs-var">boolToNullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Nullable) -&gt; Bool -&gt; Nullable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Bool) -&gt; [ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621689488632"><span class="hs-identifier hs-var">colInfo</span></a></span><span>
</span><span id="line-1205"></span><span>        </span><span class="hs-comment">-- Manual or reverse relationships are always nullable</span><span>
</span><span id="line-1206"></span><span>        </span><span class="annot"><span class="annottext">(Bool, InsertOrder)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nullable -&gt; MaybeT m Nullable
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a></span><span>
</span><span id="line-1207"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1208"></span><span>        </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AnnotatedField b)
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; FieldParser n (AnnotatedField b)
-&gt; [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1209"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="#local-6989586621689488646"><span class="hs-identifier hs-var">nullable</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#NotNullable"><span class="hs-identifier hs-var">NotNullable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (m :: * -&gt; *) origin a.
FieldParser origin m a -&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableField"><span class="hs-identifier hs-var">P.nonNullableField</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AnnotatedField b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1210"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser MetadataObjId n (AnnotatedFields b)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488666"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488648"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621689488647"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-1211"></span><span>              </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (AnnotatedFields b)
-&gt; (AnnotatedFields b -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488624"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689488624"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1212"></span><span>                </span><span class="annot"><span class="annottext">ObjectRelationSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ObjectRelationSelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFObjectRelation"><span class="hs-identifier hs-var">IR.AFObjectRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectRelationSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1213"></span><span>                  </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AnnObjectSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ObjectRelationSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1214"></span><span>                    </span><span class="annot"><span class="annottext">AnnotatedFields b
-&gt; TableName b
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
AnnFieldsG b r v
-&gt; TableName b -&gt; AnnBoolExp b v -&gt; AnnObjectSelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#AnnObjectSelectG"><span class="hs-identifier hs-var">IR.AnnObjectSelectG</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621689488624"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AnnBoolExp b (UnpreparedValue b)
 -&gt; AnnObjectSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1215"></span><span>                      </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621689488661"><span class="hs-identifier hs-var">deduplicatePermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExp b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1216"></span><span>                        </span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="annot"><span class="annottext">(TablePermG b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488667"><span class="hs-identifier hs-var">remotePerms</span></a></span><span>
</span><span id="line-1217"></span><span>    </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1218"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488619"><span class="annot"><span class="annottext">arrayRelDesc :: Maybe Description
</span><a href="#local-6989586621689488619"><span class="hs-identifier hs-var hs-var">arrayRelDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An array relationship&quot;</span></span><span>
</span><span id="line-1219"></span><span>      </span><span id="local-6989586621689488618"><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
</span><a href="#local-6989586621689488618"><span class="hs-identifier hs-var">otherTableParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (SelectExp b)))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (SelectExp b)))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#selectTable"><span class="hs-identifier hs-var">selectTable</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488666"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488619"><span class="hs-identifier hs-var">arrayRelDesc</span></a></span><span>
</span><span id="line-1220"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488616"><span class="annot"><span class="annottext">arrayRelField :: FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621689488616"><span class="hs-identifier hs-var hs-var">arrayRelField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1221"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
</span><a href="#local-6989586621689488618"><span class="hs-identifier hs-var">otherTableParser</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
-&gt; (SelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621689488615"><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488615"><span class="hs-identifier hs-var">selectExp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1222"></span><span>              </span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1223"></span><span>                </span><span class="annot"><span class="annottext">ArrayRelationSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayRelationSelectG b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASSimple"><span class="hs-identifier hs-var">IR.ASSimple</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayRelationSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1224"></span><span>                  </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; SelectExp b
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SelectExp b
 -&gt; ArrayRelationSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; SelectExp b
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1225"></span><span>                    </span><span class="annot"><span class="annottext">SelectExp b -&gt; SelectExp b
</span><a href="#local-6989586621689488653"><span class="hs-identifier hs-var">deduplicatePermissions'</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621689488615"><span class="hs-identifier hs-var">selectExp</span></a></span><span>
</span><span id="line-1226"></span><span>          </span><span id="local-6989586621689488612"><span class="annot"><span class="annottext">relAggFieldName :: Name
</span><a href="#local-6989586621689488612"><span class="hs-identifier hs-var hs-var">relAggFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; Name -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseCust"><span class="hs-identifier hs-var">applyFieldNameCaseCust</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621689488673"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; Name -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488666"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__aggregate"><span class="hs-identifier hs-var">Name.__aggregate</span></a></span><span>
</span><span id="line-1227"></span><span>          </span><span id="local-6989586621689488611"><span class="annot"><span class="annottext">relAggDesc :: Maybe Description
</span><a href="#local-6989586621689488611"><span class="hs-identifier hs-var hs-var">relAggDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An aggregate relationship&quot;</span></span><span>
</span><span id="line-1228"></span><span>      </span><span id="local-6989586621689488610"><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp b))
</span><a href="#local-6989586621689488610"><span class="hs-identifier hs-var">remoteAggField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (AggSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (AggSelectExp b)))
 -&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b))))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSchemaBase r m n) =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#selectTableAggregate"><span class="hs-identifier hs-var">selectTableAggregate</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488612"><span class="hs-identifier hs-var">relAggFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488611"><span class="hs-identifier hs-var">relAggDesc</span></a></span><span>
</span><span id="line-1229"></span><span>      </span><span id="local-6989586621689488608"><span class="annot"><span class="annottext">Maybe (FieldParser n (ConnectionSelectExp b))
</span><a href="#local-6989586621689488608"><span class="hs-identifier hs-var">remoteConnectionField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
 -&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b))))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1230"></span><span>        </span><span class="hs-comment">-- Parse array connection field only for relay schema</span><span>
</span><span id="line-1231"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RelaySchema"><span class="hs-identifier hs-type">RelaySchema</span></a></span><span> </span><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; SchemaKind) -&gt; MaybeT (MaybeT m) SchemaKind
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#scSchemaKind"><span class="hs-identifier hs-var hs-var">scSchemaKind</span></a></span><span>
</span><span id="line-1232"></span><span>        </span><span id="local-6989586621689488607"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621689488607"><span class="hs-identifier hs-var">_xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b))
-&gt; Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621689489369"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1233"></span><span>        </span><span id="local-6989586621689488606"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689488606"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1234"></span><span>          </span><span class="annot"><span class="annottext">MaybeT m (Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (Maybe (NESeq (ColumnInfo b)))
 -&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b)))
-&gt; MaybeT m (Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1235"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableInfo b
-&gt; Getting
     (First (NESeq (ColumnInfo b))) (TableInfo b) (NESeq (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; TableInfo b
-&gt; Const (First (NESeq (ColumnInfo b))) (TableInfo b)
forall (b :: BackendType). Lens' (TableInfo b) (TableCoreInfo b)
</span><a href="Hasura.RQL.Types.Table.html#tiCoreInfo"><span class="hs-identifier hs-var">tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
  -&gt; Const
       (First (NESeq (ColumnInfo b)))
       (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
 -&gt; TableInfo b
 -&gt; Const (First (NESeq (ColumnInfo b))) (TableInfo b))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
    -&gt; Const
         (First (NESeq (ColumnInfo b)))
         (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; Getting
     (First (NESeq (ColumnInfo b))) (TableInfo b) (NESeq (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1
       primaryKeyColumn2.
Lens
  (TableCoreInfoG b field primaryKeyColumn1)
  (TableCoreInfoG b field primaryKeyColumn2)
  (Maybe (PrimaryKey b primaryKeyColumn1))
  (Maybe (PrimaryKey b primaryKeyColumn2))
</span><a href="Hasura.RQL.Types.Table.html#tciPrimaryKey"><span class="hs-identifier hs-var">tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe (PrimaryKey b (ColumnInfo b))
  -&gt; Const
       (First (NESeq (ColumnInfo b)))
       (Maybe (PrimaryKey b (ColumnInfo b))))
 -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; Maybe (PrimaryKey b (ColumnInfo b))
    -&gt; Const
         (First (NESeq (ColumnInfo b)))
         (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; (NESeq (ColumnInfo b)
    -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (Maybe (PrimaryKey b (ColumnInfo b)))
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span> </span><span class="annot"><span class="annottext">((PrimaryKey b (ColumnInfo b)
  -&gt; Const
       (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
 -&gt; Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; PrimaryKey b (ColumnInfo b)
    -&gt; Const
         (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
-&gt; (NESeq (ColumnInfo b)
    -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (Maybe (PrimaryKey b (ColumnInfo b)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NESeq (ColumnInfo b)
 -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; PrimaryKey b (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) a1 a2.
Lens (PrimaryKey b a1) (PrimaryKey b a2) (NESeq a1) (NESeq a2)
</span><a href="Hasura.RQL.Types.Table.html#pkColumns"><span class="hs-identifier hs-var">pkColumns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>              </span><span class="annot"><span class="annottext">(TableInfo b -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT m (TableInfo b)
-&gt; MaybeT m (Maybe (NESeq (ColumnInfo b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; MaybeT m (TableInfo b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1237"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621689488602"><span class="annot"><span class="annottext">relConnectionName :: Name
</span><a href="#local-6989586621689488602"><span class="hs-identifier hs-var hs-var">relConnectionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488666"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#__connection"><span class="hs-identifier hs-var">Name.__connection</span></a></span><span>
</span><span id="line-1238"></span><span>            </span><span id="local-6989586621689488600"><span class="annot"><span class="annottext">relConnectionDesc :: Maybe Description
</span><a href="#local-6989586621689488600"><span class="hs-identifier hs-var hs-var">relConnectionDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An array relationship connection&quot;</span></span><span>
</span><span id="line-1239"></span><span>        </span><span class="annot"><span class="annottext">MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
 -&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (ConnectionSelectExp b)))
 -&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b))))
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; NESeq (ColumnInfo b)
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadBuildSchema b r m n, BackendTableSelectSchema b) =&gt;
SourceInfo b
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; PrimaryKeyColumns b
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-var">selectTableConnection</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621689488676"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621689488670"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621689488602"><span class="hs-identifier hs-var">relConnectionName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621689488600"><span class="hs-identifier hs-var">relConnectionDesc</span></a></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621689488606"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-1240"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1241"></span><span>        </span><span class="annot"><span class="annottext">[Maybe (FieldParser n (AnnotatedField b))]
-&gt; [FieldParser n (AnnotatedField b)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-1242"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621689488616"><span class="hs-identifier hs-var">arrayRelField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1243"></span><span>            </span><span class="annot"><span class="annottext">(AggSelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (AggSelectExp b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; (AggSelectExp b
    -&gt; ArraySelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AggSelectExp b
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArrayAggregateSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayAggregateSelectG b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASAggregate"><span class="hs-identifier hs-var">IR.ASAggregate</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayAggregateSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; (AggSelectExp b
    -&gt; ArrayAggregateSelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AggSelectExp b
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; AggSelectExp b
-&gt; ArrayAggregateSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggSelectExp b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; Maybe (FieldParser n (AggSelectExp b))
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp b))
</span><a href="#local-6989586621689488610"><span class="hs-identifier hs-var">remoteAggField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1244"></span><span>            </span><span class="annot"><span class="annottext">(ConnectionSelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (ConnectionSelectExp b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; (ConnectionSelectExp b
    -&gt; ArraySelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ConnectionSelectExp b
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArrayConnectionSelect
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayConnectionSelect b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASConnection"><span class="hs-identifier hs-var">IR.ASConnection</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayConnectionSelect
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; (ConnectionSelectExp b
    -&gt; ArrayConnectionSelect
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ConnectionSelectExp b
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; ConnectionSelectExp b
-&gt; ArrayConnectionSelect
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621689488674"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (ConnectionSelectExp b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; Maybe (FieldParser n (ConnectionSelectExp b))
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (ConnectionSelectExp b))
</span><a href="#local-6989586621689488608"><span class="hs-identifier hs-var">remoteConnectionField</span></a></span><span>
</span><span id="line-1245"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1246"></span><span>
</span><span id="line-1247"></span><span id="local-6989586621689489848"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-type">tablePermissionsInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489848"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489848"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#TablePerms"><span class="hs-identifier hs-type">TablePerms</span></a></span><span> </span><span class="annot"><a href="#local-6989586621689489848"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1248"></span><span id="tablePermissionsInfo"><span class="annot"><span class="annottext">tablePermissionsInfo :: SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var hs-var">tablePermissionsInfo</span></a></span></span><span> </span><span id="local-6989586621689488597"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488597"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1249"></span><span>  </span><span class="annot"><span class="annottext">TablePerm :: forall (b :: BackendType) v.
AnnBoolExp b v -&gt; Maybe Int -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#TablePerm"><span class="hs-identifier hs-type">IR.TablePerm</span></a></span><span>
</span><span id="line-1250"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:_tpFilter:TablePerm :: AnnBoolExp b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnBoolExpFld b (PartialSQLExp b)
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld b (PartialSQLExp b)
 -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
forall (b :: BackendType). SelPermInfo b -&gt; AnnBoolExpPartialSQL b
</span><a href="Hasura.RQL.Types.Table.html#spiFilter"><span class="hs-identifier hs-var hs-var">spiFilter</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488597"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1251"></span><span>      </span><span class="annot"><span class="annottext">$sel:_tpLimit:TablePerm :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#%24sel%3A_tpLimit%3ATablePerm"><span class="hs-identifier hs-var">IR._tpLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Maybe Int
forall (b :: BackendType). SelPermInfo b -&gt; Maybe Int
</span><a href="Hasura.RQL.Types.Table.html#spiLimit"><span class="hs-identifier hs-var hs-var">spiLimit</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621689488597"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-1252"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1253"></span></pre></body></html>